import{g as An,a as qo}from"./vendor-CH9ipRDm.js";var $o={},Gi={};Gi.byteLength=zh;Gi.toByteArray=Kh;Gi.fromByteArray=Wh;var ir=[],We=[],Nh=typeof Uint8Array<"u"?Uint8Array:Array,Os="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var on=0,Dh=Os.length;on<Dh;++on)ir[on]=Os[on],We[Os.charCodeAt(on)]=on;We[45]=62;We[95]=63;function _u(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function zh(n){var t=_u(n),e=t[0],r=t[1];return(e+r)*3/4-r}function Fh(n,t,e){return(t+e)*3/4-e}function Kh(n){var t,e=_u(n),r=e[0],s=e[1],i=new Nh(Fh(n,r,s)),o=0,u=s>0?r-4:r,l;for(l=0;l<u;l+=4)t=We[n.charCodeAt(l)]<<18|We[n.charCodeAt(l+1)]<<12|We[n.charCodeAt(l+2)]<<6|We[n.charCodeAt(l+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=We[n.charCodeAt(l)]<<2|We[n.charCodeAt(l+1)]>>4,i[o++]=t&255),s===1&&(t=We[n.charCodeAt(l)]<<10|We[n.charCodeAt(l+1)]<<4|We[n.charCodeAt(l+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function qh(n){return ir[n>>18&63]+ir[n>>12&63]+ir[n>>6&63]+ir[n&63]}function $h(n,t,e){for(var r,s=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),s.push(qh(r));return s.join("")}function Wh(n){for(var t,e=n.length,r=e%3,s=[],i=16383,o=0,u=e-r;o<u;o+=i)s.push($h(n,o,o+i>u?u:o+i));return r===1?(t=n[e-1],s.push(ir[t>>2]+ir[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],s.push(ir[t>>10]+ir[t>>4&63]+ir[t<<2&63]+"=")),s.join("")}var Wo={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Wo.read=function(n,t,e,r,s){var i,o,u=s*8-r-1,l=(1<<u)-1,g=l>>1,d=-7,x=e?s-1:0,A=e?-1:1,k=n[t+x];for(x+=A,i=k&(1<<-d)-1,k>>=-d,d+=u;d>0;i=i*256+n[t+x],x+=A,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=r;d>0;o=o*256+n[t+x],x+=A,d-=8);if(i===0)i=1-g;else{if(i===l)return o?NaN:(k?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-g}return(k?-1:1)*o*Math.pow(2,i-r)};Wo.write=function(n,t,e,r,s,i){var o,u,l,g=i*8-s-1,d=(1<<g)-1,x=d>>1,A=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=r?0:i-1,R=r?1:-1,D=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+x>=1?t+=A/l:t+=A*Math.pow(2,1-x),t*l>=2&&(o++,l/=2),o+x>=d?(u=0,o=d):o+x>=1?(u=(t*l-1)*Math.pow(2,s),o=o+x):(u=t*Math.pow(2,x-1)*Math.pow(2,s),o=0));s>=8;n[e+k]=u&255,k+=R,u/=256,s-=8);for(o=o<<s|u,g+=s;g>0;n[e+k]=o&255,k+=R,o/=256,g-=8);n[e+k-R]|=D*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=Gi,e=Wo,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=d,n.SlowBuffer=et,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:u}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const B=new i(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,i.prototype),Object.setPrototypeOf(B,y),B.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function g(B){if(B>s)throw new RangeError('The value "'+B+'" is invalid for option "size"');const y=new i(B);return Object.setPrototypeOf(y,d.prototype),y}function d(B,y,b){if(typeof B=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(B)}return x(B,y,b)}d.poolSize=8192;function x(B,y,b){if(typeof B=="string")return D(B,y);if(o.isView(B))return $(B);if(B==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if(xe(B,o)||B&&xe(B.buffer,o)||typeof u<"u"&&(xe(B,u)||B&&xe(B.buffer,u)))return V(B,y,b);if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=B.valueOf&&B.valueOf();if(U!=null&&U!==B)return d.from(U,y,b);const G=z(B);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return d.from(B[Symbol.toPrimitive]("string"),y,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}d.from=function(B,y,b){return x(B,y,b)},Object.setPrototypeOf(d.prototype,i.prototype),Object.setPrototypeOf(d,i);function A(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function k(B,y,b){return A(B),B<=0?g(B):y!==void 0?typeof b=="string"?g(B).fill(y,b):g(B).fill(y):g(B)}d.alloc=function(B,y,b){return k(B,y,b)};function R(B){return A(B),g(B<0?0:j(B)|0)}d.allocUnsafe=function(B){return R(B)},d.allocUnsafeSlow=function(B){return R(B)};function D(B,y){if((typeof y!="string"||y==="")&&(y="utf8"),!d.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const b=ot(B,y)|0;let U=g(b);const G=U.write(B,y);return G!==b&&(U=U.slice(0,G)),U}function O(B){const y=B.length<0?0:j(B.length)|0,b=g(y);for(let U=0;U<y;U+=1)b[U]=B[U]&255;return b}function $(B){if(xe(B,i)){const y=new i(B);return V(y.buffer,y.byteOffset,y.byteLength)}return O(B)}function V(B,y,b){if(y<0||B.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(B.byteLength<y+(b||0))throw new RangeError('"length" is outside of buffer bounds');let U;return y===void 0&&b===void 0?U=new i(B):b===void 0?U=new i(B,y):U=new i(B,y,b),Object.setPrototypeOf(U,d.prototype),U}function z(B){if(d.isBuffer(B)){const y=j(B.length)|0,b=g(y);return b.length===0||B.copy(b,0,0,y),b}if(B.length!==void 0)return typeof B.length!="number"||Ht(B.length)?g(0):O(B);if(B.type==="Buffer"&&Array.isArray(B.data))return O(B.data)}function j(B){if(B>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return B|0}function et(B){return+B!=B&&(B=0),d.alloc(+B)}d.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==d.prototype},d.compare=function(y,b){if(xe(y,i)&&(y=d.from(y,y.offset,y.byteLength)),xe(b,i)&&(b=d.from(b,b.offset,b.byteLength)),!d.isBuffer(y)||!d.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===b)return 0;let U=y.length,G=b.length;for(let Y=0,it=Math.min(U,G);Y<it;++Y)if(y[Y]!==b[Y]){U=y[Y],G=b[Y];break}return U<G?-1:G<U?1:0},d.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(y,b){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return d.alloc(0);let U;if(b===void 0)for(b=0,U=0;U<y.length;++U)b+=y[U].length;const G=d.allocUnsafe(b);let Y=0;for(U=0;U<y.length;++U){let it=y[U];if(xe(it,i))Y+it.length>G.length?(d.isBuffer(it)||(it=d.from(it)),it.copy(G,Y)):i.prototype.set.call(G,it,Y);else if(d.isBuffer(it))it.copy(G,Y);else throw new TypeError('"list" argument must be an Array of Buffers');Y+=it.length}return G};function ot(B,y){if(d.isBuffer(B))return B.length;if(o.isView(B)||xe(B,o))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);const b=B.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&b===0)return 0;let G=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Zt(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return Mt(B).length;default:if(G)return U?-1:Zt(B).length;y=(""+y).toLowerCase(),G=!0}}d.byteLength=ot;function Q(B,y,b){let U=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,y>>>=0,b<=y))return"";for(B||(B="utf8");;)switch(B){case"hex":return c(this,y,b);case"utf8":case"utf-8":return M(this,y,b);case"ascii":return w(this,y,b);case"latin1":case"binary":return p(this,y,b);case"base64":return _(this,y,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f(this,y,b);default:if(U)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),U=!0}}d.prototype._isBuffer=!0;function rt(B,y,b){const U=B[y];B[y]=B[b],B[b]=U}d.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<y;b+=2)rt(this,b,b+1);return this},d.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<y;b+=4)rt(this,b,b+3),rt(this,b+1,b+2);return this},d.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<y;b+=8)rt(this,b,b+7),rt(this,b+1,b+6),rt(this,b+2,b+5),rt(this,b+3,b+4);return this},d.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?M(this,0,y):Q.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(y){if(!d.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:d.compare(this,y)===0},d.prototype.inspect=function(){let y="";const b=n.INSPECT_MAX_BYTES;return y=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(y+=" ... "),"<Buffer "+y+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(y,b,U,G,Y){if(xe(y,i)&&(y=d.from(y,y.offset,y.byteLength)),!d.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(b===void 0&&(b=0),U===void 0&&(U=y?y.length:0),G===void 0&&(G=0),Y===void 0&&(Y=this.length),b<0||U>y.length||G<0||Y>this.length)throw new RangeError("out of range index");if(G>=Y&&b>=U)return 0;if(G>=Y)return-1;if(b>=U)return 1;if(b>>>=0,U>>>=0,G>>>=0,Y>>>=0,this===y)return 0;let it=Y-G,xt=U-b;const kt=Math.min(it,xt),_t=this.slice(G,Y),jt=y.slice(b,U);for(let vt=0;vt<kt;++vt)if(_t[vt]!==jt[vt]){it=_t[vt],xt=jt[vt];break}return it<xt?-1:xt<it?1:0};function q(B,y,b,U,G){if(B.length===0)return-1;if(typeof b=="string"?(U=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,Ht(b)&&(b=G?0:B.length-1),b<0&&(b=B.length+b),b>=B.length){if(G)return-1;b=B.length-1}else if(b<0)if(G)b=0;else return-1;if(typeof y=="string"&&(y=d.from(y,U)),d.isBuffer(y))return y.length===0?-1:F(B,y,b,U,G);if(typeof y=="number")return y=y&255,typeof i.prototype.indexOf=="function"?G?i.prototype.indexOf.call(B,y,b):i.prototype.lastIndexOf.call(B,y,b):F(B,[y],b,U,G);throw new TypeError("val must be string, number or Buffer")}function F(B,y,b,U,G){let Y=1,it=B.length,xt=y.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(B.length<2||y.length<2)return-1;Y=2,it/=2,xt/=2,b/=2}function kt(jt,vt){return Y===1?jt[vt]:jt.readUInt16BE(vt*Y)}let _t;if(G){let jt=-1;for(_t=b;_t<it;_t++)if(kt(B,_t)===kt(y,jt===-1?0:_t-jt)){if(jt===-1&&(jt=_t),_t-jt+1===xt)return jt*Y}else jt!==-1&&(_t-=_t-jt),jt=-1}else for(b+xt>it&&(b=it-xt),_t=b;_t>=0;_t--){let jt=!0;for(let vt=0;vt<xt;vt++)if(kt(B,_t+vt)!==kt(y,vt)){jt=!1;break}if(jt)return _t}return-1}d.prototype.includes=function(y,b,U){return this.indexOf(y,b,U)!==-1},d.prototype.indexOf=function(y,b,U){return q(this,y,b,U,!0)},d.prototype.lastIndexOf=function(y,b,U){return q(this,y,b,U,!1)};function W(B,y,b,U){b=Number(b)||0;const G=B.length-b;U?(U=Number(U),U>G&&(U=G)):U=G;const Y=y.length;U>Y/2&&(U=Y/2);let it;for(it=0;it<U;++it){const xt=parseInt(y.substr(it*2,2),16);if(Ht(xt))return it;B[b+it]=xt}return it}function L(B,y,b,U){return Vt(Zt(y,B.length-b),B,b,U)}function E(B,y,b,U){return Vt(ne(y),B,b,U)}function a(B,y,b,U){return Vt(Mt(y),B,b,U)}function h(B,y,b,U){return Vt(ae(y,B.length-b),B,b,U)}d.prototype.write=function(y,b,U,G){if(b===void 0)G="utf8",U=this.length,b=0;else if(U===void 0&&typeof b=="string")G=b,U=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(U)?(U=U>>>0,G===void 0&&(G="utf8")):(G=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Y=this.length-b;if((U===void 0||U>Y)&&(U=Y),y.length>0&&(U<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");let it=!1;for(;;)switch(G){case"hex":return W(this,y,b,U);case"utf8":case"utf-8":return L(this,y,b,U);case"ascii":case"latin1":case"binary":return E(this,y,b,U);case"base64":return a(this,y,b,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h(this,y,b,U);default:if(it)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),it=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(B,y,b){return y===0&&b===B.length?t.fromByteArray(B):t.fromByteArray(B.slice(y,b))}function M(B,y,b){b=Math.min(B.length,b);const U=[];let G=y;for(;G<b;){const Y=B[G];let it=null,xt=Y>239?4:Y>223?3:Y>191?2:1;if(G+xt<=b){let kt,_t,jt,vt;switch(xt){case 1:Y<128&&(it=Y);break;case 2:kt=B[G+1],(kt&192)===128&&(vt=(Y&31)<<6|kt&63,vt>127&&(it=vt));break;case 3:kt=B[G+1],_t=B[G+2],(kt&192)===128&&(_t&192)===128&&(vt=(Y&15)<<12|(kt&63)<<6|_t&63,vt>2047&&(vt<55296||vt>57343)&&(it=vt));break;case 4:kt=B[G+1],_t=B[G+2],jt=B[G+3],(kt&192)===128&&(_t&192)===128&&(jt&192)===128&&(vt=(Y&15)<<18|(kt&63)<<12|(_t&63)<<6|jt&63,vt>65535&&vt<1114112&&(it=vt))}}it===null?(it=65533,xt=1):it>65535&&(it-=65536,U.push(it>>>10&1023|55296),it=56320|it&1023),U.push(it),G+=xt}return I(U)}const C=4096;function I(B){const y=B.length;if(y<=C)return String.fromCharCode.apply(String,B);let b="",U=0;for(;U<y;)b+=String.fromCharCode.apply(String,B.slice(U,U+=C));return b}function w(B,y,b){let U="";b=Math.min(B.length,b);for(let G=y;G<b;++G)U+=String.fromCharCode(B[G]&127);return U}function p(B,y,b){let U="";b=Math.min(B.length,b);for(let G=y;G<b;++G)U+=String.fromCharCode(B[G]);return U}function c(B,y,b){const U=B.length;(!y||y<0)&&(y=0),(!b||b<0||b>U)&&(b=U);let G="";for(let Y=y;Y<b;++Y)G+=Jt[B[Y]];return G}function f(B,y,b){const U=B.slice(y,b);let G="";for(let Y=0;Y<U.length-1;Y+=2)G+=String.fromCharCode(U[Y]+U[Y+1]*256);return G}d.prototype.slice=function(y,b){const U=this.length;y=~~y,b=b===void 0?U:~~b,y<0?(y+=U,y<0&&(y=0)):y>U&&(y=U),b<0?(b+=U,b<0&&(b=0)):b>U&&(b=U),b<y&&(b=y);const G=this.subarray(y,b);return Object.setPrototypeOf(G,d.prototype),G};function S(B,y,b){if(B%1!==0||B<0)throw new RangeError("offset is not uint");if(B+y>b)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(y,b,U){y=y>>>0,b=b>>>0,U||S(y,b,this.length);let G=this[y],Y=1,it=0;for(;++it<b&&(Y*=256);)G+=this[y+it]*Y;return G},d.prototype.readUintBE=d.prototype.readUIntBE=function(y,b,U){y=y>>>0,b=b>>>0,U||S(y,b,this.length);let G=this[y+--b],Y=1;for(;b>0&&(Y*=256);)G+=this[y+--b]*Y;return G},d.prototype.readUint8=d.prototype.readUInt8=function(y,b){return y=y>>>0,b||S(y,1,this.length),this[y]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(y,b){return y=y>>>0,b||S(y,2,this.length),this[y]|this[y+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(y,b){return y=y>>>0,b||S(y,2,this.length),this[y]<<8|this[y+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(y,b){return y=y>>>0,b||S(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(y,b){return y=y>>>0,b||S(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},d.prototype.readBigUInt64LE=Ce(function(y){y=y>>>0,$e(y,"offset");const b=this[y],U=this[y+7];(b===void 0||U===void 0)&&Wt(y,this.length-8);const G=b+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,Y=this[++y]+this[++y]*2**8+this[++y]*2**16+U*2**24;return BigInt(G)+(BigInt(Y)<<BigInt(32))}),d.prototype.readBigUInt64BE=Ce(function(y){y=y>>>0,$e(y,"offset");const b=this[y],U=this[y+7];(b===void 0||U===void 0)&&Wt(y,this.length-8);const G=b*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],Y=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+U;return(BigInt(G)<<BigInt(32))+BigInt(Y)}),d.prototype.readIntLE=function(y,b,U){y=y>>>0,b=b>>>0,U||S(y,b,this.length);let G=this[y],Y=1,it=0;for(;++it<b&&(Y*=256);)G+=this[y+it]*Y;return Y*=128,G>=Y&&(G-=Math.pow(2,8*b)),G},d.prototype.readIntBE=function(y,b,U){y=y>>>0,b=b>>>0,U||S(y,b,this.length);let G=b,Y=1,it=this[y+--G];for(;G>0&&(Y*=256);)it+=this[y+--G]*Y;return Y*=128,it>=Y&&(it-=Math.pow(2,8*b)),it},d.prototype.readInt8=function(y,b){return y=y>>>0,b||S(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},d.prototype.readInt16LE=function(y,b){y=y>>>0,b||S(y,2,this.length);const U=this[y]|this[y+1]<<8;return U&32768?U|4294901760:U},d.prototype.readInt16BE=function(y,b){y=y>>>0,b||S(y,2,this.length);const U=this[y+1]|this[y]<<8;return U&32768?U|4294901760:U},d.prototype.readInt32LE=function(y,b){return y=y>>>0,b||S(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},d.prototype.readInt32BE=function(y,b){return y=y>>>0,b||S(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},d.prototype.readBigInt64LE=Ce(function(y){y=y>>>0,$e(y,"offset");const b=this[y],U=this[y+7];(b===void 0||U===void 0)&&Wt(y,this.length-8);const G=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(U<<24);return(BigInt(G)<<BigInt(32))+BigInt(b+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),d.prototype.readBigInt64BE=Ce(function(y){y=y>>>0,$e(y,"offset");const b=this[y],U=this[y+7];(b===void 0||U===void 0)&&Wt(y,this.length-8);const G=(b<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(G)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+U)}),d.prototype.readFloatLE=function(y,b){return y=y>>>0,b||S(y,4,this.length),e.read(this,y,!0,23,4)},d.prototype.readFloatBE=function(y,b){return y=y>>>0,b||S(y,4,this.length),e.read(this,y,!1,23,4)},d.prototype.readDoubleLE=function(y,b){return y=y>>>0,b||S(y,8,this.length),e.read(this,y,!0,52,8)},d.prototype.readDoubleBE=function(y,b){return y=y>>>0,b||S(y,8,this.length),e.read(this,y,!1,52,8)};function P(B,y,b,U,G,Y){if(!d.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>G||y<Y)throw new RangeError('"value" argument is out of bounds');if(b+U>B.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(y,b,U,G){if(y=+y,b=b>>>0,U=U>>>0,!G){const xt=Math.pow(2,8*U)-1;P(this,y,b,U,xt,0)}let Y=1,it=0;for(this[b]=y&255;++it<U&&(Y*=256);)this[b+it]=y/Y&255;return b+U},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(y,b,U,G){if(y=+y,b=b>>>0,U=U>>>0,!G){const xt=Math.pow(2,8*U)-1;P(this,y,b,U,xt,0)}let Y=U-1,it=1;for(this[b+Y]=y&255;--Y>=0&&(it*=256);)this[b+Y]=y/it&255;return b+U},d.prototype.writeUint8=d.prototype.writeUInt8=function(y,b,U){return y=+y,b=b>>>0,U||P(this,y,b,1,255,0),this[b]=y&255,b+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(y,b,U){return y=+y,b=b>>>0,U||P(this,y,b,2,65535,0),this[b]=y&255,this[b+1]=y>>>8,b+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(y,b,U){return y=+y,b=b>>>0,U||P(this,y,b,2,65535,0),this[b]=y>>>8,this[b+1]=y&255,b+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(y,b,U){return y=+y,b=b>>>0,U||P(this,y,b,4,4294967295,0),this[b+3]=y>>>24,this[b+2]=y>>>16,this[b+1]=y>>>8,this[b]=y&255,b+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(y,b,U){return y=+y,b=b>>>0,U||P(this,y,b,4,4294967295,0),this[b]=y>>>24,this[b+1]=y>>>16,this[b+2]=y>>>8,this[b+3]=y&255,b+4};function H(B,y,b,U,G){Gt(y,U,G,B,b,7);let Y=Number(y&BigInt(4294967295));B[b++]=Y,Y=Y>>8,B[b++]=Y,Y=Y>>8,B[b++]=Y,Y=Y>>8,B[b++]=Y;let it=Number(y>>BigInt(32)&BigInt(4294967295));return B[b++]=it,it=it>>8,B[b++]=it,it=it>>8,B[b++]=it,it=it>>8,B[b++]=it,b}function nt(B,y,b,U,G){Gt(y,U,G,B,b,7);let Y=Number(y&BigInt(4294967295));B[b+7]=Y,Y=Y>>8,B[b+6]=Y,Y=Y>>8,B[b+5]=Y,Y=Y>>8,B[b+4]=Y;let it=Number(y>>BigInt(32)&BigInt(4294967295));return B[b+3]=it,it=it>>8,B[b+2]=it,it=it>>8,B[b+1]=it,it=it>>8,B[b]=it,b+8}d.prototype.writeBigUInt64LE=Ce(function(y,b=0){return H(this,y,b,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Ce(function(y,b=0){return nt(this,y,b,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(y,b,U,G){if(y=+y,b=b>>>0,!G){const kt=Math.pow(2,8*U-1);P(this,y,b,U,kt-1,-kt)}let Y=0,it=1,xt=0;for(this[b]=y&255;++Y<U&&(it*=256);)y<0&&xt===0&&this[b+Y-1]!==0&&(xt=1),this[b+Y]=(y/it>>0)-xt&255;return b+U},d.prototype.writeIntBE=function(y,b,U,G){if(y=+y,b=b>>>0,!G){const kt=Math.pow(2,8*U-1);P(this,y,b,U,kt-1,-kt)}let Y=U-1,it=1,xt=0;for(this[b+Y]=y&255;--Y>=0&&(it*=256);)y<0&&xt===0&&this[b+Y+1]!==0&&(xt=1),this[b+Y]=(y/it>>0)-xt&255;return b+U},d.prototype.writeInt8=function(y,b,U){return y=+y,b=b>>>0,U||P(this,y,b,1,127,-128),y<0&&(y=255+y+1),this[b]=y&255,b+1},d.prototype.writeInt16LE=function(y,b,U){return y=+y,b=b>>>0,U||P(this,y,b,2,32767,-32768),this[b]=y&255,this[b+1]=y>>>8,b+2},d.prototype.writeInt16BE=function(y,b,U){return y=+y,b=b>>>0,U||P(this,y,b,2,32767,-32768),this[b]=y>>>8,this[b+1]=y&255,b+2},d.prototype.writeInt32LE=function(y,b,U){return y=+y,b=b>>>0,U||P(this,y,b,4,2147483647,-2147483648),this[b]=y&255,this[b+1]=y>>>8,this[b+2]=y>>>16,this[b+3]=y>>>24,b+4},d.prototype.writeInt32BE=function(y,b,U){return y=+y,b=b>>>0,U||P(this,y,b,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[b]=y>>>24,this[b+1]=y>>>16,this[b+2]=y>>>8,this[b+3]=y&255,b+4},d.prototype.writeBigInt64LE=Ce(function(y,b=0){return H(this,y,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Ce(function(y,b=0){return nt(this,y,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function lt(B,y,b,U,G,Y){if(b+U>B.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function pt(B,y,b,U,G){return y=+y,b=b>>>0,G||lt(B,y,b,4),e.write(B,y,b,U,23,4),b+4}d.prototype.writeFloatLE=function(y,b,U){return pt(this,y,b,!0,U)},d.prototype.writeFloatBE=function(y,b,U){return pt(this,y,b,!1,U)};function Ut(B,y,b,U,G){return y=+y,b=b>>>0,G||lt(B,y,b,8),e.write(B,y,b,U,52,8),b+8}d.prototype.writeDoubleLE=function(y,b,U){return Ut(this,y,b,!0,U)},d.prototype.writeDoubleBE=function(y,b,U){return Ut(this,y,b,!1,U)},d.prototype.copy=function(y,b,U,G){if(!d.isBuffer(y))throw new TypeError("argument should be a Buffer");if(U||(U=0),!G&&G!==0&&(G=this.length),b>=y.length&&(b=y.length),b||(b=0),G>0&&G<U&&(G=U),G===U||y.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),y.length-b<G-U&&(G=y.length-b+U);const Y=G-U;return this===y&&typeof i.prototype.copyWithin=="function"?this.copyWithin(b,U,G):i.prototype.set.call(y,this.subarray(U,G),b),Y},d.prototype.fill=function(y,b,U,G){if(typeof y=="string"){if(typeof b=="string"?(G=b,b=0,U=this.length):typeof U=="string"&&(G=U,U=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!d.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(y.length===1){const it=y.charCodeAt(0);(G==="utf8"&&it<128||G==="latin1")&&(y=it)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(b<0||this.length<b||this.length<U)throw new RangeError("Out of range index");if(U<=b)return this;b=b>>>0,U=U===void 0?this.length:U>>>0,y||(y=0);let Y;if(typeof y=="number")for(Y=b;Y<U;++Y)this[Y]=y;else{const it=d.isBuffer(y)?y:d.from(y,G),xt=it.length;if(xt===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(Y=0;Y<U-b;++Y)this[Y+b]=it[Y%xt]}return this};const Pt={};function Kt(B,y,b){Pt[B]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${B}]`,this.stack,delete this.name}get code(){return B}set code(G){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:G,writable:!0})}toString(){return`${this.name} [${B}]: ${this.message}`}}}Kt("ERR_BUFFER_OUT_OF_BOUNDS",function(B){return B?`${B} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Kt("ERR_INVALID_ARG_TYPE",function(B,y){return`The "${B}" argument must be of type number. Received type ${typeof y}`},TypeError),Kt("ERR_OUT_OF_RANGE",function(B,y,b){let U=`The value of "${B}" is out of range.`,G=b;return Number.isInteger(b)&&Math.abs(b)>2**32?G=tr(String(b)):typeof b=="bigint"&&(G=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(G=tr(G)),G+="n"),U+=` It must be ${y}. Received ${G}`,U},RangeError);function tr(B){let y="",b=B.length;const U=B[0]==="-"?1:0;for(;b>=U+4;b-=3)y=`_${B.slice(b-3,b)}${y}`;return`${B.slice(0,b)}${y}`}function ee(B,y,b){$e(y,"offset"),(B[y]===void 0||B[y+b]===void 0)&&Wt(y,B.length-(b+1))}function Gt(B,y,b,U,G,Y){if(B>b||B<y){const it=typeof y=="bigint"?"n":"";let xt;throw y===0||y===BigInt(0)?xt=`>= 0${it} and < 2${it} ** ${(Y+1)*8}${it}`:xt=`>= -(2${it} ** ${(Y+1)*8-1}${it}) and < 2 ** ${(Y+1)*8-1}${it}`,new Pt.ERR_OUT_OF_RANGE("value",xt,B)}ee(U,G,Y)}function $e(B,y){if(typeof B!="number")throw new Pt.ERR_INVALID_ARG_TYPE(y,"number",B)}function Wt(B,y,b){throw Math.floor(B)!==B?($e(B,b),new Pt.ERR_OUT_OF_RANGE("offset","an integer",B)):y<0?new Pt.ERR_BUFFER_OUT_OF_BOUNDS:new Pt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,B)}const re=/[^+/0-9A-Za-z-_]/g;function sn(B){if(B=B.split("=")[0],B=B.trim().replace(re,""),B.length<2)return"";for(;B.length%4!==0;)B=B+"=";return B}function Zt(B,y){y=y||1/0;let b;const U=B.length;let G=null;const Y=[];for(let it=0;it<U;++it){if(b=B.charCodeAt(it),b>55295&&b<57344){if(!G){if(b>56319){(y-=3)>-1&&Y.push(239,191,189);continue}else if(it+1===U){(y-=3)>-1&&Y.push(239,191,189);continue}G=b;continue}if(b<56320){(y-=3)>-1&&Y.push(239,191,189),G=b;continue}b=(G-55296<<10|b-56320)+65536}else G&&(y-=3)>-1&&Y.push(239,191,189);if(G=null,b<128){if((y-=1)<0)break;Y.push(b)}else if(b<2048){if((y-=2)<0)break;Y.push(b>>6|192,b&63|128)}else if(b<65536){if((y-=3)<0)break;Y.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((y-=4)<0)break;Y.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return Y}function ne(B){const y=[];for(let b=0;b<B.length;++b)y.push(B.charCodeAt(b)&255);return y}function ae(B,y){let b,U,G;const Y=[];for(let it=0;it<B.length&&!((y-=2)<0);++it)b=B.charCodeAt(it),U=b>>8,G=b%256,Y.push(G),Y.push(U);return Y}function Mt(B){return t.toByteArray(sn(B))}function Vt(B,y,b,U){let G;for(G=0;G<U&&!(G+b>=y.length||G>=B.length);++G)y[G+b]=B[G];return G}function xe(B,y){return B instanceof y||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===y.name}function Ht(B){return B!==B}const Jt=(function(){const B="0123456789abcdef",y=new Array(256);for(let b=0;b<16;++b){const U=b*16;for(let G=0;G<16;++G)y[U+G]=B[b]+B[G]}return y})();function Ce(B){return typeof BigInt>"u"?qt:B}function qt(){throw new Error("BigInt not supported")}})($o);const At=$o.Buffer,yt=$o.Buffer,an=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jn(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Kn(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function _r(n,...t){if(!Jn(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function Su(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Kn(n.outputLen),Kn(n.blockLen)}function En(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Au(n,t){_r(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function Vh(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Pr(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function Us(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function er(n,t){return n<<32-t|n>>>t}const Hh=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function jh(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function Gh(n){for(let t=0;t<n.length;t++)n[t]=jh(n[t]);return n}const Pa=Hh?n=>n:Gh,Iu=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Zh=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function jr(n){if(_r(n),Iu)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=Zh[n[e]];return t}const fr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ca(n){if(n>=fr._0&&n<=fr._9)return n-fr._0;if(n>=fr.A&&n<=fr.F)return n-(fr.A-10);if(n>=fr.a&&n<=fr.f)return n-(fr.a-10)}function Ti(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(Iu)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=Ca(n.charCodeAt(i)),u=Ca(n.charCodeAt(i+1));if(o===void 0||u===void 0){const l=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}r[s]=o*16+u}return r}function Yh(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Zi(n){return typeof n=="string"&&(n=Yh(n)),_r(n),n}function sr(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];_r(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class Vo{}function Ho(n){const t=r=>n().update(Zi(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function jo(n=32){if(an&&typeof an.getRandomValues=="function")return an.getRandomValues(new Uint8Array(n));if(an&&typeof an.randomBytes=="function")return Uint8Array.from(an.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function Xh(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),u=Number(e&i),l=r?4:0,g=r?0:4;n.setUint32(t+l,o,r),n.setUint32(t+g,u,r)}function Jh(n,t,e){return n&t^~n&e}function Qh(n,t,e){return n&t^n&e^t&e}class xu extends Vo{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Us(this.buffer)}update(t){En(this),t=Zi(t),_r(t);const{view:e,buffer:r,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const u=Math.min(s-this.pos,i-o);if(u===s){const l=Us(t);for(;s<=i-o;o+=s)this.process(l,o);continue}r.set(t.subarray(o,o+u),this.pos),this.pos+=u,o+=u,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){En(this),Au(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,Pr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let x=o;x<s;x++)e[x]=0;Xh(r,s-8,BigInt(this.length*8),i),this.process(r,0);const u=Us(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=l/4,d=this.get();if(g>d.length)throw new Error("_sha2: outputLen bigger than state");for(let x=0;x<g;x++)u.setUint32(4*x,d[x],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:u}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=u,s%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Ar=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Be=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ui=BigInt(2**32-1),Oa=BigInt(32);function tf(n,t=!1){return t?{h:Number(n&ui),l:Number(n>>Oa&ui)}:{h:Number(n>>Oa&ui)|0,l:Number(n&ui)|0}}function Bu(n,t=!1){const e=n.length;let r=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:u}=tf(n[i],t);[r[i],s[i]]=[o,u]}return[r,s]}const Ua=(n,t,e)=>n>>>e,Na=(n,t,e)=>n<<32-e|t>>>e,cn=(n,t,e)=>n>>>e|t<<32-e,un=(n,t,e)=>n<<32-e|t>>>e,li=(n,t,e)=>n<<64-e|t>>>e-32,hi=(n,t,e)=>n>>>e-32|t<<64-e,ef=(n,t,e)=>n<<e|t>>>32-e,rf=(n,t,e)=>t<<e|n>>>32-e,nf=(n,t,e)=>t<<e-32|n>>>64-e,sf=(n,t,e)=>n<<e-32|t>>>64-e;function dr(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const of=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),af=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,cf=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),uf=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,lf=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),hf=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,ff=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ir=new Uint32Array(64);class df extends xu{constructor(t=32){super(64,t,8,!1),this.A=Ar[0]|0,this.B=Ar[1]|0,this.C=Ar[2]|0,this.D=Ar[3]|0,this.E=Ar[4]|0,this.F=Ar[5]|0,this.G=Ar[6]|0,this.H=Ar[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:u,H:l}=this;return[t,e,r,s,i,o,u,l]}set(t,e,r,s,i,o,u,l){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=u|0,this.H=l|0}process(t,e){for(let x=0;x<16;x++,e+=4)Ir[x]=t.getUint32(e,!1);for(let x=16;x<64;x++){const A=Ir[x-15],k=Ir[x-2],R=er(A,7)^er(A,18)^A>>>3,D=er(k,17)^er(k,19)^k>>>10;Ir[x]=D+Ir[x-7]+R+Ir[x-16]|0}let{A:r,B:s,C:i,D:o,E:u,F:l,G:g,H:d}=this;for(let x=0;x<64;x++){const A=er(u,6)^er(u,11)^er(u,25),k=d+A+Jh(u,l,g)+ff[x]+Ir[x]|0,D=(er(r,2)^er(r,13)^er(r,22))+Qh(r,s,i)|0;d=g,g=l,l=u,u=o+k|0,o=i,i=s,s=r,r=k+D|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,u=u+this.E|0,l=l+this.F|0,g=g+this.G|0,d=d+this.H|0,this.set(r,s,i,o,u,l,g,d)}roundClean(){Pr(Ir)}destroy(){this.set(0,0,0,0,0,0,0,0),Pr(this.buffer)}}const Ru=Bu(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),pf=Ru[0],gf=Ru[1],xr=new Uint32Array(80),Br=new Uint32Array(80);class yf extends xu{constructor(t=64){super(128,t,16,!1),this.Ah=Be[0]|0,this.Al=Be[1]|0,this.Bh=Be[2]|0,this.Bl=Be[3]|0,this.Ch=Be[4]|0,this.Cl=Be[5]|0,this.Dh=Be[6]|0,this.Dl=Be[7]|0,this.Eh=Be[8]|0,this.El=Be[9]|0,this.Fh=Be[10]|0,this.Fl=Be[11]|0,this.Gh=Be[12]|0,this.Gl=Be[13]|0,this.Hh=Be[14]|0,this.Hl=Be[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:u,Dl:l,Eh:g,El:d,Fh:x,Fl:A,Gh:k,Gl:R,Hh:D,Hl:O}=this;return[t,e,r,s,i,o,u,l,g,d,x,A,k,R,D,O]}set(t,e,r,s,i,o,u,l,g,d,x,A,k,R,D,O){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=u|0,this.Dl=l|0,this.Eh=g|0,this.El=d|0,this.Fh=x|0,this.Fl=A|0,this.Gh=k|0,this.Gl=R|0,this.Hh=D|0,this.Hl=O|0}process(t,e){for(let z=0;z<16;z++,e+=4)xr[z]=t.getUint32(e),Br[z]=t.getUint32(e+=4);for(let z=16;z<80;z++){const j=xr[z-15]|0,et=Br[z-15]|0,ot=cn(j,et,1)^cn(j,et,8)^Ua(j,et,7),Q=un(j,et,1)^un(j,et,8)^Na(j,et,7),rt=xr[z-2]|0,q=Br[z-2]|0,F=cn(rt,q,19)^li(rt,q,61)^Ua(rt,q,6),W=un(rt,q,19)^hi(rt,q,61)^Na(rt,q,6),L=cf(Q,W,Br[z-7],Br[z-16]),E=uf(L,ot,F,xr[z-7],xr[z-16]);xr[z]=E|0,Br[z]=L|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:u,Cl:l,Dh:g,Dl:d,Eh:x,El:A,Fh:k,Fl:R,Gh:D,Gl:O,Hh:$,Hl:V}=this;for(let z=0;z<80;z++){const j=cn(x,A,14)^cn(x,A,18)^li(x,A,41),et=un(x,A,14)^un(x,A,18)^hi(x,A,41),ot=x&k^~x&D,Q=A&R^~A&O,rt=lf(V,et,Q,gf[z],Br[z]),q=hf(rt,$,j,ot,pf[z],xr[z]),F=rt|0,W=cn(r,s,28)^li(r,s,34)^li(r,s,39),L=un(r,s,28)^hi(r,s,34)^hi(r,s,39),E=r&i^r&u^i&u,a=s&o^s&l^o&l;$=D|0,V=O|0,D=k|0,O=R|0,k=x|0,R=A|0,{h:x,l:A}=dr(g|0,d|0,q|0,F|0),g=u|0,d=l|0,u=i|0,l=o|0,i=r|0,o=s|0;const h=of(F,L,a);r=af(h,q,W,E),s=h|0}({h:r,l:s}=dr(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=dr(this.Bh|0,this.Bl|0,i|0,o|0),{h:u,l}=dr(this.Ch|0,this.Cl|0,u|0,l|0),{h:g,l:d}=dr(this.Dh|0,this.Dl|0,g|0,d|0),{h:x,l:A}=dr(this.Eh|0,this.El|0,x|0,A|0),{h:k,l:R}=dr(this.Fh|0,this.Fl|0,k|0,R|0),{h:D,l:O}=dr(this.Gh|0,this.Gl|0,D|0,O|0),{h:$,l:V}=dr(this.Hh|0,this.Hl|0,$|0,V|0),this.set(r,s,i,o,u,l,g,d,x,A,k,R,D,O,$,V)}roundClean(){Pr(xr,Br)}destroy(){Pr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Tu=Ho(()=>new df),mf=Ho(()=>new yf);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Go=BigInt(0),Eo=BigInt(1);function Gr(n,t=""){if(typeof n!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof n)}return n}function Ye(n,t,e=""){const r=Jn(n),s=n?.length,i=t!==void 0;if(!r||i&&s!==t){const o=e&&`"${e}" `,u=i?` of length ${t}`:"",l=r?`length=${s}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+u+", got "+l)}return n}function fi(n){const t=n.toString(16);return t.length&1?"0"+t:t}function Lu(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Go:BigInt("0x"+n)}function Yi(n){return Lu(jr(n))}function qn(n){return _r(n),Lu(jr(Uint8Array.from(n).reverse()))}function Zo(n,t){return Ti(n.toString(16).padStart(t*2,"0"))}function Mu(n,t){return Zo(n,t).reverse()}function de(n,t,e){let r;if(typeof t=="string")try{r=Ti(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(Jn(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}function Da(n){return Uint8Array.from(n)}const Ns=n=>typeof n=="bigint"&&Go<=n;function wf(n,t,e){return Ns(n)&&Ns(t)&&Ns(e)&&t<=n&&n<e}function ko(n,t,e,r){if(!wf(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Pu(n){let t;for(t=0;n>Go;n>>=Eo,t+=1);return t}const Qn=n=>(Eo<<BigInt(n))-Eo;function bf(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const r=k=>new Uint8Array(k),s=k=>Uint8Array.of(k);let i=r(n),o=r(n),u=0;const l=()=>{i.fill(1),o.fill(0),u=0},g=(...k)=>e(o,i,...k),d=(k=r(0))=>{o=g(s(0),k),i=g(),k.length!==0&&(o=g(s(1),k),i=g())},x=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let k=0;const R=[];for(;k<t;){i=g();const D=i.slice();R.push(D),k+=i.length}return sr(...R)};return(k,R)=>{l(),d(k);let D;for(;!(D=R(x()));)d();return l(),D}}function ti(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,o){const u=n[s];if(o&&u===void 0)return;const l=typeof u;if(l!==i||u===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${l}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(e).forEach(([s,i])=>r(s,i,!0))}function Li(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const De=BigInt(0),Ie=BigInt(1),Fr=BigInt(2),Cu=BigInt(3),Ou=BigInt(4),Uu=BigInt(5),vf=BigInt(7),Nu=BigInt(8),Ef=BigInt(9),Du=BigInt(16);function ve(n,t){const e=n%t;return e>=De?e:t+e}function fe(n,t,e){let r=n;for(;t-- >De;)r*=r,r%=e;return r}function za(n,t){if(n===De)throw new Error("invert: expected non-zero number");if(t<=De)throw new Error("invert: expected positive modulus, got "+t);let e=ve(n,t),r=t,s=De,i=Ie;for(;e!==De;){const u=r/e,l=r%e,g=s-i*u;r=e,e=l,s=i,i=g}if(r!==Ie)throw new Error("invert: does not exist");return ve(s,t)}function Yo(n,t,e){if(!n.eql(n.sqr(t),e))throw new Error("Cannot find square root")}function zu(n,t){const e=(n.ORDER+Ie)/Ou,r=n.pow(t,e);return Yo(n,r,t),r}function kf(n,t){const e=(n.ORDER-Uu)/Nu,r=n.mul(t,Fr),s=n.pow(r,e),i=n.mul(t,s),o=n.mul(n.mul(i,Fr),s),u=n.mul(i,n.sub(o,n.ONE));return Yo(n,u,t),u}function _f(n){const t=Qr(n),e=Fu(n),r=e(t,t.neg(t.ONE)),s=e(t,r),i=e(t,t.neg(r)),o=(n+vf)/Du;return(u,l)=>{let g=u.pow(l,o),d=u.mul(g,r);const x=u.mul(g,s),A=u.mul(g,i),k=u.eql(u.sqr(d),l),R=u.eql(u.sqr(x),l);g=u.cmov(g,d,k),d=u.cmov(A,x,R);const D=u.eql(u.sqr(d),l),O=u.cmov(g,d,D);return Yo(u,O,l),O}}function Fu(n){if(n<Cu)throw new Error("sqrt is not defined for small field");let t=n-Ie,e=0;for(;t%Fr===De;)t/=Fr,e++;let r=Fr;const s=Qr(n);for(;Fa(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return zu;let i=s.pow(r,t);const o=(t+Ie)/Fr;return function(l,g){if(l.is0(g))return g;if(Fa(l,g)!==1)throw new Error("Cannot find square root");let d=e,x=l.mul(l.ONE,i),A=l.pow(g,t),k=l.pow(g,o);for(;!l.eql(A,l.ONE);){if(l.is0(A))return l.ZERO;let R=1,D=l.sqr(A);for(;!l.eql(D,l.ONE);)if(R++,D=l.sqr(D),R===d)throw new Error("Cannot find square root");const O=Ie<<BigInt(d-R-1),$=l.pow(x,O);d=R,x=l.sqr($),A=l.mul(A,x),k=l.mul(k,$)}return k}}function Sf(n){return n%Ou===Cu?zu:n%Nu===Uu?kf:n%Du===Ef?_f(n):Fu(n)}const Af=(n,t)=>(ve(n,t)&Ie)===Ie,If=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function xf(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=If.reduce((r,s)=>(r[s]="function",r),t);return ti(n,e),n}function Bf(n,t,e){if(e<De)throw new Error("invalid exponent, negatives unsupported");if(e===De)return n.ONE;if(e===Ie)return t;let r=n.ONE,s=t;for(;e>De;)e&Ie&&(r=n.mul(r,s)),s=n.sqr(s),e>>=Ie;return r}function Ku(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),s=t.reduce((o,u,l)=>n.is0(u)?o:(r[l]=o,n.mul(o,u)),n.ONE),i=n.inv(s);return t.reduceRight((o,u,l)=>n.is0(u)?o:(r[l]=n.mul(o,r[l]),n.mul(o,u)),i),r}function Fa(n,t){const e=(n.ORDER-Ie)/Fr,r=n.pow(t,e),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function qu(n,t){t!==void 0&&Kn(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Qr(n,t,e=!1,r={}){if(n<=De)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i,o=!1,u;if(typeof t=="object"&&t!=null){if(r.sqrt||e)throw new Error("cannot specify opts in two arguments");const A=t;A.BITS&&(s=A.BITS),A.sqrt&&(i=A.sqrt),typeof A.isLE=="boolean"&&(e=A.isLE),typeof A.modFromBytes=="boolean"&&(o=A.modFromBytes),u=A.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:l,nByteLength:g}=qu(n,s);if(g>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const x=Object.freeze({ORDER:n,isLE:e,BITS:l,BYTES:g,MASK:Qn(l),ZERO:De,ONE:Ie,allowedLengths:u,create:A=>ve(A,n),isValid:A=>{if(typeof A!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof A);return De<=A&&A<n},is0:A=>A===De,isValidNot0:A=>!x.is0(A)&&x.isValid(A),isOdd:A=>(A&Ie)===Ie,neg:A=>ve(-A,n),eql:(A,k)=>A===k,sqr:A=>ve(A*A,n),add:(A,k)=>ve(A+k,n),sub:(A,k)=>ve(A-k,n),mul:(A,k)=>ve(A*k,n),pow:(A,k)=>Bf(x,A,k),div:(A,k)=>ve(A*za(k,n),n),sqrN:A=>A*A,addN:(A,k)=>A+k,subN:(A,k)=>A-k,mulN:(A,k)=>A*k,inv:A=>za(A,n),sqrt:i||(A=>(d||(d=Sf(n)),d(x,A))),toBytes:A=>e?Mu(A,g):Zo(A,g),fromBytes:(A,k=!0)=>{if(u){if(!u.includes(A.length)||A.length>g)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+A.length);const D=new Uint8Array(g);D.set(A,e?0:D.length-A.length),A=D}if(A.length!==g)throw new Error("Field.fromBytes: expected "+g+" bytes, got "+A.length);let R=e?qn(A):Yi(A);if(o&&(R=ve(R,n)),!k&&!x.isValid(R))throw new Error("invalid field element: outside of range 0..ORDER");return R},invertBatch:A=>Ku(x,A),cmov:(A,k,R)=>R?k:A});return Object.freeze(x)}function $u(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Wu(n){const t=$u(n);return t+Math.ceil(t/2)}function Rf(n,t,e=!1){const r=n.length,s=$u(t),i=Wu(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=e?qn(n):Yi(n),u=ve(o,t-Ie)+Ie;return e?Mu(u,s):Zo(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kn=BigInt(0),Kr=BigInt(1);function Mi(n,t){const e=t.negate();return n?e:t}function qr(n,t){const e=Ku(n.Fp,t.map(r=>r.Z));return t.map((r,s)=>n.fromAffine(r.toAffine(e[s])))}function Vu(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function Ds(n,t){Vu(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=Qn(n),o=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Ka(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=e;let u=Number(n&s),l=n>>o;u>r&&(u-=i,l+=Kr);const g=t*r,d=g+Math.abs(u)-1,x=u===0,A=u<0,k=t%2!==0;return{nextN:l,offset:d,isZero:x,isNeg:A,isNegF:k,offsetF:g}}function Tf(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Lf(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const zs=new WeakMap,Hu=new WeakMap;function Fs(n){return Hu.get(n)||1}function qa(n){if(n!==kn)throw new Error("invalid wNAF")}class ju{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,r=this.ZERO){let s=t;for(;e>kn;)e&Kr&&(r=r.add(s)),s=s.double(),e>>=Kr;return r}precomputeWindow(t,e){const{windows:r,windowSize:s}=Ds(e,this.bits),i=[];let o=t,u=o;for(let l=0;l<r;l++){u=o,i.push(u);for(let g=1;g<s;g++)u=u.add(o),i.push(u);o=u.double()}return i}wNAF(t,e,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Ds(t,this.bits);for(let u=0;u<o.windows;u++){const{nextN:l,offset:g,isZero:d,isNeg:x,isNegF:A,offsetF:k}=Ka(r,u,o);r=l,d?i=i.add(Mi(A,e[k])):s=s.add(Mi(x,e[g]))}return qa(r),{p:s,f:i}}wNAFUnsafe(t,e,r,s=this.ZERO){const i=Ds(t,this.bits);for(let o=0;o<i.windows&&r!==kn;o++){const{nextN:u,offset:l,isZero:g,isNeg:d}=Ka(r,o,i);if(r=u,!g){const x=e[l];s=s.add(d?x.negate():x)}}return qa(r),s}getPrecomputes(t,e,r){let s=zs.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof r=="function"&&(s=r(s)),zs.set(e,s))),s}cached(t,e,r){const s=Fs(t);return this.wNAF(s,this.getPrecomputes(s,t,r),e)}unsafe(t,e,r,s){const i=Fs(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,s)}createCache(t,e){Vu(e,this.bits),Hu.set(t,e),zs.delete(t)}hasCache(t){return Fs(t)!==1}}function Mf(n,t,e,r){let s=t,i=n.ZERO,o=n.ZERO;for(;e>kn||r>kn;)e&Kr&&(i=i.add(s)),r&Kr&&(o=o.add(s)),s=s.double(),e>>=Kr,r>>=Kr;return{p1:i,p2:o}}function Gu(n,t,e,r){Tf(e,n),Lf(r,t);const s=e.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,u=Pu(BigInt(s));let l=1;u>12?l=u-3:u>4?l=u-2:u>0&&(l=2);const g=Qn(l),d=new Array(Number(g)+1).fill(o),x=Math.floor((t.BITS-1)/l)*l;let A=o;for(let k=x;k>=0;k-=l){d.fill(o);for(let D=0;D<i;D++){const O=r[D],$=Number(O>>BigInt(k)&g);d[$]=d[$].add(e[D])}let R=o;for(let D=d.length-1,O=o;D>0;D--)O=O.add(d[D]),R=R.add(O);if(A=A.add(R),k!==0)for(let D=0;D<l;D++)A=A.double()}return A}function $a(n,t,e){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return xf(t),t}else return Qr(n,{isLE:e})}function Zu(n,t,e={},r){if(r===void 0&&(r=n==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const l of["p","n","h"]){const g=t[l];if(!(typeof g=="bigint"&&g>kn))throw new Error(`CURVE.${l} must be positive bigint`)}const s=$a(t.p,e.Fp,r),i=$a(t.n,e.Fn,r),u=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const l of u)if(!s.isValid(t[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rr=BigInt(0),ke=BigInt(1),Ks=BigInt(2),Pf=BigInt(8);function Cf(n,t,e,r){const s=n.sqr(e),i=n.sqr(r),o=n.add(n.mul(t.a,s),i),u=n.add(n.ONE,n.mul(t.d,n.mul(s,i)));return n.eql(o,u)}function Of(n,t={}){const e=Zu("edwards",n,t,t.FpFnLE),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:o}=i;ti(t,{},{uvRatio:"function"});const u=Ks<<BigInt(s.BYTES*8)-ke,l=O=>r.create(O),g=t.uvRatio||((O,$)=>{try{return{isValid:!0,value:r.sqrt(r.div(O,$))}}catch{return{isValid:!1,value:Rr}}});if(!Cf(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function d(O,$,V=!1){const z=V?ke:Rr;return ko("coordinate "+O,$,z,u),$}function x(O){if(!(O instanceof R))throw new Error("ExtendedPoint expected")}const A=Li((O,$)=>{const{X:V,Y:z,Z:j}=O,et=O.is0();$==null&&($=et?Pf:r.inv(j));const ot=l(V*$),Q=l(z*$),rt=r.mul(j,$);if(et)return{x:Rr,y:ke};if(rt!==ke)throw new Error("invZ was invalid");return{x:ot,y:Q}}),k=Li(O=>{const{a:$,d:V}=i;if(O.is0())throw new Error("bad point: ZERO");const{X:z,Y:j,Z:et,T:ot}=O,Q=l(z*z),rt=l(j*j),q=l(et*et),F=l(q*q),W=l(Q*$),L=l(q*l(W+rt)),E=l(F+l(V*l(Q*rt)));if(L!==E)throw new Error("bad point: equation left != right (1)");const a=l(z*j),h=l(et*ot);if(a!==h)throw new Error("bad point: equation left != right (2)");return!0});class R{constructor($,V,z,j){this.X=d("x",$),this.Y=d("y",V),this.Z=d("z",z,!0),this.T=d("t",j),Object.freeze(this)}static CURVE(){return i}static fromAffine($){if($ instanceof R)throw new Error("extended point not allowed");const{x:V,y:z}=$||{};return d("x",V),d("y",z),new R(V,z,ke,l(V*z))}static fromBytes($,V=!1){const z=r.BYTES,{a:j,d:et}=i;$=Da(Ye($,z,"point")),Gr(V,"zip215");const ot=Da($),Q=$[z-1];ot[z-1]=Q&-129;const rt=qn(ot),q=V?u:r.ORDER;ko("point.y",rt,Rr,q);const F=l(rt*rt),W=l(F-ke),L=l(et*F-j);let{isValid:E,value:a}=g(W,L);if(!E)throw new Error("bad point: invalid y coordinate");const h=(a&ke)===ke,_=(Q&128)!==0;if(!V&&a===Rr&&_)throw new Error("bad point: x=0 and x_0=1");return _!==h&&(a=l(-a)),R.fromAffine({x:a,y:rt})}static fromHex($,V=!1){return R.fromBytes(de("point",$),V)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute($=8,V=!0){return D.createCache(this,$),V||this.multiply(Ks),this}assertValidity(){k(this)}equals($){x($);const{X:V,Y:z,Z:j}=this,{X:et,Y:ot,Z:Q}=$,rt=l(V*Q),q=l(et*j),F=l(z*Q),W=l(ot*j);return rt===q&&F===W}is0(){return this.equals(R.ZERO)}negate(){return new R(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:$}=i,{X:V,Y:z,Z:j}=this,et=l(V*V),ot=l(z*z),Q=l(Ks*l(j*j)),rt=l($*et),q=V+z,F=l(l(q*q)-et-ot),W=rt+ot,L=W-Q,E=rt-ot,a=l(F*L),h=l(W*E),_=l(F*E),M=l(L*W);return new R(a,h,M,_)}add($){x($);const{a:V,d:z}=i,{X:j,Y:et,Z:ot,T:Q}=this,{X:rt,Y:q,Z:F,T:W}=$,L=l(j*rt),E=l(et*q),a=l(Q*z*W),h=l(ot*F),_=l((j+et)*(rt+q)-L-E),M=h-a,C=h+a,I=l(E-V*L),w=l(_*M),p=l(C*I),c=l(_*I),f=l(M*C);return new R(w,p,f,c)}subtract($){return this.add($.negate())}multiply($){if(!s.isValidNot0($))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:V,f:z}=D.cached(this,$,j=>qr(R,j));return qr(R,[V,z])[0]}multiplyUnsafe($,V=R.ZERO){if(!s.isValid($))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return $===Rr?R.ZERO:this.is0()||$===ke?this:D.unsafe(this,$,z=>qr(R,z),V)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return D.unsafe(this,i.n).is0()}toAffine($){return A(this,$)}clearCofactor(){return o===ke?this:this.multiplyUnsafe(o)}toBytes(){const{x:$,y:V}=this.toAffine(),z=r.toBytes(V);return z[z.length-1]|=$&ke?128:0,z}toHex(){return jr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ($){return qr(R,$)}static msm($,V){return Gu(R,s,$,V)}_setWindowSize($){this.precompute($)}toRawBytes(){return this.toBytes()}}R.BASE=new R(i.Gx,i.Gy,ke,l(i.Gx*i.Gy)),R.ZERO=new R(Rr,ke,ke,Rr),R.Fp=r,R.Fn=s;const D=new ju(R,s.BITS);return R.BASE.precompute(8),R}function Uf(n,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');ti(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=e,{BASE:s,Fp:i,Fn:o}=n,u=e.randomBytes||jo,l=e.adjustScalarBytes||(q=>q),g=e.domain||((q,F,W)=>{if(Gr(W,"phflag"),F.length||W)throw new Error("Contexts/pre-hash are not supported");return q});function d(q){return o.create(qn(q))}function x(q){const F=z.secretKey;q=de("private key",q,F);const W=de("hashed private key",t(q),2*F),L=l(W.slice(0,F)),E=W.slice(F,2*F),a=d(L);return{head:L,prefix:E,scalar:a}}function A(q){const{head:F,prefix:W,scalar:L}=x(q),E=s.multiply(L),a=E.toBytes();return{head:F,prefix:W,scalar:L,point:E,pointBytes:a}}function k(q){return A(q).pointBytes}function R(q=Uint8Array.of(),...F){const W=sr(...F);return d(t(g(W,de("context",q),!!r)))}function D(q,F,W={}){q=de("message",q),r&&(q=r(q));const{prefix:L,scalar:E,pointBytes:a}=A(F),h=R(W.context,L,q),_=s.multiply(h).toBytes(),M=R(W.context,_,a,q),C=o.create(h+M*E);if(!o.isValid(C))throw new Error("sign failed: invalid s");const I=sr(_,o.toBytes(C));return Ye(I,z.signature,"result")}const O={zip215:!0};function $(q,F,W,L=O){const{context:E,zip215:a}=L,h=z.signature;q=de("signature",q,h),F=de("message",F),W=de("publicKey",W,z.publicKey),a!==void 0&&Gr(a,"zip215"),r&&(F=r(F));const _=h/2,M=q.subarray(0,_),C=qn(q.subarray(_,h));let I,w,p;try{I=n.fromBytes(W,a),w=n.fromBytes(M,a),p=s.multiplyUnsafe(C)}catch{return!1}if(!a&&I.isSmallOrder())return!1;const c=R(E,w.toBytes(),I.toBytes(),F);return w.add(I.multiplyUnsafe(c)).subtract(p).clearCofactor().is0()}const V=i.BYTES,z={secretKey:V,publicKey:V,signature:2*V,seed:V};function j(q=u(z.seed)){return Ye(q,z.seed,"seed")}function et(q){const F=rt.randomSecretKey(q);return{secretKey:F,publicKey:k(F)}}function ot(q){return Jn(q)&&q.length===o.BYTES}function Q(q,F){try{return!!n.fromBytes(q,F)}catch{return!1}}const rt={getExtendedPublicKey:A,randomSecretKey:j,isValidSecretKey:ot,isValidPublicKey:Q,toMontgomery(q){const{y:F}=n.fromBytes(q),W=z.publicKey,L=W===32;if(!L&&W!==57)throw new Error("only defined for 25519 and 448");const E=L?i.div(ke+F,ke-F):i.div(F-ke,F+ke);return i.toBytes(E)},toMontgomerySecret(q){const F=z.secretKey;Ye(q,F);const W=t(q.subarray(0,F));return l(W).subarray(0,F)},randomPrivateKey:j,precompute(q=8,F=n.BASE){return F.precompute(q,!1)}};return Object.freeze({keygen:et,getPublicKey:k,sign:D,verify:$,utils:rt,Point:n,lengths:z})}function Nf(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=Qr(t.n,n.nBitLength,!0),s={Fp:e,Fn:r,uvRatio:n.uvRatio},i={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:s,hash:n.hash,eddsaOpts:i}}function Df(n,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:n,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function zf(n){const{CURVE:t,curveOpts:e,hash:r,eddsaOpts:s}=Nf(n),i=Of(t,e),o=Uf(i,r,s);return Df(n,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ff=BigInt(1),Wa=BigInt(2);BigInt(3);const Kf=BigInt(5),qf=BigInt(8),Xo=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Yu={p:Xo,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:qf,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function $f(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=Xo,u=n*n%i*n%i,l=fe(u,Wa,i)*u%i,g=fe(l,Ff,i)*n%i,d=fe(g,Kf,i)*g%i,x=fe(d,t,i)*d%i,A=fe(x,e,i)*x%i,k=fe(A,r,i)*A%i,R=fe(k,s,i)*k%i,D=fe(R,s,i)*k%i,O=fe(D,t,i)*d%i;return{pow_p_5_8:fe(O,Wa,i)*n%i,b2:u}}function Wf(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const Va=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Vf(n,t){const e=Xo,r=ve(t*t*t,e),s=ve(r*r*t,e),i=$f(n*s).pow_p_5_8;let o=ve(n*r*i,e);const u=ve(t*o*o,e),l=o,g=ve(o*Va,e),d=u===n,x=u===ve(-n,e),A=u===ve(-n*Va,e);return d&&(o=l),(x||A)&&(o=g),Af(o,e)&&(o=ve(-o,e)),{isValid:d||x,value:o}}const Hf=Qr(Yu.p,{isLE:!0}),jf={...Yu,Fp:Hf,hash:mf,adjustScalarBytes:Wf,uvRatio:Vf},In=zf(jf);var Si={exports:{}},qs={},Ha;function Jo(){return Ha||(Ha=1,(function(n){Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},e={};e.byteLength=d,e.toByteArray=A,e.fromByteArray=D;for(var r=[],s=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,l=o.length;u<l;++u)r[u]=o[u],s[o.charCodeAt(u)]=u;s[45]=62,s[95]=63;function g(V){var z=V.length;if(z%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=V.indexOf("=");j===-1&&(j=z);var et=j===z?0:4-j%4;return[j,et]}function d(V){var z=g(V),j=z[0],et=z[1];return(j+et)*3/4-et}function x(V,z,j){return(z+j)*3/4-j}function A(V){var z,j=g(V),et=j[0],ot=j[1],Q=new i(x(V,et,ot)),rt=0,q=ot>0?et-4:et,F;for(F=0;F<q;F+=4)z=s[V.charCodeAt(F)]<<18|s[V.charCodeAt(F+1)]<<12|s[V.charCodeAt(F+2)]<<6|s[V.charCodeAt(F+3)],Q[rt++]=z>>16&255,Q[rt++]=z>>8&255,Q[rt++]=z&255;return ot===2&&(z=s[V.charCodeAt(F)]<<2|s[V.charCodeAt(F+1)]>>4,Q[rt++]=z&255),ot===1&&(z=s[V.charCodeAt(F)]<<10|s[V.charCodeAt(F+1)]<<4|s[V.charCodeAt(F+2)]>>2,Q[rt++]=z>>8&255,Q[rt++]=z&255),Q}function k(V){return r[V>>18&63]+r[V>>12&63]+r[V>>6&63]+r[V&63]}function R(V,z,j){for(var et,ot=[],Q=z;Q<j;Q+=3)et=(V[Q]<<16&16711680)+(V[Q+1]<<8&65280)+(V[Q+2]&255),ot.push(k(et));return ot.join("")}function D(V){for(var z,j=V.length,et=j%3,ot=[],Q=16383,rt=0,q=j-et;rt<q;rt+=Q)ot.push(R(V,rt,rt+Q>q?q:rt+Q));return et===1?(z=V[j-1],ot.push(r[z>>2]+r[z<<4&63]+"==")):et===2&&(z=(V[j-2]<<8)+V[j-1],ot.push(r[z>>10]+r[z>>4&63]+r[z<<2&63]+"=")),ot.join("")}var O={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */O.read=function(V,z,j,et,ot){var Q,rt,q=ot*8-et-1,F=(1<<q)-1,W=F>>1,L=-7,E=j?ot-1:0,a=j?-1:1,h=V[z+E];for(E+=a,Q=h&(1<<-L)-1,h>>=-L,L+=q;L>0;Q=Q*256+V[z+E],E+=a,L-=8);for(rt=Q&(1<<-L)-1,Q>>=-L,L+=et;L>0;rt=rt*256+V[z+E],E+=a,L-=8);if(Q===0)Q=1-W;else{if(Q===F)return rt?NaN:(h?-1:1)*(1/0);rt=rt+Math.pow(2,et),Q=Q-W}return(h?-1:1)*rt*Math.pow(2,Q-et)},O.write=function(V,z,j,et,ot,Q){var rt,q,F,W=Q*8-ot-1,L=(1<<W)-1,E=L>>1,a=ot===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=et?0:Q-1,_=et?1:-1,M=z<0||z===0&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(q=isNaN(z)?1:0,rt=L):(rt=Math.floor(Math.log(z)/Math.LN2),z*(F=Math.pow(2,-rt))<1&&(rt--,F*=2),rt+E>=1?z+=a/F:z+=a*Math.pow(2,1-E),z*F>=2&&(rt++,F/=2),rt+E>=L?(q=0,rt=L):rt+E>=1?(q=(z*F-1)*Math.pow(2,ot),rt=rt+E):(q=z*Math.pow(2,E-1)*Math.pow(2,ot),rt=0));ot>=8;V[j+h]=q&255,h+=_,q/=256,ot-=8);for(rt=rt<<ot|q,W+=ot;W>0;V[j+h]=rt&255,h+=_,rt/=256,W-=8);V[j+h-_]|=M*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(V){const z=e,j=O,et=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;V.Buffer=L,V.SlowBuffer=f,V.INSPECT_MAX_BYTES=50;const ot=2147483647;V.kMaxLength=ot;const{Uint8Array:Q,ArrayBuffer:rt,SharedArrayBuffer:q}=globalThis;L.TYPED_ARRAY_SUPPORT=F(),!L.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function F(){try{const T=new Q(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Q.prototype),Object.setPrototypeOf(T,m),T.foo()===42}catch{return!1}}Object.defineProperty(L.prototype,"parent",{enumerable:!0,get:function(){if(L.isBuffer(this))return this.buffer}}),Object.defineProperty(L.prototype,"offset",{enumerable:!0,get:function(){if(L.isBuffer(this))return this.byteOffset}});function W(T){if(T>ot)throw new RangeError('The value "'+T+'" is invalid for option "size"');const m=new Q(T);return Object.setPrototypeOf(m,L.prototype),m}function L(T,m,v){if(typeof T=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(T)}return E(T,m,v)}L.poolSize=8192;function E(T,m,v){if(typeof T=="string")return M(T,m);if(rt.isView(T))return I(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(Fe(T,rt)||T&&Fe(T.buffer,rt)||typeof q<"u"&&(Fe(T,q)||T&&Fe(T.buffer,q)))return w(T,m,v);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const N=T.valueOf&&T.valueOf();if(N!=null&&N!==T)return L.from(N,m,v);const Z=p(T);if(Z)return Z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return L.from(T[Symbol.toPrimitive]("string"),m,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}L.from=function(T,m,v){return E(T,m,v)},Object.setPrototypeOf(L.prototype,Q.prototype),Object.setPrototypeOf(L,Q);function a(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function h(T,m,v){return a(T),T<=0?W(T):m!==void 0?typeof v=="string"?W(T).fill(m,v):W(T).fill(m):W(T)}L.alloc=function(T,m,v){return h(T,m,v)};function _(T){return a(T),W(T<0?0:c(T)|0)}L.allocUnsafe=function(T){return _(T)},L.allocUnsafeSlow=function(T){return _(T)};function M(T,m){if((typeof m!="string"||m==="")&&(m="utf8"),!L.isEncoding(m))throw new TypeError("Unknown encoding: "+m);const v=S(T,m)|0;let N=W(v);const Z=N.write(T,m);return Z!==v&&(N=N.slice(0,Z)),N}function C(T){const m=T.length<0?0:c(T.length)|0,v=W(m);for(let N=0;N<m;N+=1)v[N]=T[N]&255;return v}function I(T){if(Fe(T,Q)){const m=new Q(T);return w(m.buffer,m.byteOffset,m.byteLength)}return C(T)}function w(T,m,v){if(m<0||T.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<m+(v||0))throw new RangeError('"length" is outside of buffer bounds');let N;return m===void 0&&v===void 0?N=new Q(T):v===void 0?N=new Q(T,m):N=new Q(T,m,v),Object.setPrototypeOf(N,L.prototype),N}function p(T){if(L.isBuffer(T)){const m=c(T.length)|0,v=W(m);return v.length===0||T.copy(v,0,0,m),v}if(T.length!==void 0)return typeof T.length!="number"||ie(T.length)?W(0):C(T);if(T.type==="Buffer"&&Array.isArray(T.data))return C(T.data)}function c(T){if(T>=ot)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ot.toString(16)+" bytes");return T|0}function f(T){return+T!=T&&(T=0),L.alloc(+T)}L.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==L.prototype},L.compare=function(m,v){if(Fe(m,Q)&&(m=L.from(m,m.offset,m.byteLength)),Fe(v,Q)&&(v=L.from(v,v.offset,v.byteLength)),!L.isBuffer(m)||!L.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===v)return 0;let N=m.length,Z=v.length;for(let X=0,st=Math.min(N,Z);X<st;++X)if(m[X]!==v[X]){N=m[X],Z=v[X];break}return N<Z?-1:Z<N?1:0},L.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},L.concat=function(m,v){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return L.alloc(0);let N;if(v===void 0)for(v=0,N=0;N<m.length;++N)v+=m[N].length;const Z=L.allocUnsafe(v);let X=0;for(N=0;N<m.length;++N){let st=m[N];if(Fe(st,Q))X+st.length>Z.length?(L.isBuffer(st)||(st=L.from(st)),st.copy(Z,X)):Q.prototype.set.call(Z,st,X);else if(L.isBuffer(st))st.copy(Z,X);else throw new TypeError('"list" argument must be an Array of Buffers');X+=st.length}return Z};function S(T,m){if(L.isBuffer(T))return T.length;if(rt.isView(T)||Fe(T,rt))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const v=T.length,N=arguments.length>2&&arguments[2]===!0;if(!N&&v===0)return 0;let Z=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return kt(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return vt(T).length;default:if(Z)return N?-1:kt(T).length;m=(""+m).toLowerCase(),Z=!0}}L.byteLength=S;function P(T,m,v){let N=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,m>>>=0,v<=m))return"";for(T||(T="utf8");;)switch(T){case"hex":return Zt(this,m,v);case"utf8":case"utf-8":return Gt(this,m,v);case"ascii":return re(this,m,v);case"latin1":case"binary":return sn(this,m,v);case"base64":return ee(this,m,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,m,v);default:if(N)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),N=!0}}L.prototype._isBuffer=!0;function H(T,m,v){const N=T[m];T[m]=T[v],T[v]=N}L.prototype.swap16=function(){const m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<m;v+=2)H(this,v,v+1);return this},L.prototype.swap32=function(){const m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<m;v+=4)H(this,v,v+3),H(this,v+1,v+2);return this},L.prototype.swap64=function(){const m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<m;v+=8)H(this,v,v+7),H(this,v+1,v+6),H(this,v+2,v+5),H(this,v+3,v+4);return this},L.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?Gt(this,0,m):P.apply(this,arguments)},L.prototype.toLocaleString=L.prototype.toString,L.prototype.equals=function(m){if(!L.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:L.compare(this,m)===0},L.prototype.inspect=function(){let m="";const v=V.INSPECT_MAX_BYTES;return m=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(m+=" ... "),"<Buffer "+m+">"},et&&(L.prototype[et]=L.prototype.inspect),L.prototype.compare=function(m,v,N,Z,X){if(Fe(m,Q)&&(m=L.from(m,m.offset,m.byteLength)),!L.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(v===void 0&&(v=0),N===void 0&&(N=m?m.length:0),Z===void 0&&(Z=0),X===void 0&&(X=this.length),v<0||N>m.length||Z<0||X>this.length)throw new RangeError("out of range index");if(Z>=X&&v>=N)return 0;if(Z>=X)return-1;if(v>=N)return 1;if(v>>>=0,N>>>=0,Z>>>=0,X>>>=0,this===m)return 0;let st=X-Z,Rt=N-v;const It=Math.min(st,Rt),St=this.slice(Z,X),te=m.slice(v,N);for(let Et=0;Et<It;++Et)if(St[Et]!==te[Et]){st=St[Et],Rt=te[Et];break}return st<Rt?-1:Rt<st?1:0};function nt(T,m,v,N,Z){if(T.length===0)return-1;if(typeof v=="string"?(N=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,ie(v)&&(v=Z?0:T.length-1),v<0&&(v=T.length+v),v>=T.length){if(Z)return-1;v=T.length-1}else if(v<0)if(Z)v=0;else return-1;if(typeof m=="string"&&(m=L.from(m,N)),L.isBuffer(m))return m.length===0?-1:lt(T,m,v,N,Z);if(typeof m=="number")return m=m&255,typeof Q.prototype.indexOf=="function"?Z?Q.prototype.indexOf.call(T,m,v):Q.prototype.lastIndexOf.call(T,m,v):lt(T,[m],v,N,Z);throw new TypeError("val must be string, number or Buffer")}function lt(T,m,v,N,Z){let X=1,st=T.length,Rt=m.length;if(N!==void 0&&(N=String(N).toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(T.length<2||m.length<2)return-1;X=2,st/=2,Rt/=2,v/=2}function It(te,Et){return X===1?te[Et]:te.readUInt16BE(Et*X)}let St;if(Z){let te=-1;for(St=v;St<st;St++)if(It(T,St)===It(m,te===-1?0:St-te)){if(te===-1&&(te=St),St-te+1===Rt)return te*X}else te!==-1&&(St-=St-te),te=-1}else for(v+Rt>st&&(v=st-Rt),St=v;St>=0;St--){let te=!0;for(let Et=0;Et<Rt;Et++)if(It(T,St+Et)!==It(m,Et)){te=!1;break}if(te)return St}return-1}L.prototype.includes=function(m,v,N){return this.indexOf(m,v,N)!==-1},L.prototype.indexOf=function(m,v,N){return nt(this,m,v,N,!0)},L.prototype.lastIndexOf=function(m,v,N){return nt(this,m,v,N,!1)};function pt(T,m,v,N){v=Number(v)||0;const Z=T.length-v;N?(N=Number(N),N>Z&&(N=Z)):N=Z;const X=m.length;N>X/2&&(N=X/2);let st;for(st=0;st<N;++st){const Rt=parseInt(m.substr(st*2,2),16);if(ie(Rt))return st;T[v+st]=Rt}return st}function Ut(T,m,v,N){return Qt(kt(m,T.length-v),T,v,N)}function Pt(T,m,v,N){return Qt(_t(m),T,v,N)}function Kt(T,m,v,N){return Qt(vt(m),T,v,N)}function tr(T,m,v,N){return Qt(jt(m,T.length-v),T,v,N)}L.prototype.write=function(m,v,N,Z){if(v===void 0)Z="utf8",N=this.length,v=0;else if(N===void 0&&typeof v=="string")Z=v,N=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(N)?(N=N>>>0,Z===void 0&&(Z="utf8")):(Z=N,N=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const X=this.length-v;if((N===void 0||N>X)&&(N=X),m.length>0&&(N<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");Z||(Z="utf8");let st=!1;for(;;)switch(Z){case"hex":return pt(this,m,v,N);case"utf8":case"utf-8":return Ut(this,m,v,N);case"ascii":case"latin1":case"binary":return Pt(this,m,v,N);case"base64":return Kt(this,m,v,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tr(this,m,v,N);default:if(st)throw new TypeError("Unknown encoding: "+Z);Z=(""+Z).toLowerCase(),st=!0}},L.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(T,m,v){return m===0&&v===T.length?z.fromByteArray(T):z.fromByteArray(T.slice(m,v))}function Gt(T,m,v){v=Math.min(T.length,v);const N=[];let Z=m;for(;Z<v;){const X=T[Z];let st=null,Rt=X>239?4:X>223?3:X>191?2:1;if(Z+Rt<=v){let It,St,te,Et;switch(Rt){case 1:X<128&&(st=X);break;case 2:It=T[Z+1],(It&192)===128&&(Et=(X&31)<<6|It&63,Et>127&&(st=Et));break;case 3:It=T[Z+1],St=T[Z+2],(It&192)===128&&(St&192)===128&&(Et=(X&15)<<12|(It&63)<<6|St&63,Et>2047&&(Et<55296||Et>57343)&&(st=Et));break;case 4:It=T[Z+1],St=T[Z+2],te=T[Z+3],(It&192)===128&&(St&192)===128&&(te&192)===128&&(Et=(X&15)<<18|(It&63)<<12|(St&63)<<6|te&63,Et>65535&&Et<1114112&&(st=Et))}}st===null?(st=65533,Rt=1):st>65535&&(st-=65536,N.push(st>>>10&1023|55296),st=56320|st&1023),N.push(st),Z+=Rt}return Wt(N)}const $e=4096;function Wt(T){const m=T.length;if(m<=$e)return String.fromCharCode.apply(String,T);let v="",N=0;for(;N<m;)v+=String.fromCharCode.apply(String,T.slice(N,N+=$e));return v}function re(T,m,v){let N="";v=Math.min(T.length,v);for(let Z=m;Z<v;++Z)N+=String.fromCharCode(T[Z]&127);return N}function sn(T,m,v){let N="";v=Math.min(T.length,v);for(let Z=m;Z<v;++Z)N+=String.fromCharCode(T[Z]);return N}function Zt(T,m,v){const N=T.length;(!m||m<0)&&(m=0),(!v||v<0||v>N)&&(v=N);let Z="";for(let X=m;X<v;++X)Z+=le[T[X]];return Z}function ne(T,m,v){const N=T.slice(m,v);let Z="";for(let X=0;X<N.length-1;X+=2)Z+=String.fromCharCode(N[X]+N[X+1]*256);return Z}L.prototype.slice=function(m,v){const N=this.length;m=~~m,v=v===void 0?N:~~v,m<0?(m+=N,m<0&&(m=0)):m>N&&(m=N),v<0?(v+=N,v<0&&(v=0)):v>N&&(v=N),v<m&&(v=m);const Z=this.subarray(m,v);return Object.setPrototypeOf(Z,L.prototype),Z};function ae(T,m,v){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+m>v)throw new RangeError("Trying to access beyond buffer length")}L.prototype.readUintLE=L.prototype.readUIntLE=function(m,v,N){m=m>>>0,v=v>>>0,N||ae(m,v,this.length);let Z=this[m],X=1,st=0;for(;++st<v&&(X*=256);)Z+=this[m+st]*X;return Z},L.prototype.readUintBE=L.prototype.readUIntBE=function(m,v,N){m=m>>>0,v=v>>>0,N||ae(m,v,this.length);let Z=this[m+--v],X=1;for(;v>0&&(X*=256);)Z+=this[m+--v]*X;return Z},L.prototype.readUint8=L.prototype.readUInt8=function(m,v){return m=m>>>0,v||ae(m,1,this.length),this[m]},L.prototype.readUint16LE=L.prototype.readUInt16LE=function(m,v){return m=m>>>0,v||ae(m,2,this.length),this[m]|this[m+1]<<8},L.prototype.readUint16BE=L.prototype.readUInt16BE=function(m,v){return m=m>>>0,v||ae(m,2,this.length),this[m]<<8|this[m+1]},L.prototype.readUint32LE=L.prototype.readUInt32LE=function(m,v){return m=m>>>0,v||ae(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},L.prototype.readUint32BE=L.prototype.readUInt32BE=function(m,v){return m=m>>>0,v||ae(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},L.prototype.readBigUInt64LE=Ge(function(m){m=m>>>0,G(m,"offset");const v=this[m],N=this[m+7];(v===void 0||N===void 0)&&Y(m,this.length-8);const Z=v+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,X=this[++m]+this[++m]*2**8+this[++m]*2**16+N*2**24;return BigInt(Z)+(BigInt(X)<<BigInt(32))}),L.prototype.readBigUInt64BE=Ge(function(m){m=m>>>0,G(m,"offset");const v=this[m],N=this[m+7];(v===void 0||N===void 0)&&Y(m,this.length-8);const Z=v*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],X=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+N;return(BigInt(Z)<<BigInt(32))+BigInt(X)}),L.prototype.readIntLE=function(m,v,N){m=m>>>0,v=v>>>0,N||ae(m,v,this.length);let Z=this[m],X=1,st=0;for(;++st<v&&(X*=256);)Z+=this[m+st]*X;return X*=128,Z>=X&&(Z-=Math.pow(2,8*v)),Z},L.prototype.readIntBE=function(m,v,N){m=m>>>0,v=v>>>0,N||ae(m,v,this.length);let Z=v,X=1,st=this[m+--Z];for(;Z>0&&(X*=256);)st+=this[m+--Z]*X;return X*=128,st>=X&&(st-=Math.pow(2,8*v)),st},L.prototype.readInt8=function(m,v){return m=m>>>0,v||ae(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},L.prototype.readInt16LE=function(m,v){m=m>>>0,v||ae(m,2,this.length);const N=this[m]|this[m+1]<<8;return N&32768?N|4294901760:N},L.prototype.readInt16BE=function(m,v){m=m>>>0,v||ae(m,2,this.length);const N=this[m+1]|this[m]<<8;return N&32768?N|4294901760:N},L.prototype.readInt32LE=function(m,v){return m=m>>>0,v||ae(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},L.prototype.readInt32BE=function(m,v){return m=m>>>0,v||ae(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},L.prototype.readBigInt64LE=Ge(function(m){m=m>>>0,G(m,"offset");const v=this[m],N=this[m+7];(v===void 0||N===void 0)&&Y(m,this.length-8);const Z=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(N<<24);return(BigInt(Z)<<BigInt(32))+BigInt(v+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)}),L.prototype.readBigInt64BE=Ge(function(m){m=m>>>0,G(m,"offset");const v=this[m],N=this[m+7];(v===void 0||N===void 0)&&Y(m,this.length-8);const Z=(v<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(Z)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+N)}),L.prototype.readFloatLE=function(m,v){return m=m>>>0,v||ae(m,4,this.length),j.read(this,m,!0,23,4)},L.prototype.readFloatBE=function(m,v){return m=m>>>0,v||ae(m,4,this.length),j.read(this,m,!1,23,4)},L.prototype.readDoubleLE=function(m,v){return m=m>>>0,v||ae(m,8,this.length),j.read(this,m,!0,52,8)},L.prototype.readDoubleBE=function(m,v){return m=m>>>0,v||ae(m,8,this.length),j.read(this,m,!1,52,8)};function Mt(T,m,v,N,Z,X){if(!L.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>Z||m<X)throw new RangeError('"value" argument is out of bounds');if(v+N>T.length)throw new RangeError("Index out of range")}L.prototype.writeUintLE=L.prototype.writeUIntLE=function(m,v,N,Z){if(m=+m,v=v>>>0,N=N>>>0,!Z){const Rt=Math.pow(2,8*N)-1;Mt(this,m,v,N,Rt,0)}let X=1,st=0;for(this[v]=m&255;++st<N&&(X*=256);)this[v+st]=m/X&255;return v+N},L.prototype.writeUintBE=L.prototype.writeUIntBE=function(m,v,N,Z){if(m=+m,v=v>>>0,N=N>>>0,!Z){const Rt=Math.pow(2,8*N)-1;Mt(this,m,v,N,Rt,0)}let X=N-1,st=1;for(this[v+X]=m&255;--X>=0&&(st*=256);)this[v+X]=m/st&255;return v+N},L.prototype.writeUint8=L.prototype.writeUInt8=function(m,v,N){return m=+m,v=v>>>0,N||Mt(this,m,v,1,255,0),this[v]=m&255,v+1},L.prototype.writeUint16LE=L.prototype.writeUInt16LE=function(m,v,N){return m=+m,v=v>>>0,N||Mt(this,m,v,2,65535,0),this[v]=m&255,this[v+1]=m>>>8,v+2},L.prototype.writeUint16BE=L.prototype.writeUInt16BE=function(m,v,N){return m=+m,v=v>>>0,N||Mt(this,m,v,2,65535,0),this[v]=m>>>8,this[v+1]=m&255,v+2},L.prototype.writeUint32LE=L.prototype.writeUInt32LE=function(m,v,N){return m=+m,v=v>>>0,N||Mt(this,m,v,4,4294967295,0),this[v+3]=m>>>24,this[v+2]=m>>>16,this[v+1]=m>>>8,this[v]=m&255,v+4},L.prototype.writeUint32BE=L.prototype.writeUInt32BE=function(m,v,N){return m=+m,v=v>>>0,N||Mt(this,m,v,4,4294967295,0),this[v]=m>>>24,this[v+1]=m>>>16,this[v+2]=m>>>8,this[v+3]=m&255,v+4};function Vt(T,m,v,N,Z){U(m,N,Z,T,v,7);let X=Number(m&BigInt(4294967295));T[v++]=X,X=X>>8,T[v++]=X,X=X>>8,T[v++]=X,X=X>>8,T[v++]=X;let st=Number(m>>BigInt(32)&BigInt(4294967295));return T[v++]=st,st=st>>8,T[v++]=st,st=st>>8,T[v++]=st,st=st>>8,T[v++]=st,v}function xe(T,m,v,N,Z){U(m,N,Z,T,v,7);let X=Number(m&BigInt(4294967295));T[v+7]=X,X=X>>8,T[v+6]=X,X=X>>8,T[v+5]=X,X=X>>8,T[v+4]=X;let st=Number(m>>BigInt(32)&BigInt(4294967295));return T[v+3]=st,st=st>>8,T[v+2]=st,st=st>>8,T[v+1]=st,st=st>>8,T[v]=st,v+8}L.prototype.writeBigUInt64LE=Ge(function(m,v=0){return Vt(this,m,v,BigInt(0),BigInt("0xffffffffffffffff"))}),L.prototype.writeBigUInt64BE=Ge(function(m,v=0){return xe(this,m,v,BigInt(0),BigInt("0xffffffffffffffff"))}),L.prototype.writeIntLE=function(m,v,N,Z){if(m=+m,v=v>>>0,!Z){const It=Math.pow(2,8*N-1);Mt(this,m,v,N,It-1,-It)}let X=0,st=1,Rt=0;for(this[v]=m&255;++X<N&&(st*=256);)m<0&&Rt===0&&this[v+X-1]!==0&&(Rt=1),this[v+X]=(m/st>>0)-Rt&255;return v+N},L.prototype.writeIntBE=function(m,v,N,Z){if(m=+m,v=v>>>0,!Z){const It=Math.pow(2,8*N-1);Mt(this,m,v,N,It-1,-It)}let X=N-1,st=1,Rt=0;for(this[v+X]=m&255;--X>=0&&(st*=256);)m<0&&Rt===0&&this[v+X+1]!==0&&(Rt=1),this[v+X]=(m/st>>0)-Rt&255;return v+N},L.prototype.writeInt8=function(m,v,N){return m=+m,v=v>>>0,N||Mt(this,m,v,1,127,-128),m<0&&(m=255+m+1),this[v]=m&255,v+1},L.prototype.writeInt16LE=function(m,v,N){return m=+m,v=v>>>0,N||Mt(this,m,v,2,32767,-32768),this[v]=m&255,this[v+1]=m>>>8,v+2},L.prototype.writeInt16BE=function(m,v,N){return m=+m,v=v>>>0,N||Mt(this,m,v,2,32767,-32768),this[v]=m>>>8,this[v+1]=m&255,v+2},L.prototype.writeInt32LE=function(m,v,N){return m=+m,v=v>>>0,N||Mt(this,m,v,4,2147483647,-2147483648),this[v]=m&255,this[v+1]=m>>>8,this[v+2]=m>>>16,this[v+3]=m>>>24,v+4},L.prototype.writeInt32BE=function(m,v,N){return m=+m,v=v>>>0,N||Mt(this,m,v,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[v]=m>>>24,this[v+1]=m>>>16,this[v+2]=m>>>8,this[v+3]=m&255,v+4},L.prototype.writeBigInt64LE=Ge(function(m,v=0){return Vt(this,m,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),L.prototype.writeBigInt64BE=Ge(function(m,v=0){return xe(this,m,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ht(T,m,v,N,Z,X){if(v+N>T.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function Jt(T,m,v,N,Z){return m=+m,v=v>>>0,Z||Ht(T,m,v,4),j.write(T,m,v,N,23,4),v+4}L.prototype.writeFloatLE=function(m,v,N){return Jt(this,m,v,!0,N)},L.prototype.writeFloatBE=function(m,v,N){return Jt(this,m,v,!1,N)};function Ce(T,m,v,N,Z){return m=+m,v=v>>>0,Z||Ht(T,m,v,8),j.write(T,m,v,N,52,8),v+8}L.prototype.writeDoubleLE=function(m,v,N){return Ce(this,m,v,!0,N)},L.prototype.writeDoubleBE=function(m,v,N){return Ce(this,m,v,!1,N)},L.prototype.copy=function(m,v,N,Z){if(!L.isBuffer(m))throw new TypeError("argument should be a Buffer");if(N||(N=0),!Z&&Z!==0&&(Z=this.length),v>=m.length&&(v=m.length),v||(v=0),Z>0&&Z<N&&(Z=N),Z===N||m.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("sourceEnd out of bounds");Z>this.length&&(Z=this.length),m.length-v<Z-N&&(Z=m.length-v+N);const X=Z-N;return this===m&&typeof Q.prototype.copyWithin=="function"?this.copyWithin(v,N,Z):Q.prototype.set.call(m,this.subarray(N,Z),v),X},L.prototype.fill=function(m,v,N,Z){if(typeof m=="string"){if(typeof v=="string"?(Z=v,v=0,N=this.length):typeof N=="string"&&(Z=N,N=this.length),Z!==void 0&&typeof Z!="string")throw new TypeError("encoding must be a string");if(typeof Z=="string"&&!L.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);if(m.length===1){const st=m.charCodeAt(0);(Z==="utf8"&&st<128||Z==="latin1")&&(m=st)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(v<0||this.length<v||this.length<N)throw new RangeError("Out of range index");if(N<=v)return this;v=v>>>0,N=N===void 0?this.length:N>>>0,m||(m=0);let X;if(typeof m=="number")for(X=v;X<N;++X)this[X]=m;else{const st=L.isBuffer(m)?m:L.from(m,Z),Rt=st.length;if(Rt===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(X=0;X<N-v;++X)this[X+v]=st[X%Rt]}return this};const qt={};function B(T,m,v){qt[T]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(Z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Z,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}B("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(T,m){return`The "${T}" argument must be of type number. Received type ${typeof m}`},TypeError),B("ERR_OUT_OF_RANGE",function(T,m,v){let N=`The value of "${T}" is out of range.`,Z=v;return Number.isInteger(v)&&Math.abs(v)>2**32?Z=y(String(v)):typeof v=="bigint"&&(Z=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(Z=y(Z)),Z+="n"),N+=` It must be ${m}. Received ${Z}`,N},RangeError);function y(T){let m="",v=T.length;const N=T[0]==="-"?1:0;for(;v>=N+4;v-=3)m=`_${T.slice(v-3,v)}${m}`;return`${T.slice(0,v)}${m}`}function b(T,m,v){G(m,"offset"),(T[m]===void 0||T[m+v]===void 0)&&Y(m,T.length-(v+1))}function U(T,m,v,N,Z,X){if(T>v||T<m){const st=typeof m=="bigint"?"n":"";let Rt;throw m===0||m===BigInt(0)?Rt=`>= 0${st} and < 2${st} ** ${(X+1)*8}${st}`:Rt=`>= -(2${st} ** ${(X+1)*8-1}${st}) and < 2 ** ${(X+1)*8-1}${st}`,new qt.ERR_OUT_OF_RANGE("value",Rt,T)}b(N,Z,X)}function G(T,m){if(typeof T!="number")throw new qt.ERR_INVALID_ARG_TYPE(m,"number",T)}function Y(T,m,v){throw Math.floor(T)!==T?(G(T,v),new qt.ERR_OUT_OF_RANGE("offset","an integer",T)):m<0?new qt.ERR_BUFFER_OUT_OF_BOUNDS:new qt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${m}`,T)}const it=/[^+/0-9A-Za-z-_]/g;function xt(T){if(T=T.split("=")[0],T=T.trim().replace(it,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function kt(T,m){m=m||1/0;let v;const N=T.length;let Z=null;const X=[];for(let st=0;st<N;++st){if(v=T.charCodeAt(st),v>55295&&v<57344){if(!Z){if(v>56319){(m-=3)>-1&&X.push(239,191,189);continue}else if(st+1===N){(m-=3)>-1&&X.push(239,191,189);continue}Z=v;continue}if(v<56320){(m-=3)>-1&&X.push(239,191,189),Z=v;continue}v=(Z-55296<<10|v-56320)+65536}else Z&&(m-=3)>-1&&X.push(239,191,189);if(Z=null,v<128){if((m-=1)<0)break;X.push(v)}else if(v<2048){if((m-=2)<0)break;X.push(v>>6|192,v&63|128)}else if(v<65536){if((m-=3)<0)break;X.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((m-=4)<0)break;X.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return X}function _t(T){const m=[];for(let v=0;v<T.length;++v)m.push(T.charCodeAt(v)&255);return m}function jt(T,m){let v,N,Z;const X=[];for(let st=0;st<T.length&&!((m-=2)<0);++st)v=T.charCodeAt(st),N=v>>8,Z=v%256,X.push(Z),X.push(N);return X}function vt(T){return z.toByteArray(xt(T))}function Qt(T,m,v,N){let Z;for(Z=0;Z<N&&!(Z+v>=m.length||Z>=T.length);++Z)m[Z+v]=T[Z];return Z}function Fe(T,m){return T instanceof m||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===m.name}function ie(T){return T!==T}const le=(function(){const T="0123456789abcdef",m=new Array(256);for(let v=0;v<16;++v){const N=v*16;for(let Z=0;Z<16;++Z)m[N+Z]=T[v]+T[Z]}return m})();function Ge(T){return typeof BigInt>"u"?he:T}function he(){throw new Error("BigInt not supported")}})(t);const $=t.Buffer;n.Blob=t.Blob,n.BlobOptions=t.BlobOptions,n.Buffer=t.Buffer,n.File=t.File,n.FileOptions=t.FileOptions,n.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,n.SlowBuffer=t.SlowBuffer,n.TranscodeEncoding=t.TranscodeEncoding,n.atob=t.atob,n.btoa=t.btoa,n.constants=t.constants,n.default=$,n.isAscii=t.isAscii,n.isUtf8=t.isUtf8,n.kMaxLength=t.kMaxLength,n.kStringMaxLength=t.kStringMaxLength,n.resolveObjectURL=t.resolveObjectURL,n.transcode=t.transcode})(qs)),qs}var Gf=Si.exports,ja;function Qo(){return ja||(ja=1,(function(n){(function(t,e){function r(E,a){if(!E)throw new Error(a||"Assertion failed")}function s(E,a){E.super_=a;var h=function(){};h.prototype=a.prototype,E.prototype=new h,E.prototype.constructor=E}function i(E,a,h){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(E||0,a||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Jo().Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,h){return a.cmp(h)>0?a:h},i.min=function(a,h){return a.cmp(h)<0?a:h},i.prototype._init=function(a,h,_){if(typeof a=="number")return this._initNumber(a,h,_);if(typeof a=="object")return this._initArray(a,h,_);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var M=0;a[0]==="-"&&(M++,this.negative=1),M<a.length&&(h===16?this._parseHex(a,M,_):(this._parseBase(a,h,M),_==="le"&&this._initArray(this.toArray(),h,_)))},i.prototype._initNumber=function(a,h,_){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),h,_)},i.prototype._initArray=function(a,h,_){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var C,I,w=0;if(_==="be")for(M=a.length-1,C=0;M>=0;M-=3)I=a[M]|a[M-1]<<8|a[M-2]<<16,this.words[C]|=I<<w&67108863,this.words[C+1]=I>>>26-w&67108863,w+=24,w>=26&&(w-=26,C++);else if(_==="le")for(M=0,C=0;M<a.length;M+=3)I=a[M]|a[M+1]<<8|a[M+2]<<16,this.words[C]|=I<<w&67108863,this.words[C+1]=I>>>26-w&67108863,w+=24,w>=26&&(w-=26,C++);return this._strip()};function u(E,a){var h=E.charCodeAt(a);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+E)}function l(E,a,h){var _=u(E,h);return h-1>=a&&(_|=u(E,h-1)<<4),_}i.prototype._parseHex=function(a,h,_){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var C=0,I=0,w;if(_==="be")for(M=a.length-1;M>=h;M-=2)w=l(a,h,M)<<C,this.words[I]|=w&67108863,C>=18?(C-=18,I+=1,this.words[I]|=w>>>26):C+=8;else{var p=a.length-h;for(M=p%2===0?h+1:h;M<a.length;M+=2)w=l(a,h,M)<<C,this.words[I]|=w&67108863,C>=18?(C-=18,I+=1,this.words[I]|=w>>>26):C+=8}this._strip()};function g(E,a,h,_){for(var M=0,C=0,I=Math.min(E.length,h),w=a;w<I;w++){var p=E.charCodeAt(w)-48;M*=_,p>=49?C=p-49+10:p>=17?C=p-17+10:C=p,r(p>=0&&C<_,"Invalid character"),M+=C}return M}i.prototype._parseBase=function(a,h,_){this.words=[0],this.length=1;for(var M=0,C=1;C<=67108863;C*=h)M++;M--,C=C/h|0;for(var I=a.length-_,w=I%M,p=Math.min(I,I-w)+_,c=0,f=_;f<p;f+=M)c=g(a,f,f+M,h),this.imuln(C),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(w!==0){var S=1;for(c=g(a,f,a.length,h),f=0;f<w;f++)S*=h;this.imuln(S),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red};function d(E,a){E.words=a.words,E.length=a.length,E.negative=a.negative,E.red=a.red}if(i.prototype._move=function(a){d(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{i.prototype.inspect=x}else i.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],R=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,h){a=a||10,h=h|0||1;var _;if(a===16||a==="hex"){_="";for(var M=0,C=0,I=0;I<this.length;I++){var w=this.words[I],p=((w<<M|C)&16777215).toString(16);C=w>>>24-M&16777215,M+=2,M>=26&&(M-=26,I--),C!==0||I!==this.length-1?_=A[6-p.length]+p+_:_=p+_}for(C!==0&&(_=C.toString(16)+_);_.length%h!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(a===(a|0)&&a>=2&&a<=36){var c=k[a],f=R[a];_="";var S=this.clone();for(S.negative=0;!S.isZero();){var P=S.modrn(f).toString(a);S=S.idivn(f),S.isZero()?_=P+_:_=A[c-P.length]+P+_}for(this.isZero()&&(_="0"+_);_.length%h!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,h){return this.toArrayLike(o,a,h)}),i.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)};var D=function(a,h){return a.allocUnsafe?a.allocUnsafe(h):new a(h)};i.prototype.toArrayLike=function(a,h,_){this._strip();var M=this.byteLength(),C=_||Math.max(1,M);r(M<=C,"byte array longer than desired length"),r(C>0,"Requested array length <= 0");var I=D(a,C),w=h==="le"?"LE":"BE";return this["_toArrayLike"+w](I,M),I},i.prototype._toArrayLikeLE=function(a,h){for(var _=0,M=0,C=0,I=0;C<this.length;C++){var w=this.words[C]<<I|M;a[_++]=w&255,_<a.length&&(a[_++]=w>>8&255),_<a.length&&(a[_++]=w>>16&255),I===6?(_<a.length&&(a[_++]=w>>24&255),M=0,I=0):(M=w>>>24,I+=2)}if(_<a.length)for(a[_++]=M;_<a.length;)a[_++]=0},i.prototype._toArrayLikeBE=function(a,h){for(var _=a.length-1,M=0,C=0,I=0;C<this.length;C++){var w=this.words[C]<<I|M;a[_--]=w&255,_>=0&&(a[_--]=w>>8&255),_>=0&&(a[_--]=w>>16&255),I===6?(_>=0&&(a[_--]=w>>24&255),M=0,I=0):(M=w>>>24,I+=2)}if(_>=0)for(a[_--]=M;_>=0;)a[_--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var h=a,_=0;return h>=4096&&(_+=13,h>>>=13),h>=64&&(_+=7,h>>>=7),h>=8&&(_+=4,h>>>=4),h>=2&&(_+=2,h>>>=2),_+h},i.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,_=0;return(h&8191)===0&&(_+=13,h>>>=13),(h&127)===0&&(_+=7,h>>>=7),(h&15)===0&&(_+=4,h>>>=4),(h&3)===0&&(_+=2,h>>>=2),(h&1)===0&&_++,_},i.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function O(E){for(var a=new Array(E.bitLength()),h=0;h<a.length;h++){var _=h/26|0,M=h%26;a[h]=E.words[_]>>>M&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var _=this._zeroBits(this.words[h]);if(a+=_,_!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var _=0;_<h.length;_++)this.words[_]=this.words[_]&a.words[_];return this.length=h.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var h,_;this.length>a.length?(h=this,_=a):(h=a,_=this);for(var M=0;M<_.length;M++)this.words[M]=h.words[M]^_.words[M];if(this!==h)for(;M<h.length;M++)this.words[M]=h.words[M];return this.length=h.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,_=a%26;this._expand(h),_>0&&h--;for(var M=0;M<h;M++)this.words[M]=~this.words[M]&67108863;return _>0&&(this.words[M]=~this.words[M]&67108863>>26-_),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,h){r(typeof a=="number"&&a>=0);var _=a/26|0,M=a%26;return this._expand(_+1),h?this.words[_]=this.words[_]|1<<M:this.words[_]=this.words[_]&~(1<<M),this._strip()},i.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var _,M;this.length>a.length?(_=this,M=a):(_=a,M=this);for(var C=0,I=0;I<M.length;I++)h=(_.words[I]|0)+(M.words[I]|0)+C,this.words[I]=h&67108863,C=h>>>26;for(;C!==0&&I<_.length;I++)h=(_.words[I]|0)+C,this.words[I]=h&67108863,C=h>>>26;if(this.length=_.length,C!==0)this.words[this.length]=C,this.length++;else if(_!==this)for(;I<_.length;I++)this.words[I]=_.words[I];return this},i.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var _=this.cmp(a);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;var M,C;_>0?(M=this,C=a):(M=a,C=this);for(var I=0,w=0;w<C.length;w++)h=(M.words[w]|0)-(C.words[w]|0)+I,I=h>>26,this.words[w]=h&67108863;for(;I!==0&&w<M.length;w++)h=(M.words[w]|0)+I,I=h>>26,this.words[w]=h&67108863;if(I===0&&w<M.length&&M!==this)for(;w<M.length;w++)this.words[w]=M.words[w];return this.length=Math.max(this.length,w),M!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function $(E,a,h){h.negative=a.negative^E.negative;var _=E.length+a.length|0;h.length=_,_=_-1|0;var M=E.words[0]|0,C=a.words[0]|0,I=M*C,w=I&67108863,p=I/67108864|0;h.words[0]=w;for(var c=1;c<_;c++){for(var f=p>>>26,S=p&67108863,P=Math.min(c,a.length-1),H=Math.max(0,c-E.length+1);H<=P;H++){var nt=c-H|0;M=E.words[nt]|0,C=a.words[H]|0,I=M*C+S,f+=I/67108864|0,S=I&67108863}h.words[c]=S|0,p=f|0}return p!==0?h.words[c]=p|0:h.length--,h._strip()}var V=function(a,h,_){var M=a.words,C=h.words,I=_.words,w=0,p,c,f,S=M[0]|0,P=S&8191,H=S>>>13,nt=M[1]|0,lt=nt&8191,pt=nt>>>13,Ut=M[2]|0,Pt=Ut&8191,Kt=Ut>>>13,tr=M[3]|0,ee=tr&8191,Gt=tr>>>13,$e=M[4]|0,Wt=$e&8191,re=$e>>>13,sn=M[5]|0,Zt=sn&8191,ne=sn>>>13,ae=M[6]|0,Mt=ae&8191,Vt=ae>>>13,xe=M[7]|0,Ht=xe&8191,Jt=xe>>>13,Ce=M[8]|0,qt=Ce&8191,B=Ce>>>13,y=M[9]|0,b=y&8191,U=y>>>13,G=C[0]|0,Y=G&8191,it=G>>>13,xt=C[1]|0,kt=xt&8191,_t=xt>>>13,jt=C[2]|0,vt=jt&8191,Qt=jt>>>13,Fe=C[3]|0,ie=Fe&8191,le=Fe>>>13,Ge=C[4]|0,he=Ge&8191,T=Ge>>>13,m=C[5]|0,v=m&8191,N=m>>>13,Z=C[6]|0,X=Z&8191,st=Z>>>13,Rt=C[7]|0,It=Rt&8191,St=Rt>>>13,te=C[8]|0,Et=te&8191,me=te>>>13,Ma=C[9]|0,we=Ma&8191,be=Ma>>>13;_.negative=a.negative^h.negative,_.length=19,p=Math.imul(P,Y),c=Math.imul(P,it),c=c+Math.imul(H,Y)|0,f=Math.imul(H,it);var ys=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(ys>>>26)|0,ys&=67108863,p=Math.imul(lt,Y),c=Math.imul(lt,it),c=c+Math.imul(pt,Y)|0,f=Math.imul(pt,it),p=p+Math.imul(P,kt)|0,c=c+Math.imul(P,_t)|0,c=c+Math.imul(H,kt)|0,f=f+Math.imul(H,_t)|0;var ms=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(ms>>>26)|0,ms&=67108863,p=Math.imul(Pt,Y),c=Math.imul(Pt,it),c=c+Math.imul(Kt,Y)|0,f=Math.imul(Kt,it),p=p+Math.imul(lt,kt)|0,c=c+Math.imul(lt,_t)|0,c=c+Math.imul(pt,kt)|0,f=f+Math.imul(pt,_t)|0,p=p+Math.imul(P,vt)|0,c=c+Math.imul(P,Qt)|0,c=c+Math.imul(H,vt)|0,f=f+Math.imul(H,Qt)|0;var ws=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(ws>>>26)|0,ws&=67108863,p=Math.imul(ee,Y),c=Math.imul(ee,it),c=c+Math.imul(Gt,Y)|0,f=Math.imul(Gt,it),p=p+Math.imul(Pt,kt)|0,c=c+Math.imul(Pt,_t)|0,c=c+Math.imul(Kt,kt)|0,f=f+Math.imul(Kt,_t)|0,p=p+Math.imul(lt,vt)|0,c=c+Math.imul(lt,Qt)|0,c=c+Math.imul(pt,vt)|0,f=f+Math.imul(pt,Qt)|0,p=p+Math.imul(P,ie)|0,c=c+Math.imul(P,le)|0,c=c+Math.imul(H,ie)|0,f=f+Math.imul(H,le)|0;var bs=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(bs>>>26)|0,bs&=67108863,p=Math.imul(Wt,Y),c=Math.imul(Wt,it),c=c+Math.imul(re,Y)|0,f=Math.imul(re,it),p=p+Math.imul(ee,kt)|0,c=c+Math.imul(ee,_t)|0,c=c+Math.imul(Gt,kt)|0,f=f+Math.imul(Gt,_t)|0,p=p+Math.imul(Pt,vt)|0,c=c+Math.imul(Pt,Qt)|0,c=c+Math.imul(Kt,vt)|0,f=f+Math.imul(Kt,Qt)|0,p=p+Math.imul(lt,ie)|0,c=c+Math.imul(lt,le)|0,c=c+Math.imul(pt,ie)|0,f=f+Math.imul(pt,le)|0,p=p+Math.imul(P,he)|0,c=c+Math.imul(P,T)|0,c=c+Math.imul(H,he)|0,f=f+Math.imul(H,T)|0;var vs=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(vs>>>26)|0,vs&=67108863,p=Math.imul(Zt,Y),c=Math.imul(Zt,it),c=c+Math.imul(ne,Y)|0,f=Math.imul(ne,it),p=p+Math.imul(Wt,kt)|0,c=c+Math.imul(Wt,_t)|0,c=c+Math.imul(re,kt)|0,f=f+Math.imul(re,_t)|0,p=p+Math.imul(ee,vt)|0,c=c+Math.imul(ee,Qt)|0,c=c+Math.imul(Gt,vt)|0,f=f+Math.imul(Gt,Qt)|0,p=p+Math.imul(Pt,ie)|0,c=c+Math.imul(Pt,le)|0,c=c+Math.imul(Kt,ie)|0,f=f+Math.imul(Kt,le)|0,p=p+Math.imul(lt,he)|0,c=c+Math.imul(lt,T)|0,c=c+Math.imul(pt,he)|0,f=f+Math.imul(pt,T)|0,p=p+Math.imul(P,v)|0,c=c+Math.imul(P,N)|0,c=c+Math.imul(H,v)|0,f=f+Math.imul(H,N)|0;var Es=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(Es>>>26)|0,Es&=67108863,p=Math.imul(Mt,Y),c=Math.imul(Mt,it),c=c+Math.imul(Vt,Y)|0,f=Math.imul(Vt,it),p=p+Math.imul(Zt,kt)|0,c=c+Math.imul(Zt,_t)|0,c=c+Math.imul(ne,kt)|0,f=f+Math.imul(ne,_t)|0,p=p+Math.imul(Wt,vt)|0,c=c+Math.imul(Wt,Qt)|0,c=c+Math.imul(re,vt)|0,f=f+Math.imul(re,Qt)|0,p=p+Math.imul(ee,ie)|0,c=c+Math.imul(ee,le)|0,c=c+Math.imul(Gt,ie)|0,f=f+Math.imul(Gt,le)|0,p=p+Math.imul(Pt,he)|0,c=c+Math.imul(Pt,T)|0,c=c+Math.imul(Kt,he)|0,f=f+Math.imul(Kt,T)|0,p=p+Math.imul(lt,v)|0,c=c+Math.imul(lt,N)|0,c=c+Math.imul(pt,v)|0,f=f+Math.imul(pt,N)|0,p=p+Math.imul(P,X)|0,c=c+Math.imul(P,st)|0,c=c+Math.imul(H,X)|0,f=f+Math.imul(H,st)|0;var ks=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(ks>>>26)|0,ks&=67108863,p=Math.imul(Ht,Y),c=Math.imul(Ht,it),c=c+Math.imul(Jt,Y)|0,f=Math.imul(Jt,it),p=p+Math.imul(Mt,kt)|0,c=c+Math.imul(Mt,_t)|0,c=c+Math.imul(Vt,kt)|0,f=f+Math.imul(Vt,_t)|0,p=p+Math.imul(Zt,vt)|0,c=c+Math.imul(Zt,Qt)|0,c=c+Math.imul(ne,vt)|0,f=f+Math.imul(ne,Qt)|0,p=p+Math.imul(Wt,ie)|0,c=c+Math.imul(Wt,le)|0,c=c+Math.imul(re,ie)|0,f=f+Math.imul(re,le)|0,p=p+Math.imul(ee,he)|0,c=c+Math.imul(ee,T)|0,c=c+Math.imul(Gt,he)|0,f=f+Math.imul(Gt,T)|0,p=p+Math.imul(Pt,v)|0,c=c+Math.imul(Pt,N)|0,c=c+Math.imul(Kt,v)|0,f=f+Math.imul(Kt,N)|0,p=p+Math.imul(lt,X)|0,c=c+Math.imul(lt,st)|0,c=c+Math.imul(pt,X)|0,f=f+Math.imul(pt,st)|0,p=p+Math.imul(P,It)|0,c=c+Math.imul(P,St)|0,c=c+Math.imul(H,It)|0,f=f+Math.imul(H,St)|0;var _s=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(_s>>>26)|0,_s&=67108863,p=Math.imul(qt,Y),c=Math.imul(qt,it),c=c+Math.imul(B,Y)|0,f=Math.imul(B,it),p=p+Math.imul(Ht,kt)|0,c=c+Math.imul(Ht,_t)|0,c=c+Math.imul(Jt,kt)|0,f=f+Math.imul(Jt,_t)|0,p=p+Math.imul(Mt,vt)|0,c=c+Math.imul(Mt,Qt)|0,c=c+Math.imul(Vt,vt)|0,f=f+Math.imul(Vt,Qt)|0,p=p+Math.imul(Zt,ie)|0,c=c+Math.imul(Zt,le)|0,c=c+Math.imul(ne,ie)|0,f=f+Math.imul(ne,le)|0,p=p+Math.imul(Wt,he)|0,c=c+Math.imul(Wt,T)|0,c=c+Math.imul(re,he)|0,f=f+Math.imul(re,T)|0,p=p+Math.imul(ee,v)|0,c=c+Math.imul(ee,N)|0,c=c+Math.imul(Gt,v)|0,f=f+Math.imul(Gt,N)|0,p=p+Math.imul(Pt,X)|0,c=c+Math.imul(Pt,st)|0,c=c+Math.imul(Kt,X)|0,f=f+Math.imul(Kt,st)|0,p=p+Math.imul(lt,It)|0,c=c+Math.imul(lt,St)|0,c=c+Math.imul(pt,It)|0,f=f+Math.imul(pt,St)|0,p=p+Math.imul(P,Et)|0,c=c+Math.imul(P,me)|0,c=c+Math.imul(H,Et)|0,f=f+Math.imul(H,me)|0;var Ss=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,p=Math.imul(b,Y),c=Math.imul(b,it),c=c+Math.imul(U,Y)|0,f=Math.imul(U,it),p=p+Math.imul(qt,kt)|0,c=c+Math.imul(qt,_t)|0,c=c+Math.imul(B,kt)|0,f=f+Math.imul(B,_t)|0,p=p+Math.imul(Ht,vt)|0,c=c+Math.imul(Ht,Qt)|0,c=c+Math.imul(Jt,vt)|0,f=f+Math.imul(Jt,Qt)|0,p=p+Math.imul(Mt,ie)|0,c=c+Math.imul(Mt,le)|0,c=c+Math.imul(Vt,ie)|0,f=f+Math.imul(Vt,le)|0,p=p+Math.imul(Zt,he)|0,c=c+Math.imul(Zt,T)|0,c=c+Math.imul(ne,he)|0,f=f+Math.imul(ne,T)|0,p=p+Math.imul(Wt,v)|0,c=c+Math.imul(Wt,N)|0,c=c+Math.imul(re,v)|0,f=f+Math.imul(re,N)|0,p=p+Math.imul(ee,X)|0,c=c+Math.imul(ee,st)|0,c=c+Math.imul(Gt,X)|0,f=f+Math.imul(Gt,st)|0,p=p+Math.imul(Pt,It)|0,c=c+Math.imul(Pt,St)|0,c=c+Math.imul(Kt,It)|0,f=f+Math.imul(Kt,St)|0,p=p+Math.imul(lt,Et)|0,c=c+Math.imul(lt,me)|0,c=c+Math.imul(pt,Et)|0,f=f+Math.imul(pt,me)|0,p=p+Math.imul(P,we)|0,c=c+Math.imul(P,be)|0,c=c+Math.imul(H,we)|0,f=f+Math.imul(H,be)|0;var As=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(As>>>26)|0,As&=67108863,p=Math.imul(b,kt),c=Math.imul(b,_t),c=c+Math.imul(U,kt)|0,f=Math.imul(U,_t),p=p+Math.imul(qt,vt)|0,c=c+Math.imul(qt,Qt)|0,c=c+Math.imul(B,vt)|0,f=f+Math.imul(B,Qt)|0,p=p+Math.imul(Ht,ie)|0,c=c+Math.imul(Ht,le)|0,c=c+Math.imul(Jt,ie)|0,f=f+Math.imul(Jt,le)|0,p=p+Math.imul(Mt,he)|0,c=c+Math.imul(Mt,T)|0,c=c+Math.imul(Vt,he)|0,f=f+Math.imul(Vt,T)|0,p=p+Math.imul(Zt,v)|0,c=c+Math.imul(Zt,N)|0,c=c+Math.imul(ne,v)|0,f=f+Math.imul(ne,N)|0,p=p+Math.imul(Wt,X)|0,c=c+Math.imul(Wt,st)|0,c=c+Math.imul(re,X)|0,f=f+Math.imul(re,st)|0,p=p+Math.imul(ee,It)|0,c=c+Math.imul(ee,St)|0,c=c+Math.imul(Gt,It)|0,f=f+Math.imul(Gt,St)|0,p=p+Math.imul(Pt,Et)|0,c=c+Math.imul(Pt,me)|0,c=c+Math.imul(Kt,Et)|0,f=f+Math.imul(Kt,me)|0,p=p+Math.imul(lt,we)|0,c=c+Math.imul(lt,be)|0,c=c+Math.imul(pt,we)|0,f=f+Math.imul(pt,be)|0;var Is=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(Is>>>26)|0,Is&=67108863,p=Math.imul(b,vt),c=Math.imul(b,Qt),c=c+Math.imul(U,vt)|0,f=Math.imul(U,Qt),p=p+Math.imul(qt,ie)|0,c=c+Math.imul(qt,le)|0,c=c+Math.imul(B,ie)|0,f=f+Math.imul(B,le)|0,p=p+Math.imul(Ht,he)|0,c=c+Math.imul(Ht,T)|0,c=c+Math.imul(Jt,he)|0,f=f+Math.imul(Jt,T)|0,p=p+Math.imul(Mt,v)|0,c=c+Math.imul(Mt,N)|0,c=c+Math.imul(Vt,v)|0,f=f+Math.imul(Vt,N)|0,p=p+Math.imul(Zt,X)|0,c=c+Math.imul(Zt,st)|0,c=c+Math.imul(ne,X)|0,f=f+Math.imul(ne,st)|0,p=p+Math.imul(Wt,It)|0,c=c+Math.imul(Wt,St)|0,c=c+Math.imul(re,It)|0,f=f+Math.imul(re,St)|0,p=p+Math.imul(ee,Et)|0,c=c+Math.imul(ee,me)|0,c=c+Math.imul(Gt,Et)|0,f=f+Math.imul(Gt,me)|0,p=p+Math.imul(Pt,we)|0,c=c+Math.imul(Pt,be)|0,c=c+Math.imul(Kt,we)|0,f=f+Math.imul(Kt,be)|0;var xs=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(xs>>>26)|0,xs&=67108863,p=Math.imul(b,ie),c=Math.imul(b,le),c=c+Math.imul(U,ie)|0,f=Math.imul(U,le),p=p+Math.imul(qt,he)|0,c=c+Math.imul(qt,T)|0,c=c+Math.imul(B,he)|0,f=f+Math.imul(B,T)|0,p=p+Math.imul(Ht,v)|0,c=c+Math.imul(Ht,N)|0,c=c+Math.imul(Jt,v)|0,f=f+Math.imul(Jt,N)|0,p=p+Math.imul(Mt,X)|0,c=c+Math.imul(Mt,st)|0,c=c+Math.imul(Vt,X)|0,f=f+Math.imul(Vt,st)|0,p=p+Math.imul(Zt,It)|0,c=c+Math.imul(Zt,St)|0,c=c+Math.imul(ne,It)|0,f=f+Math.imul(ne,St)|0,p=p+Math.imul(Wt,Et)|0,c=c+Math.imul(Wt,me)|0,c=c+Math.imul(re,Et)|0,f=f+Math.imul(re,me)|0,p=p+Math.imul(ee,we)|0,c=c+Math.imul(ee,be)|0,c=c+Math.imul(Gt,we)|0,f=f+Math.imul(Gt,be)|0;var Bs=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,p=Math.imul(b,he),c=Math.imul(b,T),c=c+Math.imul(U,he)|0,f=Math.imul(U,T),p=p+Math.imul(qt,v)|0,c=c+Math.imul(qt,N)|0,c=c+Math.imul(B,v)|0,f=f+Math.imul(B,N)|0,p=p+Math.imul(Ht,X)|0,c=c+Math.imul(Ht,st)|0,c=c+Math.imul(Jt,X)|0,f=f+Math.imul(Jt,st)|0,p=p+Math.imul(Mt,It)|0,c=c+Math.imul(Mt,St)|0,c=c+Math.imul(Vt,It)|0,f=f+Math.imul(Vt,St)|0,p=p+Math.imul(Zt,Et)|0,c=c+Math.imul(Zt,me)|0,c=c+Math.imul(ne,Et)|0,f=f+Math.imul(ne,me)|0,p=p+Math.imul(Wt,we)|0,c=c+Math.imul(Wt,be)|0,c=c+Math.imul(re,we)|0,f=f+Math.imul(re,be)|0;var Rs=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,p=Math.imul(b,v),c=Math.imul(b,N),c=c+Math.imul(U,v)|0,f=Math.imul(U,N),p=p+Math.imul(qt,X)|0,c=c+Math.imul(qt,st)|0,c=c+Math.imul(B,X)|0,f=f+Math.imul(B,st)|0,p=p+Math.imul(Ht,It)|0,c=c+Math.imul(Ht,St)|0,c=c+Math.imul(Jt,It)|0,f=f+Math.imul(Jt,St)|0,p=p+Math.imul(Mt,Et)|0,c=c+Math.imul(Mt,me)|0,c=c+Math.imul(Vt,Et)|0,f=f+Math.imul(Vt,me)|0,p=p+Math.imul(Zt,we)|0,c=c+Math.imul(Zt,be)|0,c=c+Math.imul(ne,we)|0,f=f+Math.imul(ne,be)|0;var Ts=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,p=Math.imul(b,X),c=Math.imul(b,st),c=c+Math.imul(U,X)|0,f=Math.imul(U,st),p=p+Math.imul(qt,It)|0,c=c+Math.imul(qt,St)|0,c=c+Math.imul(B,It)|0,f=f+Math.imul(B,St)|0,p=p+Math.imul(Ht,Et)|0,c=c+Math.imul(Ht,me)|0,c=c+Math.imul(Jt,Et)|0,f=f+Math.imul(Jt,me)|0,p=p+Math.imul(Mt,we)|0,c=c+Math.imul(Mt,be)|0,c=c+Math.imul(Vt,we)|0,f=f+Math.imul(Vt,be)|0;var Ls=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,p=Math.imul(b,It),c=Math.imul(b,St),c=c+Math.imul(U,It)|0,f=Math.imul(U,St),p=p+Math.imul(qt,Et)|0,c=c+Math.imul(qt,me)|0,c=c+Math.imul(B,Et)|0,f=f+Math.imul(B,me)|0,p=p+Math.imul(Ht,we)|0,c=c+Math.imul(Ht,be)|0,c=c+Math.imul(Jt,we)|0,f=f+Math.imul(Jt,be)|0;var Ms=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,p=Math.imul(b,Et),c=Math.imul(b,me),c=c+Math.imul(U,Et)|0,f=Math.imul(U,me),p=p+Math.imul(qt,we)|0,c=c+Math.imul(qt,be)|0,c=c+Math.imul(B,we)|0,f=f+Math.imul(B,be)|0;var Ps=(w+p|0)+((c&8191)<<13)|0;w=(f+(c>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,p=Math.imul(b,we),c=Math.imul(b,be),c=c+Math.imul(U,we)|0,f=Math.imul(U,be);var Cs=(w+p|0)+((c&8191)<<13)|0;return w=(f+(c>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,I[0]=ys,I[1]=ms,I[2]=ws,I[3]=bs,I[4]=vs,I[5]=Es,I[6]=ks,I[7]=_s,I[8]=Ss,I[9]=As,I[10]=Is,I[11]=xs,I[12]=Bs,I[13]=Rs,I[14]=Ts,I[15]=Ls,I[16]=Ms,I[17]=Ps,I[18]=Cs,w!==0&&(I[19]=w,_.length++),_};Math.imul||(V=$);function z(E,a,h){h.negative=a.negative^E.negative,h.length=E.length+a.length;for(var _=0,M=0,C=0;C<h.length-1;C++){var I=M;M=0;for(var w=_&67108863,p=Math.min(C,a.length-1),c=Math.max(0,C-E.length+1);c<=p;c++){var f=C-c,S=E.words[f]|0,P=a.words[c]|0,H=S*P,nt=H&67108863;I=I+(H/67108864|0)|0,nt=nt+w|0,w=nt&67108863,I=I+(nt>>>26)|0,M+=I>>>26,I&=67108863}h.words[C]=w,_=I,I=M}return _!==0?h.words[C]=_:h.length--,h._strip()}function j(E,a,h){return z(E,a,h)}i.prototype.mulTo=function(a,h){var _,M=this.length+a.length;return this.length===10&&a.length===10?_=V(this,a,h):M<63?_=$(this,a,h):M<1024?_=z(this,a,h):_=j(this,a,h),_},i.prototype.mul=function(a){var h=new i(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},i.prototype.mulf=function(a){var h=new i(null);return h.words=new Array(this.length+a.length),j(this,a,h)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var h=a<0;h&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var _=0,M=0;M<this.length;M++){var C=(this.words[M]|0)*a,I=(C&67108863)+(_&67108863);_>>=26,_+=C/67108864|0,_+=I>>>26,this.words[M]=I&67108863}return _!==0&&(this.words[M]=_,this.length++),this.length=a===0?1:this.length,h?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var h=O(a);if(h.length===0)return new i(1);for(var _=this,M=0;M<h.length&&h[M]===0;M++,_=_.sqr());if(++M<h.length)for(var C=_.sqr();M<h.length;M++,C=C.sqr())h[M]!==0&&(_=_.mul(C));return _},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var h=a%26,_=(a-h)/26,M=67108863>>>26-h<<26-h,C;if(h!==0){var I=0;for(C=0;C<this.length;C++){var w=this.words[C]&M,p=(this.words[C]|0)-w<<h;this.words[C]=p|I,I=w>>>26-h}I&&(this.words[C]=I,this.length++)}if(_!==0){for(C=this.length-1;C>=0;C--)this.words[C+_]=this.words[C];for(C=0;C<_;C++)this.words[C]=0;this.length+=_}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,h,_){r(typeof a=="number"&&a>=0);var M;h?M=(h-h%26)/26:M=0;var C=a%26,I=Math.min((a-C)/26,this.length),w=67108863^67108863>>>C<<C,p=_;if(M-=I,M=Math.max(0,M),p){for(var c=0;c<I;c++)p.words[c]=this.words[c];p.length=I}if(I!==0)if(this.length>I)for(this.length-=I,c=0;c<this.length;c++)this.words[c]=this.words[c+I];else this.words[0]=0,this.length=1;var f=0;for(c=this.length-1;c>=0&&(f!==0||c>=M);c--){var S=this.words[c]|0;this.words[c]=f<<26-C|S>>>C,f=S&w}return p&&f!==0&&(p.words[p.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,h,_){return r(this.negative===0),this.iushrn(a,h,_)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var h=a%26,_=(a-h)/26,M=1<<h;if(this.length<=_)return!1;var C=this.words[_];return!!(C&M)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var h=a%26,_=(a-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(h!==0&&_++,this.length=Math.min(_,this.length),h!==0){var M=67108863^67108863>>>h<<h;this.words[this.length-1]&=M}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,h,_){var M=a.length+_,C;this._expand(M);var I,w=0;for(C=0;C<a.length;C++){I=(this.words[C+_]|0)+w;var p=(a.words[C]|0)*h;I-=p&67108863,w=(I>>26)-(p/67108864|0),this.words[C+_]=I&67108863}for(;C<this.length-_;C++)I=(this.words[C+_]|0)+w,w=I>>26,this.words[C+_]=I&67108863;if(w===0)return this._strip();for(r(w===-1),w=0,C=0;C<this.length;C++)I=-(this.words[C]|0)+w,w=I>>26,this.words[C]=I&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,h){var _=this.length-a.length,M=this.clone(),C=a,I=C.words[C.length-1]|0,w=this._countBits(I);_=26-w,_!==0&&(C=C.ushln(_),M.iushln(_),I=C.words[C.length-1]|0);var p=M.length-C.length,c;if(h!=="mod"){c=new i(null),c.length=p+1,c.words=new Array(c.length);for(var f=0;f<c.length;f++)c.words[f]=0}var S=M.clone()._ishlnsubmul(C,1,p);S.negative===0&&(M=S,c&&(c.words[p]=1));for(var P=p-1;P>=0;P--){var H=(M.words[C.length+P]|0)*67108864+(M.words[C.length+P-1]|0);for(H=Math.min(H/I|0,67108863),M._ishlnsubmul(C,H,P);M.negative!==0;)H--,M.negative=0,M._ishlnsubmul(C,1,P),M.isZero()||(M.negative^=1);c&&(c.words[P]=H)}return c&&c._strip(),M._strip(),h!=="div"&&_!==0&&M.iushrn(_),{div:c||null,mod:M}},i.prototype.divmod=function(a,h,_){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var M,C,I;return this.negative!==0&&a.negative===0?(I=this.neg().divmod(a,h),h!=="mod"&&(M=I.div.neg()),h!=="div"&&(C=I.mod.neg(),_&&C.negative!==0&&C.iadd(a)),{div:M,mod:C}):this.negative===0&&a.negative!==0?(I=this.divmod(a.neg(),h),h!=="mod"&&(M=I.div.neg()),{div:M,mod:I.mod}):(this.negative&a.negative)!==0?(I=this.neg().divmod(a.neg(),h),h!=="div"&&(C=I.mod.neg(),_&&C.negative!==0&&C.isub(a)),{div:I.div,mod:C}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,h)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var _=h.div.negative!==0?h.mod.isub(a):h.mod,M=a.ushrn(1),C=a.andln(1),I=_.cmp(M);return I<0||C===1&&I===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(a){var h=a<0;h&&(a=-a),r(a<=67108863);for(var _=(1<<26)%a,M=0,C=this.length-1;C>=0;C--)M=(_*M+(this.words[C]|0))%a;return h?-M:M},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var h=a<0;h&&(a=-a),r(a<=67108863);for(var _=0,M=this.length-1;M>=0;M--){var C=(this.words[M]|0)+_*67108864;this.words[M]=C/a|0,_=C%a}return this._strip(),h?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var h=this,_=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var M=new i(1),C=new i(0),I=new i(0),w=new i(1),p=0;h.isEven()&&_.isEven();)h.iushrn(1),_.iushrn(1),++p;for(var c=_.clone(),f=h.clone();!h.isZero();){for(var S=0,P=1;(h.words[0]&P)===0&&S<26;++S,P<<=1);if(S>0)for(h.iushrn(S);S-- >0;)(M.isOdd()||C.isOdd())&&(M.iadd(c),C.isub(f)),M.iushrn(1),C.iushrn(1);for(var H=0,nt=1;(_.words[0]&nt)===0&&H<26;++H,nt<<=1);if(H>0)for(_.iushrn(H);H-- >0;)(I.isOdd()||w.isOdd())&&(I.iadd(c),w.isub(f)),I.iushrn(1),w.iushrn(1);h.cmp(_)>=0?(h.isub(_),M.isub(I),C.isub(w)):(_.isub(h),I.isub(M),w.isub(C))}return{a:I,b:w,gcd:_.iushln(p)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var h=this,_=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var M=new i(1),C=new i(0),I=_.clone();h.cmpn(1)>0&&_.cmpn(1)>0;){for(var w=0,p=1;(h.words[0]&p)===0&&w<26;++w,p<<=1);if(w>0)for(h.iushrn(w);w-- >0;)M.isOdd()&&M.iadd(I),M.iushrn(1);for(var c=0,f=1;(_.words[0]&f)===0&&c<26;++c,f<<=1);if(c>0)for(_.iushrn(c);c-- >0;)C.isOdd()&&C.iadd(I),C.iushrn(1);h.cmp(_)>=0?(h.isub(_),M.isub(C)):(_.isub(h),C.isub(M))}var S;return h.cmpn(1)===0?S=M:S=C,S.cmpn(0)<0&&S.iadd(a),S},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),_=a.clone();h.negative=0,_.negative=0;for(var M=0;h.isEven()&&_.isEven();M++)h.iushrn(1),_.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;_.isEven();)_.iushrn(1);var C=h.cmp(_);if(C<0){var I=h;h=_,_=I}else if(C===0||_.cmpn(1)===0)break;h.isub(_)}while(!0);return _.iushln(M)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var h=a%26,_=(a-h)/26,M=1<<h;if(this.length<=_)return this._expand(_+1),this.words[_]|=M,this;for(var C=M,I=_;C!==0&&I<this.length;I++){var w=this.words[I]|0;w+=C,C=w>>>26,w&=67108863,this.words[I]=w}return C!==0&&(this.words[I]=C,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var _;if(this.length>1)_=1;else{h&&(a=-a),r(a<=67108863,"Number is too big");var M=this.words[0]|0;_=M===a?0:M<a?-1:1}return this.negative!==0?-_|0:_},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,_=this.length-1;_>=0;_--){var M=this.words[_]|0,C=a.words[_]|0;if(M!==C){M<C?h=-1:M>C&&(h=1);break}}return h},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new W(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var et={k256:null,p224:null,p192:null,p25519:null};function ot(E,a){this.name=E,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ot.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},ot.prototype.ireduce=function(a){var h=a,_;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),_=h.bitLength();while(_>this.n);var M=_<this.n?-1:h.ucmp(this.p);return M===0?(h.words[0]=0,h.length=1):M>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},ot.prototype.split=function(a,h){a.iushrn(this.n,0,h)},ot.prototype.imulK=function(a){return a.imul(this.k)};function Q(){ot.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Q,ot),Q.prototype.split=function(a,h){for(var _=4194303,M=Math.min(a.length,9),C=0;C<M;C++)h.words[C]=a.words[C];if(h.length=M,a.length<=9){a.words[0]=0,a.length=1;return}var I=a.words[9];for(h.words[h.length++]=I&_,C=10;C<a.length;C++){var w=a.words[C]|0;a.words[C-10]=(w&_)<<4|I>>>22,I=w}I>>>=22,a.words[C-10]=I,I===0&&a.length>10?a.length-=10:a.length-=9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,_=0;_<a.length;_++){var M=a.words[_]|0;h+=M*977,a.words[_]=h&67108863,h=M*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function rt(){ot.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(rt,ot);function q(){ot.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(q,ot);function F(){ot.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(F,ot),F.prototype.imulK=function(a){for(var h=0,_=0;_<a.length;_++){var M=(a.words[_]|0)*19+h,C=M&67108863;M>>>=26,a.words[_]=C,h=M}return h!==0&&(a.words[a.length++]=h),a},i._prime=function(a){if(et[a])return et[a];var h;if(a==="k256")h=new Q;else if(a==="p224")h=new rt;else if(a==="p192")h=new q;else if(a==="p25519")h=new F;else throw new Error("Unknown prime "+a);return et[a]=h,h};function W(E){if(typeof E=="string"){var a=i._prime(E);this.m=a.p,this.prime=a}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}W.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},W.prototype._verify2=function(a,h){r((a.negative|h.negative)===0,"red works only with positives"),r(a.red&&a.red===h.red,"red works only with red numbers")},W.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(d(a,a.umod(this.m)._forceRed(this)),a)},W.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},W.prototype.add=function(a,h){this._verify2(a,h);var _=a.add(h);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},W.prototype.iadd=function(a,h){this._verify2(a,h);var _=a.iadd(h);return _.cmp(this.m)>=0&&_.isub(this.m),_},W.prototype.sub=function(a,h){this._verify2(a,h);var _=a.sub(h);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},W.prototype.isub=function(a,h){this._verify2(a,h);var _=a.isub(h);return _.cmpn(0)<0&&_.iadd(this.m),_},W.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},W.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},W.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},W.prototype.isqr=function(a){return this.imul(a,a.clone())},W.prototype.sqr=function(a){return this.mul(a,a)},W.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var _=this.m.add(new i(1)).iushrn(2);return this.pow(a,_)}for(var M=this.m.subn(1),C=0;!M.isZero()&&M.andln(1)===0;)C++,M.iushrn(1);r(!M.isZero());var I=new i(1).toRed(this),w=I.redNeg(),p=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,p).cmp(w)!==0;)c.redIAdd(w);for(var f=this.pow(c,M),S=this.pow(a,M.addn(1).iushrn(1)),P=this.pow(a,M),H=C;P.cmp(I)!==0;){for(var nt=P,lt=0;nt.cmp(I)!==0;lt++)nt=nt.redSqr();r(lt<H);var pt=this.pow(f,new i(1).iushln(H-lt-1));S=S.redMul(pt),f=pt.redSqr(),P=P.redMul(f),H=lt}return S},W.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},W.prototype.pow=function(a,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var _=4,M=new Array(1<<_);M[0]=new i(1).toRed(this),M[1]=a;for(var C=2;C<M.length;C++)M[C]=this.mul(M[C-1],a);var I=M[0],w=0,p=0,c=h.bitLength()%26;for(c===0&&(c=26),C=h.length-1;C>=0;C--){for(var f=h.words[C],S=c-1;S>=0;S--){var P=f>>S&1;if(I!==M[0]&&(I=this.sqr(I)),P===0&&w===0){p=0;continue}w<<=1,w|=P,p++,!(p!==_&&(C!==0||S!==0))&&(I=this.mul(I,M[w]),p=0,w=0)}c=26}return I},W.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},W.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},i.mont=function(a){return new L(a)};function L(E){W.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(L,W),L.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},L.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},L.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var _=a.imul(h),M=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=_.isub(M).iushrn(this.shift),I=C;return C.cmp(this.m)>=0?I=C.isub(this.m):C.cmpn(0)<0&&(I=C.iadd(this.m)),I._forceRed(this)},L.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new i(0)._forceRed(this);var _=a.mul(h),M=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=_.isub(M).iushrn(this.shift),I=C;return C.cmp(this.m)>=0?I=C.isub(this.m):C.cmpn(0)<0&&(I=C.iadd(this.m)),I._forceRed(this)},L.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(n,Gf)})(Si)),Si.exports}var Zf=Qo();const Pi=An(Zf);var di={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ga;function Yf(){return Ga||(Ga=1,(function(n,t){var e=Jo(),r=e.Buffer;function s(o,u){for(var l in o)u[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(o,u,l){return r(o,u,l)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,u,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,u,l)},i.alloc=function(o,u,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var g=r(o);return u!==void 0?typeof l=="string"?g.fill(u,l):g.fill(u):g.fill(0),g},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(di,di.exports)),di.exports}var $s,Za;function Xf(){if(Za)return $s;Za=1;var n=Yf().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),u=o.charCodeAt(0);if(r[u]!==255)throw new TypeError(o+" is ambiguous");r[u]=i}var l=e.length,g=e.charAt(0),d=Math.log(l)/Math.log(256),x=Math.log(256)/Math.log(l);function A(D){if((Array.isArray(D)||D instanceof Uint8Array)&&(D=n.from(D)),!n.isBuffer(D))throw new TypeError("Expected Buffer");if(D.length===0)return"";for(var O=0,$=0,V=0,z=D.length;V!==z&&D[V]===0;)V++,O++;for(var j=(z-V)*x+1>>>0,et=new Uint8Array(j);V!==z;){for(var ot=D[V],Q=0,rt=j-1;(ot!==0||Q<$)&&rt!==-1;rt--,Q++)ot+=256*et[rt]>>>0,et[rt]=ot%l>>>0,ot=ot/l>>>0;if(ot!==0)throw new Error("Non-zero carry");$=Q,V++}for(var q=j-$;q!==j&&et[q]===0;)q++;for(var F=g.repeat(O);q<j;++q)F+=e.charAt(et[q]);return F}function k(D){if(typeof D!="string")throw new TypeError("Expected String");if(D.length===0)return n.alloc(0);for(var O=0,$=0,V=0;D[O]===g;)$++,O++;for(var z=(D.length-O)*d+1>>>0,j=new Uint8Array(z);O<D.length;){var et=D.charCodeAt(O);if(et>255)return;var ot=r[et];if(ot===255)return;for(var Q=0,rt=z-1;(ot!==0||Q<V)&&rt!==-1;rt--,Q++)ot+=l*j[rt]>>>0,j[rt]=ot%256>>>0,ot=ot/256>>>0;if(ot!==0)throw new Error("Non-zero carry");V=Q,O++}for(var q=z-V;q!==z&&j[q]===0;)q++;var F=n.allocUnsafe($+(z-q));F.fill(0,0,$);for(var W=$;q!==z;)F[W++]=j[q++];return F}function R(D){var O=k(D);if(O)return O;throw new Error("Non-base"+l+" character")}return{encode:A,decodeUnsafe:k,decode:R}}return $s=t,$s}var Ws,Ya;function Xu(){if(Ya)return Ws;Ya=1;var n=Xf(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Ws=n(t),Ws}var Jf=Xu();const pe=An(Jf),Ci=Tu;var $t={};function wr(n,t,e){return t<=n&&n<=e}function Xi(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Qf(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var u=i&1023,l=o&1023;s.push(65536+(u<<10)+l),r+=1}else s.push(65533)}r+=1}return s}function td(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Oi=-1;function ta(n){this.tokens=[].slice.call(n)}ta.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Oi},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var _n=-1;function Vs(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Ui="utf-8";function Ni(n,t){if(!(this instanceof Ni))return new Ni(n,t);if(n=n!==void 0?String(n).toLowerCase():Ui,n!==Ui)throw new Error("Encoding not supported. Only utf-8 is supported");t=Xi(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Ni.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Xi(e),this._streaming||(this._decoder=new ed({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new ta(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==_n);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===_n)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),td(i)}};function Di(n,t){if(!(this instanceof Di))return new Di(n,t);if(n=n!==void 0?String(n).toLowerCase():Ui,n!==Ui)throw new Error("Encoding not supported. Only utf-8 is supported");t=Xi(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Di.prototype={encode:function(t,e){t=t?String(t):"",e=Xi(e),this._streaming||(this._encoder=new rd(this._options)),this._streaming=!!e.stream;for(var r=[],s=new ta(Qf(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==_n);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==_n;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function ed(n){var t=n.fatal,e=0,r=0,s=0,i=128,o=191;this.handler=function(u,l){if(l===Oi&&s!==0)return s=0,Vs(t);if(l===Oi)return _n;if(s===0){if(wr(l,0,127))return l;if(wr(l,194,223))s=1,e=l-192;else if(wr(l,224,239))l===224&&(i=160),l===237&&(o=159),s=2,e=l-224;else if(wr(l,240,244))l===240&&(i=144),l===244&&(o=143),s=3,e=l-240;else return Vs(t);return e=e<<6*s,null}if(!wr(l,i,o))return e=s=r=0,i=128,o=191,u.prepend(l),Vs(t);if(i=128,o=191,r+=1,e+=l-128<<6*(s-r),r!==s)return null;var g=e;return e=s=r=0,g}}function rd(n){n.fatal,this.handler=function(t,e){if(e===Oi)return _n;if(wr(e,0,127))return e;var r,s;wr(e,128,2047)?(r=1,s=192):wr(e,2048,65535)?(r=2,s=224):wr(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var o=e>>6*(r-1);i.push(128|o&63),r-=1}return i}}const nd=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Ni,TextEncoder:Di},Symbol.toStringTag,{value:"Module"})),id=qo(nd);var Xa;function sd(){if(Xa)return $t;Xa=1;var n=$t&&$t.__createBinding||(Object.create?(function(q,F,W,L){L===void 0&&(L=W),Object.defineProperty(q,L,{enumerable:!0,get:function(){return F[W]}})}):(function(q,F,W,L){L===void 0&&(L=W),q[L]=F[W]})),t=$t&&$t.__setModuleDefault||(Object.create?(function(q,F){Object.defineProperty(q,"default",{enumerable:!0,value:F})}):function(q,F){q.default=F}),e=$t&&$t.__decorate||function(q,F,W,L){var E=arguments.length,a=E<3?F:L===null?L=Object.getOwnPropertyDescriptor(F,W):L,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(q,F,W,L);else for(var _=q.length-1;_>=0;_--)(h=q[_])&&(a=(E<3?h(a):E>3?h(F,W,a):h(F,W))||a);return E>3&&a&&Object.defineProperty(F,W,a),a},r=$t&&$t.__importStar||function(q){if(q&&q.__esModule)return q;var F={};if(q!=null)for(var W in q)W!=="default"&&Object.hasOwnProperty.call(q,W)&&n(F,q,W);return t(F,q),F},s=$t&&$t.__importDefault||function(q){return q&&q.__esModule?q:{default:q}};Object.defineProperty($t,"__esModule",{value:!0}),$t.deserializeUnchecked=$t.deserialize=$t.serialize=$t.BinaryReader=$t.BinaryWriter=$t.BorshError=$t.baseDecode=$t.baseEncode=void 0;const i=s(Qo()),o=s(Xu()),u=r(id),l=typeof TextDecoder!="function"?u.TextDecoder:TextDecoder,g=new l("utf-8",{fatal:!0});function d(q){return typeof q=="string"&&(q=At.from(q,"utf8")),o.default.encode(At.from(q))}$t.baseEncode=d;function x(q){return At.from(o.default.decode(q))}$t.baseDecode=x;const A=1024;class k extends Error{constructor(F){super(F),this.fieldPath=[],this.originalMessage=F}addToFieldPath(F){this.fieldPath.splice(0,0,F),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}$t.BorshError=k;class R{constructor(){this.buf=At.alloc(A),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=At.concat([this.buf,At.alloc(A)]))}writeU8(F){this.maybeResize(),this.buf.writeUInt8(F,this.length),this.length+=1}writeU16(F){this.maybeResize(),this.buf.writeUInt16LE(F,this.length),this.length+=2}writeU32(F){this.maybeResize(),this.buf.writeUInt32LE(F,this.length),this.length+=4}writeU64(F){this.maybeResize(),this.writeBuffer(At.from(new i.default(F).toArray("le",8)))}writeU128(F){this.maybeResize(),this.writeBuffer(At.from(new i.default(F).toArray("le",16)))}writeU256(F){this.maybeResize(),this.writeBuffer(At.from(new i.default(F).toArray("le",32)))}writeU512(F){this.maybeResize(),this.writeBuffer(At.from(new i.default(F).toArray("le",64)))}writeBuffer(F){this.buf=At.concat([At.from(this.buf.subarray(0,this.length)),F,At.alloc(A)]),this.length+=F.length}writeString(F){this.maybeResize();const W=At.from(F,"utf8");this.writeU32(W.length),this.writeBuffer(W)}writeFixedArray(F){this.writeBuffer(At.from(F))}writeArray(F,W){this.maybeResize(),this.writeU32(F.length);for(const L of F)this.maybeResize(),W(L)}toArray(){return this.buf.subarray(0,this.length)}}$t.BinaryWriter=R;function D(q,F,W){const L=W.value;W.value=function(...E){try{return L.apply(this,E)}catch(a){if(a instanceof RangeError){const h=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(h)>=0)throw new k("Reached the end of buffer when deserializing")}throw a}}}class O{constructor(F){this.buf=F,this.offset=0}readU8(){const F=this.buf.readUInt8(this.offset);return this.offset+=1,F}readU16(){const F=this.buf.readUInt16LE(this.offset);return this.offset+=2,F}readU32(){const F=this.buf.readUInt32LE(this.offset);return this.offset+=4,F}readU64(){const F=this.readBuffer(8);return new i.default(F,"le")}readU128(){const F=this.readBuffer(16);return new i.default(F,"le")}readU256(){const F=this.readBuffer(32);return new i.default(F,"le")}readU512(){const F=this.readBuffer(64);return new i.default(F,"le")}readBuffer(F){if(this.offset+F>this.buf.length)throw new k(`Expected buffer length ${F} isn't within bounds`);const W=this.buf.slice(this.offset,this.offset+F);return this.offset+=F,W}readString(){const F=this.readU32(),W=this.readBuffer(F);try{return g.decode(W)}catch(L){throw new k(`Error decoding UTF-8 string: ${L}`)}}readFixedArray(F){return new Uint8Array(this.readBuffer(F))}readArray(F){const W=this.readU32(),L=Array();for(let E=0;E<W;++E)L.push(F());return L}}e([D],O.prototype,"readU8",null),e([D],O.prototype,"readU16",null),e([D],O.prototype,"readU32",null),e([D],O.prototype,"readU64",null),e([D],O.prototype,"readU128",null),e([D],O.prototype,"readU256",null),e([D],O.prototype,"readU512",null),e([D],O.prototype,"readString",null),e([D],O.prototype,"readFixedArray",null),e([D],O.prototype,"readArray",null),$t.BinaryReader=O;function $(q){return q.charAt(0).toUpperCase()+q.slice(1)}function V(q,F,W,L,E){try{if(typeof L=="string")E[`write${$(L)}`](W);else if(L instanceof Array)if(typeof L[0]=="number"){if(W.length!==L[0])throw new k(`Expecting byte array of length ${L[0]}, but got ${W.length} bytes`);E.writeFixedArray(W)}else if(L.length===2&&typeof L[1]=="number"){if(W.length!==L[1])throw new k(`Expecting byte array of length ${L[1]}, but got ${W.length} bytes`);for(let a=0;a<L[1];a++)V(q,null,W[a],L[0],E)}else E.writeArray(W,a=>{V(q,F,a,L[0],E)});else if(L.kind!==void 0)switch(L.kind){case"option":{W==null?E.writeU8(0):(E.writeU8(1),V(q,F,W,L.type,E));break}case"map":{E.writeU32(W.size),W.forEach((a,h)=>{V(q,F,h,L.key,E),V(q,F,a,L.value,E)});break}default:throw new k(`FieldType ${L} unrecognized`)}else z(q,W,E)}catch(a){throw a instanceof k&&a.addToFieldPath(F),a}}function z(q,F,W){if(typeof F.borshSerialize=="function"){F.borshSerialize(W);return}const L=q.get(F.constructor);if(!L)throw new k(`Class ${F.constructor.name} is missing in schema`);if(L.kind==="struct")L.fields.map(([E,a])=>{V(q,E,F[E],a,W)});else if(L.kind==="enum"){const E=F[L.field];for(let a=0;a<L.values.length;++a){const[h,_]=L.values[a];if(h===E){W.writeU8(a),V(q,h,F[h],_,W);break}}}else throw new k(`Unexpected schema kind: ${L.kind} for ${F.constructor.name}`)}function j(q,F,W=R){const L=new W;return z(q,F,L),L.toArray()}$t.serialize=j;function et(q,F,W,L){try{if(typeof W=="string")return L[`read${$(W)}`]();if(W instanceof Array){if(typeof W[0]=="number")return L.readFixedArray(W[0]);if(typeof W[1]=="number"){const E=[];for(let a=0;a<W[1];a++)E.push(et(q,null,W[0],L));return E}else return L.readArray(()=>et(q,F,W[0],L))}if(W.kind==="option")return L.readU8()?et(q,F,W.type,L):void 0;if(W.kind==="map"){let E=new Map;const a=L.readU32();for(let h=0;h<a;h++){const _=et(q,F,W.key,L),M=et(q,F,W.value,L);E.set(_,M)}return E}return ot(q,W,L)}catch(E){throw E instanceof k&&E.addToFieldPath(F),E}}function ot(q,F,W){if(typeof F.borshDeserialize=="function")return F.borshDeserialize(W);const L=q.get(F);if(!L)throw new k(`Class ${F.name} is missing in schema`);if(L.kind==="struct"){const E={};for(const[a,h]of q.get(F).fields)E[a]=et(q,a,h,W);return new F(E)}if(L.kind==="enum"){const E=W.readU8();if(E>=L.values.length)throw new k(`Enum index: ${E} is out of range`);const[a,h]=L.values[E],_=et(q,a,h,W);return new F({[a]:_})}throw new k(`Unexpected schema kind: ${L.kind} for ${F.constructor.name}`)}function Q(q,F,W,L=O){const E=new L(W),a=ot(q,F,E);if(E.offset<W.length)throw new k(`Unexpected ${W.length-E.offset} bytes after deserialized data`);return a}$t.deserialize=Q;function rt(q,F,W,L=O){const E=new L(W);return ot(q,F,E)}return $t.deserializeUnchecked=rt,$t}var Hs=sd(),tt={},Ja;function od(){if(Ja)return tt;Ja=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.s16=tt.s8=tt.nu64be=tt.u48be=tt.u40be=tt.u32be=tt.u24be=tt.u16be=tt.nu64=tt.u48=tt.u40=tt.u32=tt.u24=tt.u16=tt.u8=tt.offset=tt.greedy=tt.Constant=tt.UTF8=tt.CString=tt.Blob=tt.Boolean=tt.BitField=tt.BitStructure=tt.VariantLayout=tt.Union=tt.UnionLayoutDiscriminator=tt.UnionDiscriminator=tt.Structure=tt.Sequence=tt.DoubleBE=tt.Double=tt.FloatBE=tt.Float=tt.NearInt64BE=tt.NearInt64=tt.NearUInt64BE=tt.NearUInt64=tt.IntBE=tt.Int=tt.UIntBE=tt.UInt=tt.OffsetLayout=tt.GreedyCount=tt.ExternalLayout=tt.bindConstructorLayout=tt.nameWithProperty=tt.Layout=tt.uint8ArrayToBuffer=tt.checkUint8Array=void 0,tt.constant=tt.utf8=tt.cstr=tt.blob=tt.unionLayoutDiscriminator=tt.union=tt.seq=tt.bits=tt.struct=tt.f64be=tt.f64=tt.f32be=tt.f32=tt.ns64be=tt.s48be=tt.s40be=tt.s32be=tt.s24be=tt.s16be=tt.ns64=tt.s48=tt.s40=tt.s32=tt.s24=void 0;const n=Jo();function t(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}tt.checkUint8Array=t;function e(c){return t(c),n.Buffer.from(c.buffer,c.byteOffset,c.length)}tt.uint8ArrayToBuffer=e;class r{constructor(f,S){if(!Number.isInteger(f))throw new TypeError("span must be an integer");this.span=f,this.property=S}makeDestinationObject(){return{}}getSpan(f,S){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(f){const S=Object.create(this.constructor.prototype);return Object.assign(S,this),S.property=f,S}fromArray(f){}}tt.Layout=r;function s(c,f){return f.property?c+"["+f.property+"]":c}tt.nameWithProperty=s;function i(c,f){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(f&&f instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(f,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=f,f.boundConstructor_=c,f.makeDestinationObject=(()=>new c),Object.defineProperty(c.prototype,"encode",{value(S,P){return f.encode(this,S,P)},writable:!0}),Object.defineProperty(c,"decode",{value(S,P){return f.decode(S,P)},writable:!0})}tt.bindConstructorLayout=i;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}tt.ExternalLayout=o;class u extends o{constructor(f=1,S){if(!Number.isInteger(f)||0>=f)throw new TypeError("elementSpan must be a (positive) integer");super(-1,S),this.elementSpan=f}isCount(){return!0}decode(f,S=0){t(f);const P=f.length-S;return Math.floor(P/this.elementSpan)}encode(f,S,P){return 0}}tt.GreedyCount=u;class l extends o{constructor(f,S=0,P){if(!(f instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(S))throw new TypeError("offset must be integer or undefined");super(f.span,P||f.property),this.layout=f,this.offset=S}isCount(){return this.layout instanceof g||this.layout instanceof d}decode(f,S=0){return this.layout.decode(f,S+this.offset)}encode(f,S,P=0){return this.layout.encode(f,S,P+this.offset)}}tt.OffsetLayout=l;class g extends r{constructor(f,S){if(super(f,S),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,S=0){return e(f).readUIntLE(S,this.span)}encode(f,S,P=0){return e(S).writeUIntLE(f,P,this.span),this.span}}tt.UInt=g;class d extends r{constructor(f,S){if(super(f,S),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,S=0){return e(f).readUIntBE(S,this.span)}encode(f,S,P=0){return e(S).writeUIntBE(f,P,this.span),this.span}}tt.UIntBE=d;class x extends r{constructor(f,S){if(super(f,S),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,S=0){return e(f).readIntLE(S,this.span)}encode(f,S,P=0){return e(S).writeIntLE(f,P,this.span),this.span}}tt.Int=x;class A extends r{constructor(f,S){if(super(f,S),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,S=0){return e(f).readIntBE(S,this.span)}encode(f,S,P=0){return e(S).writeIntBE(f,P,this.span),this.span}}tt.IntBE=A;const k=Math.pow(2,32);function R(c){const f=Math.floor(c/k),S=c-f*k;return{hi32:f,lo32:S}}function D(c,f){return c*k+f}class O extends r{constructor(f){super(8,f)}decode(f,S=0){const P=e(f),H=P.readUInt32LE(S),nt=P.readUInt32LE(S+4);return D(nt,H)}encode(f,S,P=0){const H=R(f),nt=e(S);return nt.writeUInt32LE(H.lo32,P),nt.writeUInt32LE(H.hi32,P+4),8}}tt.NearUInt64=O;class $ extends r{constructor(f){super(8,f)}decode(f,S=0){const P=e(f),H=P.readUInt32BE(S),nt=P.readUInt32BE(S+4);return D(H,nt)}encode(f,S,P=0){const H=R(f),nt=e(S);return nt.writeUInt32BE(H.hi32,P),nt.writeUInt32BE(H.lo32,P+4),8}}tt.NearUInt64BE=$;class V extends r{constructor(f){super(8,f)}decode(f,S=0){const P=e(f),H=P.readUInt32LE(S),nt=P.readInt32LE(S+4);return D(nt,H)}encode(f,S,P=0){const H=R(f),nt=e(S);return nt.writeUInt32LE(H.lo32,P),nt.writeInt32LE(H.hi32,P+4),8}}tt.NearInt64=V;class z extends r{constructor(f){super(8,f)}decode(f,S=0){const P=e(f),H=P.readInt32BE(S),nt=P.readUInt32BE(S+4);return D(H,nt)}encode(f,S,P=0){const H=R(f),nt=e(S);return nt.writeInt32BE(H.hi32,P),nt.writeUInt32BE(H.lo32,P+4),8}}tt.NearInt64BE=z;class j extends r{constructor(f){super(4,f)}decode(f,S=0){return e(f).readFloatLE(S)}encode(f,S,P=0){return e(S).writeFloatLE(f,P),4}}tt.Float=j;class et extends r{constructor(f){super(4,f)}decode(f,S=0){return e(f).readFloatBE(S)}encode(f,S,P=0){return e(S).writeFloatBE(f,P),4}}tt.FloatBE=et;class ot extends r{constructor(f){super(8,f)}decode(f,S=0){return e(f).readDoubleLE(S)}encode(f,S,P=0){return e(S).writeDoubleLE(f,P),8}}tt.Double=ot;class Q extends r{constructor(f){super(8,f)}decode(f,S=0){return e(f).readDoubleBE(S)}encode(f,S,P=0){return e(S).writeDoubleBE(f,P),8}}tt.DoubleBE=Q;class rt extends r{constructor(f,S,P){if(!(f instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(S instanceof o&&S.isCount()||Number.isInteger(S)&&0<=S))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let H=-1;!(S instanceof o)&&0<f.span&&(H=S*f.span),super(H,P),this.elementLayout=f,this.count=S}getSpan(f,S=0){if(0<=this.span)return this.span;let P=0,H=this.count;if(H instanceof o&&(H=H.decode(f,S)),0<this.elementLayout.span)P=H*this.elementLayout.span;else{let nt=0;for(;nt<H;)P+=this.elementLayout.getSpan(f,S+P),++nt}return P}decode(f,S=0){const P=[];let H=0,nt=this.count;for(nt instanceof o&&(nt=nt.decode(f,S));H<nt;)P.push(this.elementLayout.decode(f,S)),S+=this.elementLayout.getSpan(f,S),H+=1;return P}encode(f,S,P=0){const H=this.elementLayout,nt=f.reduce((lt,pt)=>lt+H.encode(pt,S,P+lt),0);return this.count instanceof o&&this.count.encode(f.length,S,P),nt}}tt.Sequence=rt;class q extends r{constructor(f,S,P){if(!(Array.isArray(f)&&f.reduce((nt,lt)=>nt&&lt instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof S=="boolean"&&P===void 0&&(P=S,S=void 0);for(const nt of f)if(0>nt.span&&nt.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let H=-1;try{H=f.reduce((nt,lt)=>nt+lt.getSpan(),0)}catch{}super(H,S),this.fields=f,this.decodePrefixes=!!P}getSpan(f,S=0){if(0<=this.span)return this.span;let P=0;try{P=this.fields.reduce((H,nt)=>{const lt=nt.getSpan(f,S);return S+=lt,H+lt},0)}catch{throw new RangeError("indeterminate span")}return P}decode(f,S=0){t(f);const P=this.makeDestinationObject();for(const H of this.fields)if(H.property!==void 0&&(P[H.property]=H.decode(f,S)),S+=H.getSpan(f,S),this.decodePrefixes&&f.length===S)break;return P}encode(f,S,P=0){const H=P;let nt=0,lt=0;for(const pt of this.fields){let Ut=pt.span;if(lt=0<Ut?Ut:0,pt.property!==void 0){const Pt=f[pt.property];Pt!==void 0&&(lt=pt.encode(Pt,S,P),0>Ut&&(Ut=pt.getSpan(S,P)))}nt=P,P+=Ut}return nt+lt-H}fromArray(f){const S=this.makeDestinationObject();for(const P of this.fields)P.property!==void 0&&0<f.length&&(S[P.property]=f.shift());return S}layoutFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const S of this.fields)if(S.property===f)return S}offsetOf(f){if(typeof f!="string")throw new TypeError("property must be string");let S=0;for(const P of this.fields){if(P.property===f)return S;0>P.span?S=-1:0<=S&&(S+=P.span)}}}tt.Structure=q;class F{constructor(f){this.property=f}decode(f,S){throw new Error("UnionDiscriminator is abstract")}encode(f,S,P){throw new Error("UnionDiscriminator is abstract")}}tt.UnionDiscriminator=F;class W extends F{constructor(f,S){if(!(f instanceof o&&f.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(S||f.property||"variant"),this.layout=f}decode(f,S){return this.layout.decode(f,S)}encode(f,S,P){return this.layout.encode(f,S,P)}}tt.UnionLayoutDiscriminator=W;class L extends r{constructor(f,S,P){let H;if(f instanceof g||f instanceof d)H=new W(new l(f));else if(f instanceof o&&f.isCount())H=new W(f);else if(f instanceof F)H=f;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(S===void 0&&(S=null),!(S===null||S instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(S!==null){if(0>S.span)throw new Error("defaultLayout must have constant span");S.property===void 0&&(S=S.replicate("content"))}let nt=-1;S&&(nt=S.span,0<=nt&&(f instanceof g||f instanceof d)&&(nt+=H.layout.span)),super(nt,P),this.discriminator=H,this.usesPrefixDiscriminator=f instanceof g||f instanceof d,this.defaultLayout=S,this.registry={};let lt=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(pt){return lt(pt)},this.configGetSourceVariant=function(pt){lt=pt.bind(this)}}getSpan(f,S=0){if(0<=this.span)return this.span;const P=this.getVariant(f,S);if(!P)throw new Error("unable to determine span for unrecognized variant");return P.getSpan(f,S)}defaultGetSourceVariant(f){if(Object.prototype.hasOwnProperty.call(f,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(f,this.defaultLayout.property))return;const S=this.registry[f[this.discriminator.property]];if(S&&(!S.layout||S.property&&Object.prototype.hasOwnProperty.call(f,S.property)))return S}else for(const S in this.registry){const P=this.registry[S];if(P.property&&Object.prototype.hasOwnProperty.call(f,P.property))return P}throw new Error("unable to infer src variant")}decode(f,S=0){let P;const H=this.discriminator,nt=H.decode(f,S),lt=this.registry[nt];if(lt===void 0){const pt=this.defaultLayout;let Ut=0;this.usesPrefixDiscriminator&&(Ut=H.layout.span),P=this.makeDestinationObject(),P[H.property]=nt,P[pt.property]=pt.decode(f,S+Ut)}else P=lt.decode(f,S);return P}encode(f,S,P=0){const H=this.getSourceVariant(f);if(H===void 0){const nt=this.discriminator,lt=this.defaultLayout;let pt=0;return this.usesPrefixDiscriminator&&(pt=nt.layout.span),nt.encode(f[nt.property],S,P),pt+lt.encode(f[lt.property],S,P+pt)}return H.encode(f,S,P)}addVariant(f,S,P){const H=new E(this,f,S,P);return this.registry[f]=H,H}getVariant(f,S=0){let P;return f instanceof Uint8Array?P=this.discriminator.decode(f,S):P=f,this.registry[P]}}tt.Union=L;class E extends r{constructor(f,S,P,H){if(!(f instanceof L))throw new TypeError("union must be a Union");if(!Number.isInteger(S)||0>S)throw new TypeError("variant must be a (non-negative) integer");if(typeof P=="string"&&H===void 0&&(H=P,P=null),P){if(!(P instanceof r))throw new TypeError("layout must be a Layout");if(f.defaultLayout!==null&&0<=P.span&&P.span>f.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof H!="string")throw new TypeError("variant must have a String property")}let nt=f.span;0>f.span&&(nt=P?P.span:0,0<=nt&&f.usesPrefixDiscriminator&&(nt+=f.discriminator.layout.span)),super(nt,H),this.union=f,this.variant=S,this.layout=P||null}getSpan(f,S=0){if(0<=this.span)return this.span;let P=0;this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span);let H=0;return this.layout&&(H=this.layout.getSpan(f,S+P)),P+H}decode(f,S=0){const P=this.makeDestinationObject();if(this!==this.union.getVariant(f,S))throw new Error("variant mismatch");let H=0;return this.union.usesPrefixDiscriminator&&(H=this.union.discriminator.layout.span),this.layout?P[this.property]=this.layout.decode(f,S+H):this.property?P[this.property]=!0:this.union.usesPrefixDiscriminator&&(P[this.union.discriminator.property]=this.variant),P}encode(f,S,P=0){let H=0;if(this.union.usesPrefixDiscriminator&&(H=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(f,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,S,P);let nt=H;if(this.layout&&(this.layout.encode(f[this.property],S,P+H),nt+=this.layout.getSpan(S,P+H),0<=this.union.span&&nt>this.union.span))throw new Error("encoded variant overruns containing union");return nt}fromArray(f){if(this.layout)return this.layout.fromArray(f)}}tt.VariantLayout=E;function a(c){return 0>c&&(c+=4294967296),c}class h extends r{constructor(f,S,P){if(!(f instanceof g||f instanceof d))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof S=="string"&&P===void 0&&(P=S,S=!1),4<f.span)throw new RangeError("word cannot exceed 32 bits");super(f.span,P),this.word=f,this.msb=!!S,this.fields=[];let H=0;this._packedSetValue=function(nt){return H=a(nt),this},this._packedGetValue=function(){return H}}decode(f,S=0){const P=this.makeDestinationObject(),H=this.word.decode(f,S);this._packedSetValue(H);for(const nt of this.fields)nt.property!==void 0&&(P[nt.property]=nt.decode(f));return P}encode(f,S,P=0){const H=this.word.decode(S,P);this._packedSetValue(H);for(const nt of this.fields)if(nt.property!==void 0){const lt=f[nt.property];lt!==void 0&&nt.encode(lt)}return this.word.encode(this._packedGetValue(),S,P)}addField(f,S){const P=new _(this,f,S);return this.fields.push(P),P}addBoolean(f){const S=new M(this,f);return this.fields.push(S),S}fieldFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const S of this.fields)if(S.property===f)return S}}tt.BitStructure=h;class _{constructor(f,S,P){if(!(f instanceof h))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(S)||0>=S)throw new TypeError("bits must be positive integer");const H=8*f.span,nt=f.fields.reduce((lt,pt)=>lt+pt.bits,0);if(S+nt>H)throw new Error("bits too long for span remainder ("+(H-nt)+" of "+H+" remain)");this.container=f,this.bits=S,this.valueMask=(1<<S)-1,S===32&&(this.valueMask=4294967295),this.start=nt,this.container.msb&&(this.start=H-nt-S),this.wordMask=a(this.valueMask<<this.start),this.property=P}decode(f,S){const P=this.container._packedGetValue();return a(P&this.wordMask)>>>this.start}encode(f){if(typeof f!="number"||!Number.isInteger(f)||f!==a(f&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const S=this.container._packedGetValue(),P=a(f<<this.start);this.container._packedSetValue(a(S&~this.wordMask)|P)}}tt.BitField=_;class M extends _{constructor(f,S){super(f,1,S)}decode(f,S){return!!super.decode(f,S)}encode(f){typeof f=="boolean"&&(f=+f),super.encode(f)}}tt.Boolean=M;class C extends r{constructor(f,S){if(!(f instanceof o&&f.isCount()||Number.isInteger(f)&&0<=f))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let P=-1;f instanceof o||(P=f),super(P,S),this.length=f}getSpan(f,S){let P=this.span;return 0>P&&(P=this.length.decode(f,S)),P}decode(f,S=0){let P=this.span;return 0>P&&(P=this.length.decode(f,S)),e(f).slice(S,S+P)}encode(f,S,P){let H=this.length;if(this.length instanceof o&&(H=f.length),!(f instanceof Uint8Array&&H===f.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+H+") Uint8Array as src");if(P+H>S.length)throw new RangeError("encoding overruns Uint8Array");const nt=e(f);return e(S).write(nt.toString("hex"),P,H,"hex"),this.length instanceof o&&this.length.encode(H,S,P),H}}tt.Blob=C;class I extends r{constructor(f){super(-1,f)}getSpan(f,S=0){t(f);let P=S;for(;P<f.length&&f[P]!==0;)P+=1;return 1+P-S}decode(f,S=0){const P=this.getSpan(f,S);return e(f).slice(S,S+P-1).toString("utf-8")}encode(f,S,P=0){typeof f!="string"&&(f=String(f));const H=n.Buffer.from(f,"utf8"),nt=H.length;if(P+nt>S.length)throw new RangeError("encoding overruns Buffer");const lt=e(S);return H.copy(lt,P),lt[P+nt]=0,nt+1}}tt.CString=I;class w extends r{constructor(f,S){if(typeof f=="string"&&S===void 0&&(S=f,f=void 0),f===void 0)f=-1;else if(!Number.isInteger(f))throw new TypeError("maxSpan must be an integer");super(-1,S),this.maxSpan=f}getSpan(f,S=0){return t(f),f.length-S}decode(f,S=0){const P=this.getSpan(f,S);if(0<=this.maxSpan&&this.maxSpan<P)throw new RangeError("text length exceeds maxSpan");return e(f).slice(S,S+P).toString("utf-8")}encode(f,S,P=0){typeof f!="string"&&(f=String(f));const H=n.Buffer.from(f,"utf8"),nt=H.length;if(0<=this.maxSpan&&this.maxSpan<nt)throw new RangeError("text length exceeds maxSpan");if(P+nt>S.length)throw new RangeError("encoding overruns Buffer");return H.copy(e(S),P),nt}}tt.UTF8=w;class p extends r{constructor(f,S){super(0,S),this.value=f}decode(f,S){return this.value}encode(f,S,P){return 0}}return tt.Constant=p,tt.greedy=((c,f)=>new u(c,f)),tt.offset=((c,f,S)=>new l(c,f,S)),tt.u8=(c=>new g(1,c)),tt.u16=(c=>new g(2,c)),tt.u24=(c=>new g(3,c)),tt.u32=(c=>new g(4,c)),tt.u40=(c=>new g(5,c)),tt.u48=(c=>new g(6,c)),tt.nu64=(c=>new O(c)),tt.u16be=(c=>new d(2,c)),tt.u24be=(c=>new d(3,c)),tt.u32be=(c=>new d(4,c)),tt.u40be=(c=>new d(5,c)),tt.u48be=(c=>new d(6,c)),tt.nu64be=(c=>new $(c)),tt.s8=(c=>new x(1,c)),tt.s16=(c=>new x(2,c)),tt.s24=(c=>new x(3,c)),tt.s32=(c=>new x(4,c)),tt.s40=(c=>new x(5,c)),tt.s48=(c=>new x(6,c)),tt.ns64=(c=>new V(c)),tt.s16be=(c=>new A(2,c)),tt.s24be=(c=>new A(3,c)),tt.s32be=(c=>new A(4,c)),tt.s40be=(c=>new A(5,c)),tt.s48be=(c=>new A(6,c)),tt.ns64be=(c=>new z(c)),tt.f32=(c=>new j(c)),tt.f32be=(c=>new et(c)),tt.f64=(c=>new ot(c)),tt.f64be=(c=>new Q(c)),tt.struct=((c,f,S)=>new q(c,f,S)),tt.bits=((c,f,S)=>new h(c,f,S)),tt.seq=((c,f,S)=>new rt(c,f,S)),tt.union=((c,f,S)=>new L(c,f,S)),tt.unionLayoutDiscriminator=((c,f)=>new W(c,f)),tt.blob=((c,f)=>new C(c,f)),tt.cstr=(c=>new I(c)),tt.utf8=((c,f)=>new w(c,f)),tt.constant=((c,f)=>new p(c,f)),tt}var K=od(),ad=8078e3,cd=8078001,ud=8078004,ld=8078005,hd=8078006,fd=8078011;function Ju(n){return Array.isArray(n)?"%5B"+n.map(Ju).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function dd([n,t]){return`${n}=${Ju(t)}`}function pd(n){const t=Object.entries(n).map(dd).join("&");return btoa(t)}function gd(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${pd(t)}'`),`${e}\``}}var gn=class extends Error{cause=this.cause;context;constructor(...[n,t]){let e,r;if(t){const{cause:i,...o}=t;i&&(r={cause:i}),Object.keys(o).length>0&&(e=o)}const s=gd(n,e);super(s,r),this.context={__code:n,...e},this.name="SolanaError"}};function yd(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function md(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(yd(t,n));return n.write(t,e,0),e}})}function wd(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function ln(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function bd(n,t){if(ln(n)!==ln(t))throw new gn(ud);if(ln(n)&&ln(t)&&n.fixedSize!==t.fixedSize)throw new gn(ld,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!ln(n)&&!ln(t)&&n.maxSize!==t.maxSize)throw new gn(hd,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function vd(n,t,e=0){if(t.length-e<=0)throw new gn(ad,{codecDescription:n})}function Ed(n,t,e,r=0){const s=e.length-r;if(s<t)throw new gn(cd,{bytesLength:s,codecDescription:n,expected:t})}function kd(n,t,e,r){if(r<t||r>e)throw new gn(fd,{codecDescription:n,max:e,min:t,value:r})}function Qu(n){return n?.endian!==1}function _d(n){return md({fixedSize:n.size,write(t,e,r){n.range&&kd(n.name,n.range[0],n.range[1],t);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),t,Qu(n.config)),e.set(new Uint8Array(s),r),r+n.size}})}function Sd(n){return wd({fixedSize:n.size,read(t,e=0){vd(n.name,t,e),Ed(n.name,n.size,t,e);const r=new DataView(Ad(t,e,n.size));return[n.get(r,Qu(n.config)),e+n.size]}})}function Ad(n,t,e){const r=n.byteOffset+(t??0),s=e??n.byteLength;return n.buffer.slice(r,r+s)}var tl=(n={})=>_d({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),Id=(n={})=>Sd({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),xd=(n={})=>bd(tl(n),Id(n));let Bd=class extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...o}=t,{path:u}=t,l=u.length===0?s:`At path: ${u.join(".")} -- ${s}`;super(i??l),i!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}};function Rd(n){return ei(n)&&typeof n[Symbol.iterator]=="function"}function ei(n){return typeof n=="object"&&n!=null}function zi(n){return ei(n)&&!Array.isArray(n)}function Xe(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Td(n){const{done:t,value:e}=n.next();return t?void 0:e}function Ld(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:u,message:l=`Expected a value of type \`${o}\`${u?` with refinement \`${u}\``:""}, but received: \`${Xe(r)}\``}=n;return{value:r,type:o,refinement:u,key:s[s.length-1],path:s,branch:i,...n,message:l}}function*Qa(n,t,e,r){Rd(n)||(n=[n]);for(const s of n){const i=Ld(s,t,e,r);i&&(yield i)}}function*ea(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,u={path:r,branch:s,mask:o};i&&(n=t.coercer(n,u));let l="valid";for(const g of t.validator(n,u))g.explanation=e.message,l="not_valid",yield[g,void 0];for(let[g,d,x]of t.entries(n,u)){const A=ea(d,x,{path:g===void 0?r:[...r,g],branch:g===void 0?s:[...s,d],coerce:i,mask:o,message:e.message});for(const k of A)k[0]?(l=k[0].refinement!=null?"not_refined":"not_valid",yield[k[0],void 0]):i&&(d=k[1],g===void 0?n=d:n instanceof Map?n.set(g,d):n instanceof Set?n.add(d):ei(n)&&(d!==void 0||g in n)&&(n[g]=d))}if(l!=="not_valid")for(const g of t.refiner(n,u))g.explanation=e.message,l="not_refined",yield[g,void 0];l==="valid"&&(yield[void 0,n])}let hr=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:o=l=>l,entries:u=function*(){}}=t;this.type=e,this.schema=r,this.entries=u,this.coercer=o,s?this.validator=(l,g)=>{const d=s(l,g);return Qa(d,g,this,l)}:this.validator=()=>[],i?this.refiner=(l,g)=>{const d=i(l,g);return Qa(d,g,this,l)}:this.refiner=()=>[]}assert(t,e){return el(t,this,e)}create(t,e){return ht(t,this,e)}is(t){return rl(t,this)}mask(t,e){return Md(t,this,e)}validate(t,e={}){return ri(t,this,e)}};function el(n,t,e){const r=ri(n,t,{message:e});if(r[0])throw r[0]}function ht(n,t,e){const r=ri(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Md(n,t,e){const r=ri(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function rl(n,t){return!ri(n,t)[0]}function ri(n,t,e={}){const r=ea(n,t,e),s=Td(r);return s[0]?[new Bd(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function tn(n,t){return new hr({type:n,schema:null,validator:t})}function Pd(){return tn("any",()=>!0)}function ft(n){return new hr({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Xe(t)}`}})}function lr(){return tn("boolean",n=>typeof n=="boolean")}function ra(n){return tn("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Xe(t)}`)}function ce(n){const t=Xe(n),e=typeof n;return new hr({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Xe(r)}`}})}function Cd(){return tn("never",()=>!1)}function dt(n){return new hr({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function J(){return tn("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Xe(n)}`)}function bt(n){return new hr({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function nl(n,t){return new hr({type:"record",schema:null,*entries(e){if(ei(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return zi(e)||`Expected an object, but received: ${Xe(e)}`},coercer(e){return zi(e)?{...e}:e}})}function ut(){return tn("string",n=>typeof n=="string"||`Expected a string, but received: ${Xe(n)}`)}function na(n){const t=Cd();return new hr({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Xe(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function ct(n){const t=Object.keys(n);return new hr({type:"type",schema:n,*entries(e){if(ei(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return zi(e)||`Expected an object, but received: ${Xe(e)}`},coercer(e){return zi(e)?{...e}:e}})}function Pe(n){const t=n.map(e=>e.type).join(" | ");return new hr({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,o]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return o}return e},validator(e,r){const s=[];for(const i of n){const[...o]=ea(e,i,r),[u]=o;if(u[0])for(const[l]of o)l&&s.push(l);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Xe(e)}`,...s]}})}function xn(){return tn("unknown",()=>!0)}function ni(n,t,e){return new hr({...n,coercer:(r,s)=>rl(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var pi,Od=new Uint8Array(16);function il(){if(!pi&&(pi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!pi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pi(Od)}const Ud=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ji(n){return typeof n=="string"&&Ud.test(n)}var Se=[];for(var js=0;js<256;++js)Se.push((js+256).toString(16).substr(1));function Qi(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Se[n[t+0]]+Se[n[t+1]]+Se[n[t+2]]+Se[n[t+3]]+"-"+Se[n[t+4]]+Se[n[t+5]]+"-"+Se[n[t+6]]+Se[n[t+7]]+"-"+Se[n[t+8]]+Se[n[t+9]]+"-"+Se[n[t+10]]+Se[n[t+11]]+Se[n[t+12]]+Se[n[t+13]]+Se[n[t+14]]+Se[n[t+15]]).toLowerCase();if(!Ji(e))throw TypeError("Stringified UUID is invalid");return e}var tc,Gs,Zs=0,Ys=0;function Nd(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||tc,o=n.clockseq!==void 0?n.clockseq:Gs;if(i==null||o==null){var u=n.random||(n.rng||il)();i==null&&(i=tc=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),o==null&&(o=Gs=(u[6]<<8|u[7])&16383)}var l=n.msecs!==void 0?n.msecs:Date.now(),g=n.nsecs!==void 0?n.nsecs:Ys+1,d=l-Zs+(g-Ys)/1e4;if(d<0&&n.clockseq===void 0&&(o=o+1&16383),(d<0||l>Zs)&&n.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Zs=l,Ys=g,Gs=o,l+=122192928e5;var x=((l&268435455)*1e4+g)%4294967296;s[r++]=x>>>24&255,s[r++]=x>>>16&255,s[r++]=x>>>8&255,s[r++]=x&255;var A=l/4294967296*1e4&268435455;s[r++]=A>>>8&255,s[r++]=A&255,s[r++]=A>>>24&15|16,s[r++]=A>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var k=0;k<6;++k)s[r+k]=i[k];return t||Qi(s)}function sl(n){if(!Ji(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Dd(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var zd="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Fd="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ol(n,t,e){function r(s,i,o,u){if(typeof s=="string"&&(s=Dd(s)),typeof i=="string"&&(i=sl(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+s.length);if(l.set(i),l.set(s,i.length),l=e(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,o){u=u||0;for(var g=0;g<16;++g)o[u+g]=l[g];return o}return Qi(l)}try{r.name=n}catch{}return r.DNS=zd,r.URL=Fd,r}function Kd(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return qd($d(Wd(n),n.length*8))}function qd(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function al(n){return(n+64>>>9<<4)+14+1}function $d(n,t){n[t>>5]|=128<<t%32,n[al(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var u=e,l=r,g=s,d=i;e=Re(e,r,s,i,n[o],7,-680876936),i=Re(i,e,r,s,n[o+1],12,-389564586),s=Re(s,i,e,r,n[o+2],17,606105819),r=Re(r,s,i,e,n[o+3],22,-1044525330),e=Re(e,r,s,i,n[o+4],7,-176418897),i=Re(i,e,r,s,n[o+5],12,1200080426),s=Re(s,i,e,r,n[o+6],17,-1473231341),r=Re(r,s,i,e,n[o+7],22,-45705983),e=Re(e,r,s,i,n[o+8],7,1770035416),i=Re(i,e,r,s,n[o+9],12,-1958414417),s=Re(s,i,e,r,n[o+10],17,-42063),r=Re(r,s,i,e,n[o+11],22,-1990404162),e=Re(e,r,s,i,n[o+12],7,1804603682),i=Re(i,e,r,s,n[o+13],12,-40341101),s=Re(s,i,e,r,n[o+14],17,-1502002290),r=Re(r,s,i,e,n[o+15],22,1236535329),e=Te(e,r,s,i,n[o+1],5,-165796510),i=Te(i,e,r,s,n[o+6],9,-1069501632),s=Te(s,i,e,r,n[o+11],14,643717713),r=Te(r,s,i,e,n[o],20,-373897302),e=Te(e,r,s,i,n[o+5],5,-701558691),i=Te(i,e,r,s,n[o+10],9,38016083),s=Te(s,i,e,r,n[o+15],14,-660478335),r=Te(r,s,i,e,n[o+4],20,-405537848),e=Te(e,r,s,i,n[o+9],5,568446438),i=Te(i,e,r,s,n[o+14],9,-1019803690),s=Te(s,i,e,r,n[o+3],14,-187363961),r=Te(r,s,i,e,n[o+8],20,1163531501),e=Te(e,r,s,i,n[o+13],5,-1444681467),i=Te(i,e,r,s,n[o+2],9,-51403784),s=Te(s,i,e,r,n[o+7],14,1735328473),r=Te(r,s,i,e,n[o+12],20,-1926607734),e=Le(e,r,s,i,n[o+5],4,-378558),i=Le(i,e,r,s,n[o+8],11,-2022574463),s=Le(s,i,e,r,n[o+11],16,1839030562),r=Le(r,s,i,e,n[o+14],23,-35309556),e=Le(e,r,s,i,n[o+1],4,-1530992060),i=Le(i,e,r,s,n[o+4],11,1272893353),s=Le(s,i,e,r,n[o+7],16,-155497632),r=Le(r,s,i,e,n[o+10],23,-1094730640),e=Le(e,r,s,i,n[o+13],4,681279174),i=Le(i,e,r,s,n[o],11,-358537222),s=Le(s,i,e,r,n[o+3],16,-722521979),r=Le(r,s,i,e,n[o+6],23,76029189),e=Le(e,r,s,i,n[o+9],4,-640364487),i=Le(i,e,r,s,n[o+12],11,-421815835),s=Le(s,i,e,r,n[o+15],16,530742520),r=Le(r,s,i,e,n[o+2],23,-995338651),e=Me(e,r,s,i,n[o],6,-198630844),i=Me(i,e,r,s,n[o+7],10,1126891415),s=Me(s,i,e,r,n[o+14],15,-1416354905),r=Me(r,s,i,e,n[o+5],21,-57434055),e=Me(e,r,s,i,n[o+12],6,1700485571),i=Me(i,e,r,s,n[o+3],10,-1894986606),s=Me(s,i,e,r,n[o+10],15,-1051523),r=Me(r,s,i,e,n[o+1],21,-2054922799),e=Me(e,r,s,i,n[o+8],6,1873313359),i=Me(i,e,r,s,n[o+15],10,-30611744),s=Me(s,i,e,r,n[o+6],15,-1560198380),r=Me(r,s,i,e,n[o+13],21,1309151649),e=Me(e,r,s,i,n[o+4],6,-145523070),i=Me(i,e,r,s,n[o+11],10,-1120210379),s=Me(s,i,e,r,n[o+2],15,718787259),r=Me(r,s,i,e,n[o+9],21,-343485551),e=Tr(e,u),r=Tr(r,l),s=Tr(s,g),i=Tr(i,d)}return[e,r,s,i]}function Wd(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(al(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function Tr(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Vd(n,t){return n<<t|n>>>32-t}function ts(n,t,e,r,s,i){return Tr(Vd(Tr(Tr(t,n),Tr(r,i)),s),e)}function Re(n,t,e,r,s,i,o){return ts(t&e|~t&r,n,t,s,i,o)}function Te(n,t,e,r,s,i,o){return ts(t&r|e&~r,n,t,s,i,o)}function Le(n,t,e,r,s,i,o){return ts(t^e^r,n,t,s,i,o)}function Me(n,t,e,r,s,i,o){return ts(e^(t|~r),n,t,s,i,o)}var Hd=ol("v3",48,Kd);function jd(n,t,e){n=n||{};var r=n.random||(n.rng||il)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return Qi(r)}function Gd(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Xs(n,t){return n<<t|n>>>32-t}function Zd(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),u=new Array(o),l=0;l<o;++l){for(var g=new Uint32Array(16),d=0;d<16;++d)g[d]=n[l*64+d*4]<<24|n[l*64+d*4+1]<<16|n[l*64+d*4+2]<<8|n[l*64+d*4+3];u[l]=g}u[o-1][14]=(n.length-1)*8/Math.pow(2,32),u[o-1][14]=Math.floor(u[o-1][14]),u[o-1][15]=(n.length-1)*8&4294967295;for(var x=0;x<o;++x){for(var A=new Uint32Array(80),k=0;k<16;++k)A[k]=u[x][k];for(var R=16;R<80;++R)A[R]=Xs(A[R-3]^A[R-8]^A[R-14]^A[R-16],1);for(var D=e[0],O=e[1],$=e[2],V=e[3],z=e[4],j=0;j<80;++j){var et=Math.floor(j/20),ot=Xs(D,5)+Gd(et,O,$,V)+z+t[et]+A[j]>>>0;z=V,V=$,$=Xs(O,30)>>>0,O=D,D=ot}e[0]=e[0]+D>>>0,e[1]=e[1]+O>>>0,e[2]=e[2]+$>>>0,e[3]=e[3]+V>>>0,e[4]=e[4]+z>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Yd=ol("v5",80,Zd);const Xd="00000000-0000-0000-0000-000000000000";function Jd(n){if(!Ji(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Qd=Object.freeze(Object.defineProperty({__proto__:null,NIL:Xd,parse:sl,stringify:Qi,v1:Nd,v3:Hd,v4:jd,v5:Yd,validate:Ji,version:Jd},Symbol.toStringTag,{value:"Module"})),cl=qo(Qd);var Js,ec;function tp(){if(ec)return Js;ec=1;const n=cl.v4;return Js=function(e,r,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const u={method:e};if(o===2&&(u.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");u.params=r}if(typeof s>"u"){const l=typeof i.generator=="function"?i.generator:function(){return n()};u.id=l(u,i)}else o===2&&s===null?i.notificationIdNull&&(u.id=null):u.id=s;return u},Js}var Qs,rc;function ep(){if(rc)return Qs;rc=1;const n=cl.v4,t=tp(),e=function(r,s){if(!(this instanceof e))return new e(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return Qs=e,e.prototype.request=function(r,s,i,o){const u=this;let l=null;const g=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&g)throw new TypeError("JSON-RPC 1.0 does not support batching");if(g||!g&&r&&typeof r=="object"&&typeof s=="function")o=s,l=r;else{typeof i=="function"&&(o=i,i=void 0);const A=typeof o=="function";try{l=t(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(k){if(A)return o(k);throw k}if(!A)return l}let x;try{x=JSON.stringify(l,this.options.replacer)}catch(A){return o(A)}return this.callServer(x,function(A,k){u._parseResponse(A,k,o)}),l},e.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(u){return i(u)}if(i.length===3)if(Array.isArray(o)){const u=function(g){return typeof g.error<"u"},l=function(g){return!u(g)};return i(null,o.filter(u),o.filter(l))}else return i(null,o.error,o.result);i(null,o)},Qs}var rp=ep();const np=An(rp);var to={exports:{}},nc;function ip(){return nc||(nc=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(l,g,d){this.fn=l,this.context=g,this.once=d||!1}function i(l,g,d,x,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var k=new s(d,x||l,A),R=e?e+g:g;return l._events[R]?l._events[R].fn?l._events[R]=[l._events[R],k]:l._events[R].push(k):(l._events[R]=k,l._eventsCount++),l}function o(l,g){--l._eventsCount===0?l._events=new r:delete l._events[g]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var g=[],d,x;if(this._eventsCount===0)return g;for(x in d=this._events)t.call(d,x)&&g.push(e?x.slice(1):x);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(d)):g},u.prototype.listeners=function(g){var d=e?e+g:g,x=this._events[d];if(!x)return[];if(x.fn)return[x.fn];for(var A=0,k=x.length,R=new Array(k);A<k;A++)R[A]=x[A].fn;return R},u.prototype.listenerCount=function(g){var d=e?e+g:g,x=this._events[d];return x?x.fn?1:x.length:0},u.prototype.emit=function(g,d,x,A,k,R){var D=e?e+g:g;if(!this._events[D])return!1;var O=this._events[D],$=arguments.length,V,z;if(O.fn){switch(O.once&&this.removeListener(g,O.fn,void 0,!0),$){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,d),!0;case 3:return O.fn.call(O.context,d,x),!0;case 4:return O.fn.call(O.context,d,x,A),!0;case 5:return O.fn.call(O.context,d,x,A,k),!0;case 6:return O.fn.call(O.context,d,x,A,k,R),!0}for(z=1,V=new Array($-1);z<$;z++)V[z-1]=arguments[z];O.fn.apply(O.context,V)}else{var j=O.length,et;for(z=0;z<j;z++)switch(O[z].once&&this.removeListener(g,O[z].fn,void 0,!0),$){case 1:O[z].fn.call(O[z].context);break;case 2:O[z].fn.call(O[z].context,d);break;case 3:O[z].fn.call(O[z].context,d,x);break;case 4:O[z].fn.call(O[z].context,d,x,A);break;default:if(!V)for(et=1,V=new Array($-1);et<$;et++)V[et-1]=arguments[et];O[z].fn.apply(O[z].context,V)}}return!0},u.prototype.on=function(g,d,x){return i(this,g,d,x,!1)},u.prototype.once=function(g,d,x){return i(this,g,d,x,!0)},u.prototype.removeListener=function(g,d,x,A){var k=e?e+g:g;if(!this._events[k])return this;if(!d)return o(this,k),this;var R=this._events[k];if(R.fn)R.fn===d&&(!A||R.once)&&(!x||R.context===x)&&o(this,k);else{for(var D=0,O=[],$=R.length;D<$;D++)(R[D].fn!==d||A&&!R[D].once||x&&R[D].context!==x)&&O.push(R[D]);O.length?this._events[k]=O.length===1?O[0]:O:o(this,k)}return this},u.prototype.removeAllListeners=function(g){var d;return g?(d=e?e+g:g,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,n.exports=u})(to)),to.exports}var sp=ip();const ul=An(sp);var op=class extends ul{socket;constructor(n,t,e){super(),this.socket=new window.WebSocket(n,e),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(n,t,e){const r=e||t;try{this.socket.send(n),r()}catch(s){r(s)}}close(n,t){this.socket.close(n,t)}addEventListener(n,t,e){this.socket.addEventListener(n,t,e)}};function ap(n,t){return new op(n,t)}var cp=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},up=class extends ul{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},u,l){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=u||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new cp,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,t,e,r){return!r&&typeof e=="object"&&(r=e,e=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(n,t),u={jsonrpc:"2.0",method:n,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(u),r,l=>{if(l)return i(l);this.queue[o]={promise:[s,i]},e&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},e))})})}async login(n){const t=await this.call("rpc.login",n);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(n,t){return new Promise((e,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:n,params:t};this.socket.send(this.dataPack.encode(s),i=>{if(i)return r(i);e()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.on",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+t[n]);return t}async unsubscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.off",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(n,t){this.socket&&this.socket.close(n||1e3,t)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(n,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=yt.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const r=[e.notification];if(e.params.constructor===Object)r.push(e.params);else for(let s=0;s<e.params.length;s++)r.push(e.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",e,r),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(n,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",e,r),1))})}};const lp=BigInt(0),Mn=BigInt(1),hp=BigInt(2),fp=BigInt(7),dp=BigInt(256),pp=BigInt(113),ll=[],hl=[],fl=[];for(let n=0,t=Mn,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],ll.push(2*(5*r+e)),hl.push((n+1)*(n+2)/2%64);let s=lp;for(let i=0;i<7;i++)t=(t<<Mn^(t>>fp)*pp)%dp,t&hp&&(s^=Mn<<(Mn<<BigInt(i))-Mn);fl.push(s)}const dl=Bu(fl,!0),gp=dl[0],yp=dl[1],ic=(n,t,e)=>e>32?nf(n,t,e):ef(n,t,e),sc=(n,t,e)=>e>32?sf(n,t,e):rf(n,t,e);function mp(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)e[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const u=(o+8)%10,l=(o+2)%10,g=e[l],d=e[l+1],x=ic(g,d,1)^e[u],A=sc(g,d,1)^e[u+1];for(let k=0;k<50;k+=10)n[o+k]^=x,n[o+k+1]^=A}let s=n[2],i=n[3];for(let o=0;o<24;o++){const u=hl[o],l=ic(s,i,u),g=sc(s,i,u),d=ll[o];s=n[d],i=n[d+1],n[d]=l,n[d+1]=g}for(let o=0;o<50;o+=10){for(let u=0;u<10;u++)e[u]=n[o+u];for(let u=0;u<10;u++)n[o+u]^=~e[(u+2)%10]&e[(u+4)%10]}n[0]^=gp[r],n[1]^=yp[r]}Pr(e)}class ia extends Vo{constructor(t,e,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=s,this.rounds=i,Kn(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Vh(this.state)}clone(){return this._cloneInto()}keccak(){Pa(this.state32),mp(this.state32,this.rounds),Pa(this.state32),this.posOut=0,this.pos=0}update(t){En(this),t=Zi(t),_r(t);const{blockLen:e,state:r}=this,s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let u=0;u<o;u++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:s}=this;t[r]^=e,(e&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){En(this,!1),_r(t),this.finish();const e=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Kn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Au(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Pr(this.state)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new ia(e,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const wp=(n,t,e)=>Ho(()=>new ia(t,n,e)),oc=wp(1,136,256/8);class pl extends Vo{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Su(t);const r=Zi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Pr(i)}update(t){return En(this),this.iHash.update(t),this}digestInto(t){En(this),_r(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:u}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=u,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const gl=(n,t,e)=>new pl(n,t).update(e).digest();gl.create=(n,t)=>new pl(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ac=(n,t)=>(n+(n>=0?t:-t)/yl)/t;function bp(n,t,e){const[[r,s],[i,o]]=t,u=ac(o*n,e),l=ac(-s*n,e);let g=n-u*r-l*i,d=-u*s-l*o;const x=g<kr,A=d<kr;x&&(g=-g),A&&(d=-d);const k=Qn(Math.ceil(Pu(e)/2))+yn;if(g<kr||g>=k||d<kr||d>=k)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:x,k1:g,k2neg:A,k2:d}}function _o(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function eo(n,t){const e={};for(let r of Object.keys(t))e[r]=n[r]===void 0?t[r]:n[r];return Gr(e.lowS,"lowS"),Gr(e.prehash,"prehash"),e.format!==void 0&&_o(e.format),e}class vp extends Error{constructor(t=""){super(t)}}const yr={Err:vp,_tlv:{encode:(n,t)=>{const{Err:e}=yr;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=fi(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?fi(s.length/2|128):"";return fi(n)+i+s+t},decode(n,t){const{Err:e}=yr;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const l=s&127;if(!l)throw new e("tlv.decode(long): indefinite length not supported");if(l>4)throw new e("tlv.decode(long): byte length is too big");const g=t.subarray(r,r+l);if(g.length!==l)throw new e("tlv.decode: length bytes not complete");if(g[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const d of g)o=o<<8|d;if(r+=l,o<128)throw new e("tlv.decode(long): not minimal encoding")}const u=t.subarray(r,r+o);if(u.length!==o)throw new e("tlv.decode: wrong value length");return{v:u,l:t.subarray(r+o)}}},_int:{encode(n){const{Err:t}=yr;if(n<kr)throw new t("integer: negative integers are not allowed");let e=fi(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=yr;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Yi(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=yr,s=de("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l}=r.decode(2,i),{v:g,l:d}=r.decode(2,l);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(u),s:e.decode(g)}},hexFromSig(n){const{_tlv:t,_int:e}=yr,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},kr=BigInt(0),yn=BigInt(1),yl=BigInt(2),gi=BigInt(3),Ep=BigInt(4);function fn(n,t){const{BYTES:e}=n;let r;if(typeof t=="bigint")r=t;else{let s=de("private key",t);try{r=n.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function kp(n,t={}){const e=Zu("weierstrass",n,t),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:o,n:u}=i;ti(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=t;if(l&&(!r.is0(i.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const g=wl(r,s);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function x(L,E,a){const{x:h,y:_}=E.toAffine(),M=r.toBytes(h);if(Gr(a,"isCompressed"),a){d();const C=!r.isOdd(_);return sr(ml(C),M)}else return sr(Uint8Array.of(4),M,r.toBytes(_))}function A(L){Ye(L,void 0,"Point");const{publicKey:E,publicKeyUncompressed:a}=g,h=L.length,_=L[0],M=L.subarray(1);if(h===E&&(_===2||_===3)){const C=r.fromBytes(M);if(!r.isValid(C))throw new Error("bad point: is not on curve, wrong x");const I=D(C);let w;try{w=r.sqrt(I)}catch(f){const S=f instanceof Error?": "+f.message:"";throw new Error("bad point: is not on curve, sqrt error"+S)}d();const p=r.isOdd(w);return(_&1)===1!==p&&(w=r.neg(w)),{x:C,y:w}}else if(h===a&&_===4){const C=r.BYTES,I=r.fromBytes(M.subarray(0,C)),w=r.fromBytes(M.subarray(C,C*2));if(!O(I,w))throw new Error("bad point: is not on curve");return{x:I,y:w}}else throw new Error(`bad point: got length ${h}, expected compressed=${E} or uncompressed=${a}`)}const k=t.toBytes||x,R=t.fromBytes||A;function D(L){const E=r.sqr(L),a=r.mul(E,L);return r.add(r.add(a,r.mul(L,i.a)),i.b)}function O(L,E){const a=r.sqr(E),h=D(L);return r.eql(a,h)}if(!O(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const $=r.mul(r.pow(i.a,gi),Ep),V=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add($,V)))throw new Error("bad curve params: a or b");function z(L,E,a=!1){if(!r.isValid(E)||a&&r.is0(E))throw new Error(`bad point coordinate ${L}`);return E}function j(L){if(!(L instanceof q))throw new Error("ProjectivePoint expected")}function et(L){if(!l||!l.basises)throw new Error("no endo");return bp(L,l.basises,s.ORDER)}const ot=Li((L,E)=>{const{X:a,Y:h,Z:_}=L;if(r.eql(_,r.ONE))return{x:a,y:h};const M=L.is0();E==null&&(E=M?r.ONE:r.inv(_));const C=r.mul(a,E),I=r.mul(h,E),w=r.mul(_,E);if(M)return{x:r.ZERO,y:r.ZERO};if(!r.eql(w,r.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}),Q=Li(L=>{if(L.is0()){if(t.allowInfinityPoint&&!r.is0(L.Y))return;throw new Error("bad point: ZERO")}const{x:E,y:a}=L.toAffine();if(!r.isValid(E)||!r.isValid(a))throw new Error("bad point: x or y not field elements");if(!O(E,a))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function rt(L,E,a,h,_){return a=new q(r.mul(a.X,L),a.Y,a.Z),E=Mi(h,E),a=Mi(_,a),E.add(a)}class q{constructor(E,a,h){this.X=z("x",E),this.Y=z("y",a,!0),this.Z=z("z",h),Object.freeze(this)}static CURVE(){return i}static fromAffine(E){const{x:a,y:h}=E||{};if(!E||!r.isValid(a)||!r.isValid(h))throw new Error("invalid affine point");if(E instanceof q)throw new Error("projective point not allowed");return r.is0(a)&&r.is0(h)?q.ZERO:new q(a,h,r.ONE)}static fromBytes(E){const a=q.fromAffine(R(Ye(E,void 0,"point")));return a.assertValidity(),a}static fromHex(E){return q.fromBytes(de("pointHex",E))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(E=8,a=!0){return W.createCache(this,E),a||this.multiply(gi),this}assertValidity(){Q(this)}hasEvenY(){const{y:E}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(E)}equals(E){j(E);const{X:a,Y:h,Z:_}=this,{X:M,Y:C,Z:I}=E,w=r.eql(r.mul(a,I),r.mul(M,_)),p=r.eql(r.mul(h,I),r.mul(C,_));return w&&p}negate(){return new q(this.X,r.neg(this.Y),this.Z)}double(){const{a:E,b:a}=i,h=r.mul(a,gi),{X:_,Y:M,Z:C}=this;let I=r.ZERO,w=r.ZERO,p=r.ZERO,c=r.mul(_,_),f=r.mul(M,M),S=r.mul(C,C),P=r.mul(_,M);return P=r.add(P,P),p=r.mul(_,C),p=r.add(p,p),I=r.mul(E,p),w=r.mul(h,S),w=r.add(I,w),I=r.sub(f,w),w=r.add(f,w),w=r.mul(I,w),I=r.mul(P,I),p=r.mul(h,p),S=r.mul(E,S),P=r.sub(c,S),P=r.mul(E,P),P=r.add(P,p),p=r.add(c,c),c=r.add(p,c),c=r.add(c,S),c=r.mul(c,P),w=r.add(w,c),S=r.mul(M,C),S=r.add(S,S),c=r.mul(S,P),I=r.sub(I,c),p=r.mul(S,f),p=r.add(p,p),p=r.add(p,p),new q(I,w,p)}add(E){j(E);const{X:a,Y:h,Z:_}=this,{X:M,Y:C,Z:I}=E;let w=r.ZERO,p=r.ZERO,c=r.ZERO;const f=i.a,S=r.mul(i.b,gi);let P=r.mul(a,M),H=r.mul(h,C),nt=r.mul(_,I),lt=r.add(a,h),pt=r.add(M,C);lt=r.mul(lt,pt),pt=r.add(P,H),lt=r.sub(lt,pt),pt=r.add(a,_);let Ut=r.add(M,I);return pt=r.mul(pt,Ut),Ut=r.add(P,nt),pt=r.sub(pt,Ut),Ut=r.add(h,_),w=r.add(C,I),Ut=r.mul(Ut,w),w=r.add(H,nt),Ut=r.sub(Ut,w),c=r.mul(f,pt),w=r.mul(S,nt),c=r.add(w,c),w=r.sub(H,c),c=r.add(H,c),p=r.mul(w,c),H=r.add(P,P),H=r.add(H,P),nt=r.mul(f,nt),pt=r.mul(S,pt),H=r.add(H,nt),nt=r.sub(P,nt),nt=r.mul(f,nt),pt=r.add(pt,nt),P=r.mul(H,pt),p=r.add(p,P),P=r.mul(Ut,pt),w=r.mul(lt,w),w=r.sub(w,P),P=r.mul(lt,H),c=r.mul(Ut,c),c=r.add(c,P),new q(w,p,c)}subtract(E){return this.add(E.negate())}is0(){return this.equals(q.ZERO)}multiply(E){const{endo:a}=t;if(!s.isValidNot0(E))throw new Error("invalid scalar: out of range");let h,_;const M=C=>W.cached(this,C,I=>qr(q,I));if(a){const{k1neg:C,k1:I,k2neg:w,k2:p}=et(E),{p:c,f}=M(I),{p:S,f:P}=M(p);_=f.add(P),h=rt(a.beta,c,S,C,w)}else{const{p:C,f:I}=M(E);h=C,_=I}return qr(q,[h,_])[0]}multiplyUnsafe(E){const{endo:a}=t,h=this;if(!s.isValid(E))throw new Error("invalid scalar: out of range");if(E===kr||h.is0())return q.ZERO;if(E===yn)return h;if(W.hasCache(this))return this.multiply(E);if(a){const{k1neg:_,k1:M,k2neg:C,k2:I}=et(E),{p1:w,p2:p}=Mf(q,h,M,I);return rt(a.beta,w,p,_,C)}else return W.unsafe(h,E)}multiplyAndAddUnsafe(E,a,h){const _=this.multiplyUnsafe(a).add(E.multiplyUnsafe(h));return _.is0()?void 0:_}toAffine(E){return ot(this,E)}isTorsionFree(){const{isTorsionFree:E}=t;return o===yn?!0:E?E(q,this):W.unsafe(this,u).is0()}clearCofactor(){const{clearCofactor:E}=t;return o===yn?this:E?E(q,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(E=!0){return Gr(E,"isCompressed"),this.assertValidity(),k(q,this,E)}toHex(E=!0){return jr(this.toBytes(E))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(E=!0){return this.toBytes(E)}_setWindowSize(E){this.precompute(E)}static normalizeZ(E){return qr(q,E)}static msm(E,a){return Gu(q,s,E,a)}static fromPrivateKey(E){return q.BASE.multiply(fn(s,E))}}q.BASE=new q(i.Gx,i.Gy,r.ONE),q.ZERO=new q(r.ZERO,r.ONE,r.ZERO),q.Fp=r,q.Fn=s;const F=s.BITS,W=new ju(q,t.endo?Math.ceil(F/2):F);return q.BASE.precompute(8),q}function ml(n){return Uint8Array.of(n?2:3)}function wl(n,t){return{secretKey:t.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function _p(n,t={}){const{Fn:e}=n,r=t.randomBytes||jo,s=Object.assign(wl(n.Fp,e),{seed:Wu(e.ORDER)});function i(k){try{return!!fn(e,k)}catch{return!1}}function o(k,R){const{publicKey:D,publicKeyUncompressed:O}=s;try{const $=k.length;return R===!0&&$!==D||R===!1&&$!==O?!1:!!n.fromBytes(k)}catch{return!1}}function u(k=r(s.seed)){return Rf(Ye(k,s.seed,"seed"),e.ORDER)}function l(k,R=!0){return n.BASE.multiply(fn(e,k)).toBytes(R)}function g(k){const R=u(k);return{secretKey:R,publicKey:l(R)}}function d(k){if(typeof k=="bigint")return!1;if(k instanceof n)return!0;const{secretKey:R,publicKey:D,publicKeyUncompressed:O}=s;if(e.allowedLengths||R===D)return;const $=de("key",k).length;return $===D||$===O}function x(k,R,D=!0){if(d(k)===!0)throw new Error("first arg must be private key");if(d(R)===!1)throw new Error("second arg must be public key");const O=fn(e,k);return n.fromHex(R).multiply(O).toBytes(D)}return Object.freeze({getPublicKey:l,getSharedSecret:x,keygen:g,Point:n,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:u,isValidPrivateKey:i,randomPrivateKey:u,normPrivateKeyToScalar:k=>fn(e,k),precompute(k=8,R=n.BASE){return R.precompute(k,!1)}},lengths:s})}function Sp(n,t,e={}){Su(t),ti(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||jo,s=e.hmac||((a,...h)=>gl(t,a,sr(...h))),{Fp:i,Fn:o}=n,{ORDER:u,BITS:l}=o,{keygen:g,getPublicKey:d,getSharedSecret:x,utils:A,lengths:k}=_p(n,e),R={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},D="compact";function O(a){const h=u>>yn;return a>h}function $(a,h){if(!o.isValidNot0(h))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return h}function V(a,h){_o(h);const _=k.signature,M=h==="compact"?_:h==="recovered"?_+1:void 0;return Ye(a,M,`${h} signature`)}class z{constructor(h,_,M){this.r=$("r",h),this.s=$("s",_),M!=null&&(this.recovery=M),Object.freeze(this)}static fromBytes(h,_=D){V(h,_);let M;if(_==="der"){const{r:p,s:c}=yr.toSig(Ye(h));return new z(p,c)}_==="recovered"&&(M=h[0],_="compact",h=h.subarray(1));const C=o.BYTES,I=h.subarray(0,C),w=h.subarray(C,C*2);return new z(o.fromBytes(I),o.fromBytes(w),M)}static fromHex(h,_){return this.fromBytes(Ti(h),_)}addRecoveryBit(h){return new z(this.r,this.s,h)}recoverPublicKey(h){const _=i.ORDER,{r:M,s:C,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(u*yl<_&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const p=I===2||I===3?M+u:M;if(!i.isValid(p))throw new Error("recovery id 2 or 3 invalid");const c=i.toBytes(p),f=n.fromBytes(sr(ml((I&1)===0),c)),S=o.inv(p),P=et(de("msgHash",h)),H=o.create(-P*S),nt=o.create(C*S),lt=n.BASE.multiplyUnsafe(H).add(f.multiplyUnsafe(nt));if(lt.is0())throw new Error("point at infinify");return lt.assertValidity(),lt}hasHighS(){return O(this.s)}toBytes(h=D){if(_o(h),h==="der")return Ti(yr.hexFromSig(this));const _=o.toBytes(this.r),M=o.toBytes(this.s);if(h==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return sr(Uint8Array.of(this.recovery),_,M)}return sr(_,M)}toHex(h){return jr(this.toBytes(h))}assertValidity(){}static fromCompact(h){return z.fromBytes(de("sig",h),"compact")}static fromDER(h){return z.fromBytes(de("sig",h),"der")}normalizeS(){return this.hasHighS()?new z(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return jr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return jr(this.toBytes("compact"))}}const j=e.bits2int||function(h){if(h.length>8192)throw new Error("input is too large");const _=Yi(h),M=h.length*8-l;return M>0?_>>BigInt(M):_},et=e.bits2int_modN||function(h){return o.create(j(h))},ot=Qn(l);function Q(a){return ko("num < 2^"+l,a,kr,ot),o.toBytes(a)}function rt(a,h){return Ye(a,void 0,"message"),h?Ye(t(a),void 0,"prehashed message"):a}function q(a,h,_){if(["recovered","canonical"].some(H=>H in _))throw new Error("sign() legacy options not supported");const{lowS:M,prehash:C,extraEntropy:I}=eo(_,R);a=rt(a,C);const w=et(a),p=fn(o,h),c=[Q(p),Q(w)];if(I!=null&&I!==!1){const H=I===!0?r(k.secretKey):I;c.push(de("extraEntropy",H))}const f=sr(...c),S=w;function P(H){const nt=j(H);if(!o.isValidNot0(nt))return;const lt=o.inv(nt),pt=n.BASE.multiply(nt).toAffine(),Ut=o.create(pt.x);if(Ut===kr)return;const Pt=o.create(lt*o.create(S+Ut*p));if(Pt===kr)return;let Kt=(pt.x===Ut?0:2)|Number(pt.y&yn),tr=Pt;return M&&O(Pt)&&(tr=o.neg(Pt),Kt^=1),new z(Ut,tr,Kt)}return{seed:f,k2sig:P}}function F(a,h,_={}){a=de("message",a);const{seed:M,k2sig:C}=q(a,h,_);return bf(t.outputLen,o.BYTES,s)(M,C)}function W(a){let h;const _=typeof a=="string"||Jn(a),M=!_&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!_&&!M)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(M)h=new z(a.r,a.s);else if(_){try{h=z.fromBytes(de("sig",a),"der")}catch(C){if(!(C instanceof yr.Err))throw C}if(!h)try{h=z.fromBytes(de("sig",a),"compact")}catch{return!1}}return h||!1}function L(a,h,_,M={}){const{lowS:C,prehash:I,format:w}=eo(M,R);if(_=de("publicKey",_),h=rt(de("message",h),I),"strict"in M)throw new Error("options.strict was renamed to lowS");const p=w===void 0?W(a):z.fromBytes(de("sig",a),w);if(p===!1)return!1;try{const c=n.fromBytes(_);if(C&&p.hasHighS())return!1;const{r:f,s:S}=p,P=et(h),H=o.inv(S),nt=o.create(P*H),lt=o.create(f*H),pt=n.BASE.multiplyUnsafe(nt).add(c.multiplyUnsafe(lt));return pt.is0()?!1:o.create(pt.x)===f}catch{return!1}}function E(a,h,_={}){const{prehash:M}=eo(_,R);return h=rt(h,M),z.fromBytes(a,"recovered").recoverPublicKey(h).toBytes()}return Object.freeze({keygen:g,getPublicKey:d,getSharedSecret:x,utils:A,lengths:k,Point:n,sign:F,verify:L,recoverPublicKey:E,Signature:z,hash:t})}function Ap(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Qr(t.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:i}}function Ip(n){const{CURVE:t,curveOpts:e}=Ap(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,hash:n.hash,ecdsaOpts:r}}function xp(n,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},n,qu(e.Fn.ORDER,e.Fn.BITS))})}function Bp(n){const{CURVE:t,curveOpts:e,hash:r,ecdsaOpts:s}=Ip(n),i=kp(t,e),o=Sp(i,r,s);return xp(n,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Rp(n,t){const e=r=>Bp({...n,hash:r});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sa={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Tp={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},cc=BigInt(2);function Lp(n){const t=sa.p,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),u=BigInt(44),l=BigInt(88),g=n*n*n%t,d=g*g*n%t,x=fe(d,e,t)*d%t,A=fe(x,e,t)*d%t,k=fe(A,cc,t)*g%t,R=fe(k,s,t)*k%t,D=fe(R,i,t)*R%t,O=fe(D,u,t)*D%t,$=fe(O,l,t)*O%t,V=fe($,u,t)*D%t,z=fe(V,e,t)*d%t,j=fe(z,o,t)*R%t,et=fe(j,r,t)*g%t,ot=fe(et,cc,t);if(!So.eql(So.sqr(ot),n))throw new Error("Cannot find square root");return ot}const So=Qr(sa.p,{sqrt:Lp}),oa=Rp({...sa,Fp:So,lowS:!0,endo:Tp},Tu),Mp=In.utils.randomPrivateKey,uc=()=>{const n=In.utils.randomPrivateKey(),t=Fi(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},Fi=In.getPublicKey;function lc(n){try{return In.ExtendedPoint.fromHex(n),!0}catch{return!1}}const aa=(n,t)=>In.sign(n,t.slice(0,32)),Pp=In.verify,Lt=n=>yt.isBuffer(n)?n:n instanceof Uint8Array?yt.from(n.buffer,n.byteOffset,n.byteLength):yt.from(n);let ca=class{constructor(t){Object.assign(this,t)}encode(){return yt.from(Hs.serialize(Nn,this))}static decode(t){return Hs.deserialize(Nn,this,t)}static decodeUnchecked(t){return Hs.deserializeUnchecked(Nn,this,t)}};class Cp extends ca{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const Nn=new Map;var bl;const vl=32,ur=32;function Op(n){return n._bn!==void 0}let hc=1;class at extends ca{constructor(t){if(super({}),this._bn=void 0,Op(t))this._bn=t._bn;else{if(typeof t=="string"){const e=pe.decode(t);if(e.length!=ur)throw new Error("Invalid public key input");this._bn=new Pi(e)}else this._bn=new Pi(t);if(this._bn.byteLength()>ur)throw new Error("Invalid public key input")}}static unique(){const t=new at(hc);return hc+=1,new at(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return pe.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(yt);if(t.length===ur)return t;const e=yt.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=yt.concat([t.toBuffer(),yt.from(e),r.toBuffer()]),i=Ci(s);return new at(i)}static createProgramAddressSync(t,e){let r=yt.alloc(0);t.forEach(function(i){if(i.length>vl)throw new TypeError("Max seed length exceeded");r=yt.concat([r,Lt(i)])}),r=yt.concat([r,e.toBuffer(),yt.from("ProgramDerivedAddress")]);const s=Ci(r);if(lc(s))throw new Error("Invalid seeds, address must fall off the curve");return new at(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(yt.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new at(t);return lc(e.toBytes())}}bl=at;at.default=new bl("11111111111111111111111111111111");Nn.set(at,{kind:"struct",fields:[["_bn","u256"]]});class Up{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=Lt(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=Lt(Mp()),this._publicKey=Lt(Fi(this._secretKey))}get publicKey(){return new at(this._publicKey)}get secretKey(){return yt.concat([this._secretKey,this._publicKey],64)}}const Np=new at("BPFLoader1111111111111111111111111111111111"),Lr=1232,es=127,$n=64;class ua extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ua.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class la extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(la.prototype,"name",{value:"TransactionExpiredTimeoutError"});class dn extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(dn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Wn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Ct=(n="publicKey")=>K.blob(32,n),Dp=(n="signature")=>K.blob(64,n),$r=(n="string")=>{const t=K.struct([K.u32("length"),K.u32("lengthPadding"),K.blob(K.offset(K.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,u)=>{const l={chars:yt.from(i,"utf8")};return r(l,o,u)},s.alloc=i=>K.u32().span+K.u32().span+yt.from(i,"utf8").length,s},zp=(n="authorized")=>K.struct([Ct("staker"),Ct("withdrawer")],n),Fp=(n="lockup")=>K.struct([K.ns64("unixTimestamp"),K.ns64("epoch"),Ct("custodian")],n),Kp=(n="voteInit")=>K.struct([Ct("nodePubkey"),Ct("authorizedVoter"),Ct("authorizedWithdrawer"),K.u8("commission")],n),qp=(n="voteAuthorizeWithSeedArgs")=>K.struct([K.u32("voteAuthorizationType"),Ct("currentAuthorityDerivedKeyOwnerPubkey"),$r("currentAuthorityDerivedKeySeed"),Ct("newAuthorized")],n);function El(n,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return El({layout:s},t[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=e(s)}),r}function Ue(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function Ke(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function Dt(n,t){if(!n)throw new Error(t||"Assertion failed")}class rs{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=o=>{const u=o.toBase58();let l=r.get(u);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(u,l)),l},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const u of o.keys){const l=s(u.pubkey);l.isSigner||=u.isSigner,l.isWritable||=u.isWritable}}return new rs(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Dt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,l])=>l.isSigner&&l.isWritable),r=t.filter(([,l])=>l.isSigner&&!l.isWritable),s=t.filter(([,l])=>!l.isSigner&&l.isWritable),i=t.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Dt(e.length>0,"Expected at least one writable signer key");const[l]=e[0];Dt(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...e.map(([l])=>new at(l)),...r.map(([l])=>new at(l)),...s.map(([l])=>new at(l)),...i.map(([l])=>new at(l))];return[o,u]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const u=new at(i),l=t.findIndex(g=>g.equals(u));l>=0&&(Dt(l<256,"Max lookup table index exceeded"),r.push(l),s.push(u),this.keyMetaMap.delete(i))}return[r,s]}}const kl="Reached end of buffer unexpectedly";function or(n){if(n.length===0)throw new Error(kl);return n.shift()}function Ne(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(kl);return n.splice(...t)}class Je{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new at(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:pe.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Wn(this.staticAccountKeys)}static compile(t){const e=rs.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),o=new Wn(s).compileInstructions(t.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:pe.encode(u.data)}));return new Je({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Ke(e,t);const r=this.instructions.map(x=>{const{accounts:A,programIdIndex:k}=x,R=Array.from(pe.decode(x.data));let D=[];Ke(D,A.length);let O=[];return Ke(O,R.length),{programIdIndex:k,keyIndicesCount:yt.from(D),keyIndices:A,dataLength:yt.from(O),data:R}});let s=[];Ke(s,r.length);let i=yt.alloc(Lr);yt.from(s).copy(i);let o=s.length;r.forEach(x=>{const k=K.struct([K.u8("programIdIndex"),K.blob(x.keyIndicesCount.length,"keyIndicesCount"),K.seq(K.u8("keyIndex"),x.keyIndices.length,"keyIndices"),K.blob(x.dataLength.length,"dataLength"),K.seq(K.u8("userdatum"),x.data.length,"data")]).encode(x,i,o);o+=k}),i=i.slice(0,o);const u=K.struct([K.blob(1,"numRequiredSignatures"),K.blob(1,"numReadonlySignedAccounts"),K.blob(1,"numReadonlyUnsignedAccounts"),K.blob(e.length,"keyCount"),K.seq(Ct("key"),t,"keys"),Ct("recentBlockhash")]),l={numRequiredSignatures:yt.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:yt.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:yt.from([this.header.numReadonlyUnsignedAccounts]),keyCount:yt.from(e),keys:this.accountKeys.map(x=>Lt(x.toBytes())),recentBlockhash:pe.decode(this.recentBlockhash)};let g=yt.alloc(2048);const d=u.encode(l,g);return i.copy(g,d),g.slice(0,d+i.length)}static from(t){let e=[...t];const r=or(e);if(r!==(r&es))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=or(e),i=or(e),o=Ue(e);let u=[];for(let A=0;A<o;A++){const k=Ne(e,0,ur);u.push(new at(yt.from(k)))}const l=Ne(e,0,ur),g=Ue(e);let d=[];for(let A=0;A<g;A++){const k=or(e),R=Ue(e),D=Ne(e,0,R),O=Ue(e),$=Ne(e,0,O),V=pe.encode(yt.from($));d.push({programIdIndex:k,accounts:D,data:V})}const x={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:pe.encode(yt.from(l)),accountKeys:u,instructions:d};return new Je(x)}}class Zr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Wn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,u)=>o+u.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=rs.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const d of i){const x=e.extractTableLookup(d);if(x!==void 0){const[A,{writable:k,readonly:R}]=x;r.push(A),s.writable.push(...k),s.readonly.push(...R)}}const[o,u]=e.getMessageComponents(),g=new Wn(u,s).compileInstructions(t.instructions);return new Zr({header:o,staticAccountKeys:u,recentBlockhash:t.recentBlockhash,compiledInstructions:g,addressTableLookups:r})}serialize(){const t=Array();Ke(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Ke(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Ke(i,this.addressTableLookups.length);const o=K.struct([K.u8("prefix"),K.struct([K.u8("numRequiredSignatures"),K.u8("numReadonlySignedAccounts"),K.u8("numReadonlyUnsignedAccounts")],"header"),K.blob(t.length,"staticAccountKeysLength"),K.seq(Ct(),this.staticAccountKeys.length,"staticAccountKeys"),Ct("recentBlockhash"),K.blob(r.length,"instructionsLength"),K.blob(e.length,"serializedInstructions"),K.blob(i.length,"addressTableLookupsLength"),K.blob(s.length,"serializedAddressTableLookups")]),u=new Uint8Array(Lr),g=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:pe.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},u);return u.slice(0,g)}serializeInstructions(){let t=0;const e=new Uint8Array(Lr);for(const r of this.compiledInstructions){const s=Array();Ke(s,r.accountKeyIndexes.length);const i=Array();Ke(i,r.data.length);const o=K.struct([K.u8("programIdIndex"),K.blob(s.length,"encodedAccountKeyIndexesLength"),K.seq(K.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),K.blob(i.length,"encodedDataLength"),K.blob(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Lr);for(const r of this.addressTableLookups){const s=Array();Ke(s,r.writableIndexes.length);const i=Array();Ke(i,r.readonlyIndexes.length);const o=K.struct([Ct("accountKey"),K.blob(s.length,"encodedWritableIndexesLength"),K.seq(K.u8(),r.writableIndexes.length,"writableIndexes"),K.blob(i.length,"encodedReadonlyIndexesLength"),K.seq(K.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=or(e),s=r&es;Dt(r!==s,"Expected versioned message but received legacy message");const i=s;Dt(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:or(e),numReadonlySignedAccounts:or(e),numReadonlyUnsignedAccounts:or(e)},u=[],l=Ue(e);for(let R=0;R<l;R++)u.push(new at(Ne(e,0,ur)));const g=pe.encode(Ne(e,0,ur)),d=Ue(e),x=[];for(let R=0;R<d;R++){const D=or(e),O=Ue(e),$=Ne(e,0,O),V=Ue(e),z=new Uint8Array(Ne(e,0,V));x.push({programIdIndex:D,accountKeyIndexes:$,data:z})}const A=Ue(e),k=[];for(let R=0;R<A;R++){const D=new at(Ne(e,0,ur)),O=Ue(e),$=Ne(e,0,O),V=Ue(e),z=Ne(e,0,V);k.push({accountKey:D,writableIndexes:$,readonlyIndexes:z})}return new Zr({header:o,staticAccountKeys:u,recentBlockhash:g,compiledInstructions:x,addressTableLookups:k})}}const ha={deserializeMessageVersion(n){const t=n[0],e=t&es;return e===t?"legacy":e},deserialize:n=>{const t=ha.deserializeMessageVersion(n);if(t==="legacy")return Je.from(n);if(t===0)return Zr.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let gr=(function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n})({});const $p=yt.alloc($n).fill(0);class Ft{constructor(t){this.keys=void 0,this.programId=void 0,this.data=yt.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Nt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Ft(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let D=0;D<e.length;D++)if(e[D].programId===void 0)throw new Error(`Transaction instruction index ${D} has undefined program id`);const s=[],i=[];e.forEach(D=>{D.keys.forEach($=>{i.push({...$})});const O=D.programId.toString();s.includes(O)||s.push(O)}),s.forEach(D=>{i.push({pubkey:new at(D),isSigner:!1,isWritable:!1})});const o=[];i.forEach(D=>{const O=D.pubkey.toString(),$=o.findIndex(V=>V.pubkey.toString()===O);$>-1?(o[$].isWritable=o[$].isWritable||D.isWritable,o[$].isSigner=o[$].isSigner||D.isSigner):o.push(D)}),o.sort(function(D,O){if(D.isSigner!==O.isSigner)return D.isSigner?-1:1;if(D.isWritable!==O.isWritable)return D.isWritable?-1:1;const $={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return D.pubkey.toBase58().localeCompare(O.pubkey.toBase58(),"en",$)});const u=o.findIndex(D=>D.pubkey.equals(r));if(u>-1){const[D]=o.splice(u,1);D.isSigner=!0,D.isWritable=!0,o.unshift(D)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const D of this.signatures){const O=o.findIndex($=>$.pubkey.equals(D.publicKey));if(O>-1)o[O].isSigner||(o[O].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${D.publicKey.toString()}`)}let l=0,g=0,d=0;const x=[],A=[];o.forEach(({pubkey:D,isSigner:O,isWritable:$})=>{O?(x.push(D.toString()),l+=1,$||(g+=1)):(A.push(D.toString()),$||(d+=1))});const k=x.concat(A),R=e.map(D=>{const{data:O,programId:$}=D;return{programIdIndex:k.indexOf($.toString()),accounts:D.keys.map(V=>k.indexOf(V.pubkey.toString())),data:pe.encode(O)}});return R.forEach(D=>{Dt(D.programIdIndex>=0),D.accounts.forEach(O=>Dt(O>=0))}),new Je({header:{numRequiredSignatures:l,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:d},accountKeys:k,recentBlockhash:t,instructions:R})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=aa(r,s.secretKey);this._addSignature(s.publicKey,Lt(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Dt(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=yt.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||=[]).push(i):Pp(s,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Ke(r,e.length);const s=r.length+e.length*64+t.length,i=yt.alloc(s);return Dt(e.length<256),yt.from(r).copy(i,0),e.forEach(({signature:o},u)=>{o!==null&&(Dt(o.length===64,"signature has invalid length"),yt.from(o).copy(i,r.length+u*64))}),t.copy(i,r.length+e.length*64),Dt(i.length<=Lr,`Transaction too large: ${i.length} > ${Lr}`),i}get keys(){return Dt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Dt(this.instructions.length===1),this.instructions[0].programId}get data(){return Dt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Ue(e);let s=[];for(let i=0;i<r;i++){const o=Ne(e,0,$n);s.push(pe.encode(yt.from(o)))}return Nt.populate(Je.from(e),s)}static populate(t,e=[]){const r=new Nt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==pe.encode($p)?null:pe.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const u=t.accountKeys[o];return{pubkey:u,isSigner:r.signatures.some(l=>l.publicKey.toString()===u.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new Ft({keys:i,programId:t.accountKeys[s.programIdIndex],data:pe.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}class fa{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l}=r,g=o-u;Dt(g>0,"Message header is invalid");const d=t.staticAccountKeys.length-o-l;Dt(d>=0,"Message header is invalid");const x=t.getAccountKeys(e),A=x.get(0);if(A===void 0)throw new Error("Failed to decompile message because no account keys were found");const k=[];for(const R of s){const D=[];for(const $ of R.accountKeyIndexes){const V=x.get($);if(V===void 0)throw new Error(`Failed to find key for account key index ${$}`);const z=$<o;let j;z?j=$<g:$<x.staticAccountKeys.length?j=$-o<d:j=$-x.staticAccountKeys.length<x.accountKeysFromLookups.writable.length,D.push({pubkey:V,isSigner:$<r.numRequiredSignatures,isWritable:j})}const O=x.get(R.programIdIndex);if(O===void 0)throw new Error(`Failed to find program id for program id index ${R.programIdIndex}`);k.push(new Ft({programId:O,data:Lt(R.data),keys:D}))}return new fa({payerKey:A,instructions:k,recentBlockhash:i})}compileToLegacyMessage(){return Je.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Zr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class da{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Dt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let s=0;s<t.header.numRequiredSignatures;s++)r.push(new Uint8Array($n));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Ke(e,this.signatures.length);const r=K.struct([K.blob(e.length,"encodedSignaturesLength"),K.seq(Dp(),this.signatures.length,"signatures"),K.blob(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const r=[],s=Ue(e);for(let o=0;o<s;o++)r.push(new Uint8Array(Ne(e,0,$n)));const i=ha.deserialize(new Uint8Array(e));return new da(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=r.findIndex(o=>o.equals(s.publicKey));Dt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=aa(e,s.secretKey)}}addSignature(t,e){Dt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Dt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const Wp=160,Vp=64,Hp=Wp/Vp,_l=1e3/Hp,Ze=new at("SysvarC1ock11111111111111111111111111111111"),jp=new at("SysvarEpochSchedu1e111111111111111111111111"),Gp=new at("Sysvar1nstructions1111111111111111111111111"),Ai=new at("SysvarRecentB1ockHashes11111111111111111111"),Yr=new at("SysvarRent111111111111111111111111111111111"),Zp=new at("SysvarRewards111111111111111111111111111111"),Yp=new at("SysvarS1otHashes111111111111111111111111111"),Xp=new at("SysvarS1otHistory11111111111111111111111111"),Ii=new at("SysvarStakeHistory1111111111111111111111111");class Cr extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let u;switch(t){case"send":u=`Transaction ${e} resulted in an error. 
${r}. `+i+o;break;case"simulate":u=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:u=`Unknown action '${(l=>l)(t)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const Jp={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class mt extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function Ki(n,t,e,r){const s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await n.sendTransaction(t,e,s);let o;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)o=(await n.confirmTransaction({abortSignal:r?.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:u}=t.nonceInfo,l=u.keys[0].pubkey;o=(await n.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:l,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await n.confirmTransaction(i,r&&r.commitment)).value;if(o.err)throw i!=null?new Cr({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function zr(n){return new Promise(t=>setTimeout(t,n))}function Ot(n,t){const e=n.layout.span>=0?n.layout.span:El(n,t),r=yt.alloc(e),s=Object.assign({instruction:n.index},t);return n.layout.encode(s,r),r}function zt(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const Sl=K.nu64("lamportsPerSignature"),Al=K.struct([K.u32("version"),K.u32("state"),Ct("authorizedPubkey"),Ct("nonce"),K.struct([Sl],"feeCalculator")]),Ao=Al.span;class ns{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Al.decode(Lt(t),0);return new ns({authorizedPubkey:new at(e.authorizedPubkey),nonce:new at(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function Sn(n){const t=K.blob(8,n),e=t.decode.bind(t),r=t.encode.bind(t),s=t,i=xd();return s.decode=(o,u)=>{const l=e(o,u);return i.decode(l)},s.encode=(o,u,l)=>{const g=i.encode(o);return r(g,u,l)},s}class Qp{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=K.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Xt))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:s}=zt(Xt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new at(s)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=zt(Xt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:s}=zt(Xt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new at(s)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=zt(Xt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:s,programId:i}=zt(Xt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new at(e),seed:r,space:s,programId:new at(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=zt(Xt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new at(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:s}=zt(Xt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new at(e),seed:r,programId:new at(s)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:s,space:i,programId:o}=zt(Xt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new at(e),seed:r,lamports:s,space:i,programId:new at(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=zt(Xt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new at(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),zt(Xt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=zt(Xt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=zt(Xt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new at(e)}}static checkProgramId(t){if(!t.equals(ye.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Xt=Object.freeze({Create:{index:0,layout:K.struct([K.u32("instruction"),K.ns64("lamports"),K.ns64("space"),Ct("programId")])},Assign:{index:1,layout:K.struct([K.u32("instruction"),Ct("programId")])},Transfer:{index:2,layout:K.struct([K.u32("instruction"),Sn("lamports")])},CreateWithSeed:{index:3,layout:K.struct([K.u32("instruction"),Ct("base"),$r("seed"),K.ns64("lamports"),K.ns64("space"),Ct("programId")])},AdvanceNonceAccount:{index:4,layout:K.struct([K.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:K.struct([K.u32("instruction"),K.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:K.struct([K.u32("instruction"),Ct("authorized")])},AuthorizeNonceAccount:{index:7,layout:K.struct([K.u32("instruction"),Ct("authorized")])},Allocate:{index:8,layout:K.struct([K.u32("instruction"),K.ns64("space")])},AllocateWithSeed:{index:9,layout:K.struct([K.u32("instruction"),Ct("base"),$r("seed"),K.ns64("space"),Ct("programId")])},AssignWithSeed:{index:10,layout:K.struct([K.u32("instruction"),Ct("base"),$r("seed"),Ct("programId")])},TransferWithSeed:{index:11,layout:K.struct([K.u32("instruction"),Sn("lamports"),$r("seed"),Ct("programId")])},UpgradeNonceAccount:{index:12,layout:K.struct([K.u32("instruction")])}});class ye{constructor(){}static createAccount(t){const e=Xt.Create,r=Ot(e,{lamports:t.lamports,space:t.space,programId:Lt(t.programId.toBuffer())});return new Ft({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=Xt.TransferWithSeed;e=Ot(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:Lt(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Xt.Transfer;e=Ot(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Ft({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=Xt.AssignWithSeed;e=Ot(s,{base:Lt(t.basePubkey.toBuffer()),seed:t.seed,programId:Lt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Xt.Assign;e=Ot(s,{programId:Lt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ft({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Xt.CreateWithSeed,r=Ot(e,{base:Lt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:Lt(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Ft({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new Nt;"basePubkey"in t&&"seed"in t?e.add(ye.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Ao,programId:this.programId})):e.add(ye.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Ao,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Xt.InitializeNonceAccount,r=Ot(e,{authorized:Lt(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ai,isSigner:!1,isWritable:!1},{pubkey:Yr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Ft(s)}static nonceAdvance(t){const e=Xt.AdvanceNonceAccount,r=Ot(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ai,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Ft(s)}static nonceWithdraw(t){const e=Xt.WithdrawNonceAccount,r=Ot(e,{lamports:t.lamports});return new Ft({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ai,isSigner:!1,isWritable:!1},{pubkey:Yr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Xt.AuthorizeNonceAccount,r=Ot(e,{authorized:Lt(t.newAuthorizedPubkey.toBuffer())});return new Ft({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=Xt.AllocateWithSeed;e=Ot(s,{base:Lt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:Lt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Xt.Allocate;e=Ot(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ft({keys:r,programId:this.programId,data:e})}}ye.programId=new at("11111111111111111111111111111111");const t0=Lr-300;class Xr{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Xr.chunkSize)+1+1)}static async load(t,e,r,s,i){{const x=await t.getMinimumBalanceForRentExemption(i.length),A=await t.getAccountInfo(r.publicKey,"confirmed");let k=null;if(A!==null){if(A.executable)return console.error("Program load failed, account is already executable"),!1;A.data.length!==i.length&&(k=k||new Nt,k.add(ye.allocate({accountPubkey:r.publicKey,space:i.length}))),A.owner.equals(s)||(k=k||new Nt,k.add(ye.assign({accountPubkey:r.publicKey,programId:s}))),A.lamports<x&&(k=k||new Nt,k.add(ye.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:x-A.lamports})))}else k=new Nt().add(ye.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:x>0?x:1,space:i.length,programId:s}));k!==null&&await Ki(t,k,[e,r],{commitment:"confirmed"})}const o=K.struct([K.u32("instruction"),K.u32("offset"),K.u32("bytesLength"),K.u32("bytesLengthPadding"),K.seq(K.u8("byte"),K.offset(K.u32(),-8),"bytes")]),u=Xr.chunkSize;let l=0,g=i,d=[];for(;g.length>0;){const x=g.slice(0,u),A=yt.alloc(u+16);o.encode({instruction:0,offset:l,bytes:x,bytesLength:0,bytesLengthPadding:0},A);const k=new Nt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:A});d.push(Ki(t,k,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await zr(1e3/4),l+=u,g=g.slice(u)}await Promise.all(d);{const x=K.struct([K.u32("instruction")]),A=yt.alloc(x.span);x.encode({instruction:1},A);const k=new Nt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Yr,isSigner:!1,isWritable:!1}],programId:s,data:A}),R="processed",D=await t.sendTransaction(k,[e,r],{preflightCommitment:R}),{context:O,value:$}=await t.confirmTransaction({signature:D,lastValidBlockHeight:k.lastValidBlockHeight,blockhash:k.recentBlockhash},R);if($.err)throw new Error(`Transaction ${D} failed (${JSON.stringify($)})`);for(;;){try{if(await t.getSlot({commitment:R})>O.slot)break}catch{}await new Promise(V=>setTimeout(V,Math.round(_l/2)))}}return!0}}Xr.chunkSize=t0;const e0=new at("BPFLoader2111111111111111111111111111111111");class r0{static getMinNumSignatures(t){return Xr.getMinNumSignatures(t)}static load(t,e,r,s,i){return Xr.load(t,e,r,i,s)}}function n0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ro,fc;function i0(){if(fc)return ro;fc=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,o,u,l,g,d,x;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(x=n.call(r),x==="[object Array]"){for(u="[",o=r.length-1,i=0;i<o;i++)u+=e(r[i],!0)+",";return o>-1&&(u+=e(r[i],!0)),u+"]"}else if(x==="[object Object]"){for(l=t(r).sort(),o=l.length,u="",i=0;i<o;)g=l[i],d=e(r[g],!1),d!==void 0&&(u&&(u+=","),u+=JSON.stringify(g)+":"+d),i++;return"{"+u+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return ro=function(r){var s=e(r,!1);if(s!==void 0)return""+s},ro}var s0=i0(),dc=n0(s0);const Pn=32;function no(n){let t=0;for(;n>1;)n/=2,t++;return t}function o0(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Il{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=no(o0(t+Pn+1))-no(Pn)-1,r=this.getSlotsInEpoch(e),s=t-(r-Pn);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Pn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+no(Pn)):this.slotsPerEpoch}}var a0=globalThis.fetch;class c0 extends up{constructor(t,e,r){const s=i=>{const o=ap(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function u0(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const pc=56;class Io{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=u0(l0,t),r=t.length-pc;Dt(r>=0,"lookup table is invalid"),Dt(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=K.struct([K.seq(Ct(),s,"addresses")]).decode(t.slice(pc));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new at(e.authority[0]):void 0,addresses:i.map(o=>new at(o))}}}const l0={index:1,layout:K.struct([K.u32("typeIndex"),Sn("deactivationSlot"),K.nu64("lastExtendedSlot"),K.u8("lastExtendedStartIndex"),K.u8(),K.seq(Ct(),K.offset(K.u8(),-1),"authority")])},h0=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function f0(n){const t=n.match(h0);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,o=n.startsWith("https:")?"wss:":"ws:",u=s==null?null:parseInt(s.slice(1),10),l=u==null?"":`:${u+1}`;return`${o}//${r}${l}${i}`}const ue=ni(ra(at),ut(),n=>new at(n)),xl=na([ut(),ce("base64")]),pa=ni(ra(yt),xl,n=>yt.from(n[0],"base64")),Bl=30*1e3;function d0(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Yt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function gc(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Rl(n){return Pe([ct({jsonrpc:ce("2.0"),id:ut(),result:n}),ct({jsonrpc:ce("2.0"),id:ut(),error:ct({code:xn(),message:ut(),data:bt(Pd())})})])}const p0=Rl(xn());function Tt(n){return ni(Rl(n),p0,t=>"error"in t?t:{...t,result:ht(t.result,n)})}function ge(n){return Tt(ct({context:ct({slot:J()}),value:n}))}function is(n){return ct({context:ct({slot:J()}),value:n})}function io(n,t){return n===0?new Zr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new at(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:pe.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Je(t)}const g0=ct({foundation:J(),foundationTerm:J(),initial:J(),taper:J(),terminal:J()}),y0=Tt(ft(dt(ct({epoch:J(),effectiveSlot:J(),amount:J(),postBalance:J(),commission:bt(dt(J()))})))),m0=ft(ct({slot:J(),prioritizationFee:J()})),w0=ct({total:J(),validator:J(),foundation:J(),epoch:J()}),b0=ct({epoch:J(),slotIndex:J(),slotsInEpoch:J(),absoluteSlot:J(),blockHeight:bt(J()),transactionCount:bt(J())}),v0=ct({slotsPerEpoch:J(),leaderScheduleSlotOffset:J(),warmup:lr(),firstNormalEpoch:J(),firstNormalSlot:J()}),E0=nl(ut(),ft(J())),en=dt(Pe([ct({}),ut()])),k0=ct({err:en}),_0=ce("receivedSignature"),S0=ct({"solana-core":ut(),"feature-set":bt(J())}),A0=ct({program:ut(),programId:ue,parsed:xn()}),I0=ct({programId:ue,accounts:ft(ue),data:ut()}),yc=ge(ct({err:dt(Pe([ct({}),ut()])),logs:dt(ft(ut())),accounts:bt(dt(ft(dt(ct({executable:lr(),owner:ut(),lamports:J(),data:ft(ut()),rentEpoch:bt(J())}))))),unitsConsumed:bt(J()),returnData:bt(dt(ct({programId:ut(),data:na([ut(),ce("base64")])}))),innerInstructions:bt(dt(ft(ct({index:J(),instructions:ft(Pe([A0,I0]))}))))})),x0=ge(ct({byIdentity:nl(ut(),ft(J())),range:ct({firstSlot:J(),lastSlot:J()})}));function B0(n,t,e,r,s,i){const o=e||a0;let u;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(d,x)=>{const A=await new Promise((k,R)=>{try{r(d,x,(D,O)=>k([D,O]))}catch(D){R(D)}});return await o(...A)}),new np(async(d,x)=>{const A={method:"POST",body:d,agent:u,headers:Object.assign({"Content-Type":"application/json"},t||{},Bg)};try{let k=5,R,D=500;for(;l?R=await l(n,A):R=await o(n,A),!(R.status!==429||s===!0||(k-=1,k===0));)console.error(`Server responded with ${R.status} ${R.statusText}.  Retrying after ${D}ms delay...`),await zr(D),D*=2;const O=await R.text();R.ok?x(null,O):x(new Error(`${R.status} ${R.statusText}: ${O}`))}catch(k){k instanceof Error&&x(k)}},{})}function R0(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,o)=>{if(i){s(i);return}r(o)})})}function T0(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}e(o)})})}const L0=Tt(g0),M0=Tt(w0),P0=Tt(m0),C0=Tt(b0),O0=Tt(v0),U0=Tt(E0),N0=Tt(J()),D0=ge(ct({total:J(),circulating:J(),nonCirculating:J(),nonCirculatingAccounts:ft(ue)})),xo=ct({amount:ut(),uiAmount:dt(J()),decimals:J(),uiAmountString:bt(ut())}),z0=ge(ft(ct({address:ue,amount:ut(),uiAmount:dt(J()),decimals:J(),uiAmountString:bt(ut())}))),F0=ge(ft(ct({pubkey:ue,account:ct({executable:lr(),owner:ue,lamports:J(),data:pa,rentEpoch:J()})}))),Bo=ct({program:ut(),parsed:xn(),space:J()}),K0=ge(ft(ct({pubkey:ue,account:ct({executable:lr(),owner:ue,lamports:J(),data:Bo,rentEpoch:J()})}))),q0=ge(ft(ct({lamports:J(),address:ue}))),Vn=ct({executable:lr(),owner:ue,lamports:J(),data:pa,rentEpoch:J()}),$0=ct({pubkey:ue,account:Vn}),W0=ni(Pe([ra(yt),Bo]),Pe([xl,Bo]),n=>Array.isArray(n)?ht(n,pa):n),Ro=ct({executable:lr(),owner:ue,lamports:J(),data:W0,rentEpoch:J()}),V0=ct({pubkey:ue,account:Ro}),H0=ct({state:Pe([ce("active"),ce("inactive"),ce("activating"),ce("deactivating")]),active:J(),inactive:J()}),j0=Tt(ft(ct({signature:ut(),slot:J(),err:en,memo:dt(ut()),blockTime:bt(dt(J()))}))),G0=Tt(ft(ct({signature:ut(),slot:J(),err:en,memo:dt(ut()),blockTime:bt(dt(J()))}))),Z0=ct({subscription:J(),result:is(Vn)}),Y0=ct({pubkey:ue,account:Vn}),X0=ct({subscription:J(),result:is(Y0)}),J0=ct({parent:J(),slot:J(),root:J()}),Q0=ct({subscription:J(),result:J0}),tg=Pe([ct({type:Pe([ce("firstShredReceived"),ce("completed"),ce("optimisticConfirmation"),ce("root")]),slot:J(),timestamp:J()}),ct({type:ce("createdBank"),parent:J(),slot:J(),timestamp:J()}),ct({type:ce("frozen"),slot:J(),timestamp:J(),stats:ct({numTransactionEntries:J(),numSuccessfulTransactions:J(),numFailedTransactions:J(),maxTransactionsPerEntry:J()})}),ct({type:ce("dead"),slot:J(),timestamp:J(),err:ut()})]),eg=ct({subscription:J(),result:tg}),rg=ct({subscription:J(),result:is(Pe([k0,_0]))}),ng=ct({subscription:J(),result:J()}),ig=ct({pubkey:ut(),gossip:dt(ut()),tpu:dt(ut()),rpc:dt(ut()),version:dt(ut())}),mc=ct({votePubkey:ut(),nodePubkey:ut(),activatedStake:J(),epochVoteAccount:lr(),epochCredits:ft(na([J(),J(),J()])),commission:J(),lastVote:J(),rootSlot:dt(J())}),sg=Tt(ct({current:ft(mc),delinquent:ft(mc)})),og=Pe([ce("processed"),ce("confirmed"),ce("finalized")]),ag=ct({slot:J(),confirmations:dt(J()),err:en,confirmationStatus:bt(og)}),cg=ge(ft(dt(ag))),ug=Tt(J()),Tl=ct({accountKey:ue,writableIndexes:ft(J()),readonlyIndexes:ft(J())}),ga=ct({signatures:ft(ut()),message:ct({accountKeys:ft(ut()),header:ct({numRequiredSignatures:J(),numReadonlySignedAccounts:J(),numReadonlyUnsignedAccounts:J()}),instructions:ft(ct({accounts:ft(J()),data:ut(),programIdIndex:J()})),recentBlockhash:ut(),addressTableLookups:bt(ft(Tl))})}),Ll=ct({pubkey:ue,signer:lr(),writable:lr(),source:bt(Pe([ce("transaction"),ce("lookupTable")]))}),Ml=ct({accountKeys:ft(Ll),signatures:ft(ut())}),Pl=ct({parsed:xn(),program:ut(),programId:ue}),Cl=ct({accounts:ft(ue),data:ut(),programId:ue}),lg=Pe([Cl,Pl]),hg=Pe([ct({parsed:xn(),program:ut(),programId:ut()}),ct({accounts:ft(ut()),data:ut(),programId:ut()})]),Ol=ni(lg,hg,n=>"accounts"in n?ht(n,Cl):ht(n,Pl)),Ul=ct({signatures:ft(ut()),message:ct({accountKeys:ft(Ll),instructions:ft(Ol),recentBlockhash:ut(),addressTableLookups:bt(dt(ft(Tl)))})}),qi=ct({accountIndex:J(),mint:ut(),owner:bt(ut()),programId:bt(ut()),uiTokenAmount:xo}),Nl=ct({writable:ft(ue),readonly:ft(ue)}),ss=ct({err:en,fee:J(),innerInstructions:bt(dt(ft(ct({index:J(),instructions:ft(ct({accounts:ft(J()),data:ut(),programIdIndex:J()}))})))),preBalances:ft(J()),postBalances:ft(J()),logMessages:bt(dt(ft(ut()))),preTokenBalances:bt(dt(ft(qi))),postTokenBalances:bt(dt(ft(qi))),loadedAddresses:bt(Nl),computeUnitsConsumed:bt(J()),costUnits:bt(J())}),ya=ct({err:en,fee:J(),innerInstructions:bt(dt(ft(ct({index:J(),instructions:ft(Ol)})))),preBalances:ft(J()),postBalances:ft(J()),logMessages:bt(dt(ft(ut()))),preTokenBalances:bt(dt(ft(qi))),postTokenBalances:bt(dt(ft(qi))),loadedAddresses:bt(Nl),computeUnitsConsumed:bt(J()),costUnits:bt(J())}),Bn=Pe([ce(0),ce("legacy")]),rn=ct({pubkey:ut(),lamports:J(),postBalance:dt(J()),rewardType:dt(ut()),commission:bt(dt(J()))}),fg=Tt(dt(ct({blockhash:ut(),previousBlockhash:ut(),parentSlot:J(),transactions:ft(ct({transaction:ga,meta:dt(ss),version:bt(Bn)})),rewards:bt(ft(rn)),blockTime:dt(J()),blockHeight:dt(J())}))),dg=Tt(dt(ct({blockhash:ut(),previousBlockhash:ut(),parentSlot:J(),rewards:bt(ft(rn)),blockTime:dt(J()),blockHeight:dt(J())}))),pg=Tt(dt(ct({blockhash:ut(),previousBlockhash:ut(),parentSlot:J(),transactions:ft(ct({transaction:Ml,meta:dt(ss),version:bt(Bn)})),rewards:bt(ft(rn)),blockTime:dt(J()),blockHeight:dt(J())}))),gg=Tt(dt(ct({blockhash:ut(),previousBlockhash:ut(),parentSlot:J(),transactions:ft(ct({transaction:Ul,meta:dt(ya),version:bt(Bn)})),rewards:bt(ft(rn)),blockTime:dt(J()),blockHeight:dt(J())}))),yg=Tt(dt(ct({blockhash:ut(),previousBlockhash:ut(),parentSlot:J(),transactions:ft(ct({transaction:Ml,meta:dt(ya),version:bt(Bn)})),rewards:bt(ft(rn)),blockTime:dt(J()),blockHeight:dt(J())}))),mg=Tt(dt(ct({blockhash:ut(),previousBlockhash:ut(),parentSlot:J(),rewards:bt(ft(rn)),blockTime:dt(J()),blockHeight:dt(J())}))),wg=Tt(dt(ct({blockhash:ut(),previousBlockhash:ut(),parentSlot:J(),transactions:ft(ct({transaction:ga,meta:dt(ss)})),rewards:bt(ft(rn)),blockTime:dt(J())}))),wc=Tt(dt(ct({blockhash:ut(),previousBlockhash:ut(),parentSlot:J(),signatures:ft(ut()),blockTime:dt(J())}))),so=Tt(dt(ct({slot:J(),meta:dt(ss),blockTime:bt(dt(J())),transaction:ga,version:bt(Bn)}))),yi=Tt(dt(ct({slot:J(),transaction:Ul,meta:dt(ya),blockTime:bt(dt(J())),version:bt(Bn)}))),bg=ge(ct({blockhash:ut(),lastValidBlockHeight:J()})),vg=ge(lr()),Eg=ct({slot:J(),numTransactions:J(),numSlots:J(),samplePeriodSecs:J()}),kg=Tt(ft(Eg)),_g=ge(dt(ct({feeCalculator:ct({lamportsPerSignature:J()})}))),Sg=Tt(ut()),Ag=Tt(ut()),Ig=ct({err:en,logs:ft(ut()),signature:ut()}),xg=ct({result:is(Ig),subscription:J()}),Bg={"solana-client":"js/1.0.0-maintenance"};class Rg{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const g={};return async d=>{const{commitment:x,config:A}=Yt(d),k=this._buildArgs([],x,void 0,A),R=dc(k);return g[R]=g[R]??(async()=>{try{const D=await this._rpcRequest("getBlockHeight",k),O=ht(D,Tt(J()));if("error"in O)throw new mt(O.error,"failed to get block height information");return O.result}finally{delete g[R]}})(),await g[R]}})();let r,s,i,o,u,l;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,u=e.disableRetryOnRateLimit,l=e.httpAgent),this._rpcEndpoint=d0(t),this._rpcWsEndpoint=r||f0(t),this._rpcClient=B0(t,s,i,o,u,l),this._rpcRequest=R0(this._rpcClient),this._rpcBatchRequest=T0(this._rpcClient),this._rpcWebSocket=new c0(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=Yt(e),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),u=ht(o,ge(J()));if("error"in u)throw new mt(u.error,`failed to get balance for ${t.toBase58()}`);return u.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=ht(e,Tt(dt(J())));if("error"in r)throw new mt(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=ht(t,Tt(J()));if("error"in e)throw new mt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=ht(t,N0);if("error"in e)throw new mt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=ht(r,D0);if("error"in s)throw new mt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=ht(s,ge(xo));if("error"in i)throw new mt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=ht(s,ge(xo));if("error"in i)throw new mt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=Yt(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const u=this._buildArgs(o,s,"base64",i),l=await this._rpcRequest("getTokenAccountsByOwner",u),g=ht(l,F0);if("error"in g)throw new mt(g.error,`failed to get token accounts owned by account ${t.toBase58()}`);return g.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),u=ht(o,K0);if("error"in u)throw new mt(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=ht(s,q0);if("error"in i)throw new mt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=ht(s,z0);if("error"in i)throw new mt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=Yt(e),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),u=ht(o,ge(dt(Vn)));if("error"in u)throw new mt(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=Yt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),u=ht(o,ge(dt(Ro)));if("error"in u)throw new mt(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=Yt(e),i=t.map(g=>g.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),u=await this._rpcRequest("getMultipleAccounts",o),l=ht(u,ge(ft(dt(Ro))));if("error"in l)throw new mt(l.error,`failed to get info for accounts ${i}`);return l.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=Yt(e),i=t.map(g=>g.toBase58()),o=this._buildArgs([i],r,"base64",s),u=await this._rpcRequest("getMultipleAccounts",o),l=ht(u,ge(ft(dt(Vn))));if("error"in l)throw new mt(l.error,`failed to get info for accounts ${i}`);return l.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=Yt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),u=await this._rpcRequest("getStakeActivation",o),l=ht(u,Tt(H0));if("error"in l)throw new mt(l.error,`failed to get Stake Activation ${t.toBase58()}`);return l.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=Yt(e),{encoding:i,...o}=s||{},u=this._buildArgs([t.toBase58()],r,i||"base64",{...o,...o.filters?{filters:gc(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",u),g=ft($0),d=o.withContext===!0?ht(l,ge(g)):ht(l,Tt(g));if("error"in d)throw new mt(d.error,`failed to get accounts owned by program ${t.toBase58()}`);return d.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=Yt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),u=ht(o,Tt(ft(V0)));if("error"in u)throw new mt(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=pe.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Dt(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const o=new Promise((l,g)=>{try{r=this.onSignature(e,(x,A)=>{r=void 0;const k={context:A,value:x};l({__type:gr.PROCESSED,response:k})},t);const d=new Promise(x=>{r==null?x():s=this._onSubscriptionStateChange(r,A=>{A==="subscribed"&&x()})});(async()=>{if(await d,i)return;const x=await this.getSignatureStatus(e);if(i||x==null)return;const{context:A,value:k}=x;if(k!=null)if(k?.err)g(k.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(k.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(k.confirmationStatus==="processed"||k.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,l({__type:gr.PROCESSED,response:{context:A,value:k}})}})()}catch(d){g(d)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(x=>{const A=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let k=await A();if(!i){for(;k<=r;)if(await zr(1e3),i||(k=await A(),i))return;x({__type:gr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),g=this.getCancellationPromise(e);let d;try{const x=await Promise.race([g,l,o]);if(x.__type===gr.PROCESSED)d=x.response;else throw new ua(s)}finally{i=!0,u()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let u=!1;const l=new Promise(k=>{let R=i,D=null;const O=async()=>{try{const{context:$,value:V}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return D=$.slot,V?.nonce}catch{return R}};(async()=>{if(R=await O(),!u)for(;;){if(i!==R){k({__type:gr.NONCE_INVALID,slotInWhichNonceDidAdvance:D});return}if(await zr(2e3),u||(R=await O(),u))return}})()}),{abortConfirmation:g,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),x=this.getCancellationPromise(e);let A;try{const k=await Promise.race([x,d,l]);if(k.__type===gr.PROCESSED)A=k.response;else{let R;for(;;){const D=await this.getSignatureStatus(o);if(D==null)break;if(D.context.slot<(k.slotInWhichNonceDidAdvance??r)){await zr(400);continue}R=D;break}if(R?.value){const D=t||"finalized",{confirmationStatus:O}=R.value;switch(D){case"processed":case"recent":if(O!=="processed"&&O!=="confirmed"&&O!=="finalized")throw new dn(o);break;case"confirmed":case"single":case"singleGossip":if(O!=="confirmed"&&O!=="finalized")throw new dn(o);break;case"finalized":case"max":case"root":if(O!=="finalized")throw new dn(o);break;default:}A={context:R.context,value:{err:R.value.err}}}else throw new dn(o)}}finally{u=!0,g()}return A}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(l=>{let g=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{g=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:gr.TIMED_OUT,timeoutMs:g}),g)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let u;try{const l=await Promise.race([o,s]);if(l.__type===gr.PROCESSED)u=l.response;else throw new la(e,l.timeoutMs/1e3)}finally{clearTimeout(r),i()}return u}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=ht(t,Tt(ft(ig)));if("error"in e)throw new mt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=ht(r,sg);if("error"in s)throw new mt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=Yt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),o=ht(i,Tt(J()));if("error"in o)throw new mt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=Yt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=ht(i,Tt(ut()));if("error"in o)throw new mt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=ht(s,Tt(ft(ue)));if("error"in i)throw new mt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);Dt(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=ht(s,cg);if("error"in i)throw new mt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Yt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=ht(i,Tt(J()));if("error"in o)throw new mt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=ht(r,L0);if("error"in s)throw new mt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=Yt(r),o=this._buildArgs([t.map(g=>g.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),u=await this._rpcRequest("getInflationReward",o),l=ht(u,y0);if("error"in l)throw new mt(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=ht(t,M0);if("error"in e)throw new mt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Yt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=ht(i,C0);if("error"in o)throw new mt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=ht(t,O0);if("error"in e)throw new mt(e.error,"failed to get epoch schedule");const r=e.result;return new Il(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=ht(t,U0);if("error"in e)throw new mt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=ht(s,ug);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=ht(e,kg);if("error"in r)throw new mt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=ht(s,_g);if("error"in i)throw new mt(i.error,"failed to get fee calculator");const{context:o,value:u}=i.result;return{context:o,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(t,e){const r=Lt(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),o=ht(i,ge(dt(J())));if("error"in o)throw new mt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),r=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=ht(s,P0);if("error"in i)throw new mt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Yt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=ht(i,bg);if("error"in o)throw new mt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=Yt(e),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),u=ht(o,vg);if("error"in u)throw new mt(u.error,"failed to determine if the blockhash `"+t+"`is valid");return u.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=ht(t,Tt(S0));if("error"in e)throw new mt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=ht(t,Tt(ut()));if("error"in e)throw new mt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=Yt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const u=ht(o,pg);if("error"in u)throw u.error;return u.result}case"none":{const u=ht(o,dg);if("error"in u)throw u.error;return u.result}default:{const u=ht(o,fg);if("error"in u)throw u.error;const{result:l}=u;return l?{...l,transactions:l.transactions.map(({transaction:g,meta:d,version:x})=>({meta:d,transaction:{...g,message:io(x,g.message)},version:x}))}:null}}}catch(u){throw new mt(u,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=Yt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const u=ht(o,yg);if("error"in u)throw u.error;return u.result}case"none":{const u=ht(o,mg);if("error"in u)throw u.error;return u.result}default:{const u=ht(o,gg);if("error"in u)throw u.error;return u.result}}}catch(u){throw new mt(u,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:u,...l}=t;r=u,e=l}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=ht(i,x0);if("error"in o)throw new mt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:s}=Yt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),u=ht(o,so);if("error"in u)throw new mt(u.error,"failed to get transaction");const l=u.result;return l&&{...l,transaction:{...l.transaction,message:io(l.version,l.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=Yt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),u=ht(o,yi);if("error"in u)throw new mt(u.error,"failed to get transaction");return u.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=Yt(e),i=t.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(l=>{const g=ht(l,yi);if("error"in g)throw new mt(g.error,"failed to get transactions");return g.result})}async getTransactions(t,e){const{commitment:r,config:s}=Yt(e),i=t.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(l=>{const g=ht(l,so);if("error"in g)throw new mt(g.error,"failed to get transactions");const d=g.result;return d&&{...d,transaction:{...d.transaction,message:io(d.version,d.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=ht(s,wg);if("error"in i)throw new mt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const u={...o,transactions:o.transactions.map(({transaction:l,meta:g})=>{const d=new Je(l.message);return{meta:g,transaction:{...l,message:d}}})};return{...u,transactions:u.transactions.map(({transaction:l,meta:g})=>({meta:g,transaction:Nt.populate(l.message,l.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),o=ht(i,Tt(ft(J())));if("error"in o)throw new mt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ht(s,wc);if("error"in i)throw new mt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ht(s,wc);if("error"in i)throw new mt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=ht(s,so);if("error"in i)throw new mt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const u=new Je(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:Nt.populate(u,l)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=ht(s,yi);if("error"in i)throw new mt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const u=ht(o,yi);if("error"in u)throw new mt(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const l=await this.getConfirmedBlockSignatures(e,"finalized");l.signatures.length>0&&(s.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(s.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=ht(i,j0);if("error"in o)throw new mt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=ht(i,G0);if("error"in o)throw new mt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Io({key:t,state:Io.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=ns.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=ht(r,Sg);if("error"in s)throw new mt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await zr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Bl;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await zr(_l/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Yt(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=ht(i,ge(J()));if("error"in o)throw new mt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const D=t.serialize(),O=yt.from(D).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const $=e||{};$.encoding="base64","commitment"in $||($.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&($.innerInstructions=e.innerInstructions);const V=[O,$],z=await this._rpcRequest("simulateTransaction",V),j=ht(z,yc);if("error"in j)throw new Error("failed to simulate transaction: "+j.error.message);return j.result}let s;if(t instanceof Nt){let R=t;s=new Nt,s.feePayer=R.feePayer,s.instructions=t.instructions,s.nonceInfo=R.nonceInfo,s.signatures=R.signatures}else s=Nt.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let R=this._disableBlockhashCaching;for(;;){const D=await this._blockhashWithExpiryBlockHeight(R);if(s.lastValidBlockHeight=D.lastValidBlockHeight,s.recentBlockhash=D.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const O=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(O)&&!this._blockhashInfo.transactionSignatures.includes(O)){this._blockhashInfo.simulatedSignatures.push(O);break}else R=!0}}const o=s._compile(),u=o.serialize(),g=s._serialize(u).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(r){const R=(Array.isArray(r)?r:o.nonProgramIds()).map(D=>D.toBase58());d.accounts={encoding:"base64",addresses:R}}i&&(d.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(d.innerInstructions=e.innerInstructions);const x=[g,d],A=await this._rpcRequest("simulateTransaction",x),k=ht(A,yc);if("error"in k){let R;if("data"in k.error&&(R=k.error.data.logs,R&&Array.isArray(R))){const D=`
    `,O=D+R.join(D);console.error(k.error.message,O)}throw new Cr({action:"simulate",signature:"",transactionMessage:k.error.message,logs:R})}return k.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=u.lastValidBlockHeight,t.recentBlockhash=u.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const l=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=Lt(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],u=await this._rpcRequest("sendTransaction",o),l=ht(u,Ag);if("error"in l){let g;throw"data"in l.error&&(g=l.error.data.logs),new Cr({action:s?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:g})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const u=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=s.callbacks,await this._updateSubscriptions()}catch(u){if(console.error(`Received ${u instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:u}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(u){if(u instanceof Error&&console.error(`${o} error:`,u.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=ht(t,Z0);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=dc([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Dt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=Yt(r),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=ht(t,X0);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:o}=Yt(r),u=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:gc(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=ht(t,xg);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=ht(t,Q0);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=ht(t,eg);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=ht(t,rg);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,u)=>{if(o.type==="status"){e(o.result,u);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),u=this._makeSubscription({callback:(l,g)=>{e(l,g);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return u}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=ht(t,ng);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class mn{constructor(t){this._keypair=void 0,this._keypair=t??uc()}static generate(){return new mn(uc())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=Fi(s);for(let o=0;o<32;o++)if(r[o]!==i[o])throw new Error("provided secretKey is invalid")}return new mn({publicKey:r,secretKey:t})}static fromSeed(t){const e=Fi(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new mn({publicKey:e,secretKey:r})}get publicKey(){return new at(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const br=Object.freeze({CreateLookupTable:{index:0,layout:K.struct([K.u32("instruction"),Sn("recentSlot"),K.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:K.struct([K.u32("instruction")])},ExtendLookupTable:{index:2,layout:K.struct([K.u32("instruction"),Sn(),K.seq(Ct(),K.offset(K.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:K.struct([K.u32("instruction")])},CloseLookupTable:{index:4,layout:K.struct([K.u32("instruction")])}});class Tg{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=K.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(br))if(o.index==r){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=zt(br.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=zt(br.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new at(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(ma.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class ma{constructor(){}static createLookupTable(t){const[e,r]=at.findProgramAddressSync([t.authority.toBuffer(),tl().encode(t.recentSlot)],this.programId),s=br.CreateLookupTable,i=Ot(s,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:ye.programId,isSigner:!1,isWritable:!1}];return[new Ft({programId:this.programId,keys:o,data:i}),e]}static freezeLookupTable(t){const e=br.FreezeLookupTable,r=Ot(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Ft({programId:this.programId,keys:s,data:r})}static extendLookupTable(t){const e=br.ExtendLookupTable,r=Ot(e,{addresses:t.addresses.map(i=>i.toBytes())}),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&s.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:ye.programId,isSigner:!1,isWritable:!1}),new Ft({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(t){const e=br.DeactivateLookupTable,r=Ot(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Ft({programId:this.programId,keys:s,data:r})}static closeLookupTable(t){const e=br.CloseLookupTable,r=Ot(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Ft({programId:this.programId,keys:s,data:r})}}ma.programId=new at("AddressLookupTab1e1111111111111111111111111");class Lg{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=K.u8("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(ar))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=zt(ar.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=zt(ar.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=zt(ar.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=zt(ar.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(wa.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const ar=Object.freeze({RequestUnits:{index:0,layout:K.struct([K.u8("instruction"),K.u32("units"),K.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:K.struct([K.u8("instruction"),K.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:K.struct([K.u8("instruction"),K.u32("units")])},SetComputeUnitPrice:{index:3,layout:K.struct([K.u8("instruction"),Sn("microLamports")])}});class wa{constructor(){}static requestUnits(t){const e=ar.RequestUnits,r=Ot(e,t);return new Ft({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=ar.RequestHeapFrame,r=Ot(e,t);return new Ft({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=ar.SetComputeUnitLimit,r=Ot(e,t);return new Ft({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=ar.SetComputeUnitPrice,r=Ot(e,{microLamports:BigInt(t.microLamports)});return new Ft({keys:[],programId:this.programId,data:r})}}wa.programId=new at("ComputeBudget111111111111111111111111111111");const bc=64,vc=32,Ec=64,kc=K.struct([K.u8("numSignatures"),K.u8("padding"),K.u16("signatureOffset"),K.u16("signatureInstructionIndex"),K.u16("publicKeyOffset"),K.u16("publicKeyInstructionIndex"),K.u16("messageDataOffset"),K.u16("messageDataSize"),K.u16("messageInstructionIndex")]);class os{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,instructionIndex:i}=t;Dt(e.length===vc,`Public Key must be ${vc} bytes but received ${e.length} bytes`),Dt(s.length===Ec,`Signature must be ${Ec} bytes but received ${s.length} bytes`);const o=kc.span,u=o+e.length,l=u+s.length,g=1,d=yt.alloc(l+r.length),x=i??65535;return kc.encode({numSignatures:g,padding:0,signatureOffset:u,signatureInstructionIndex:x,publicKeyOffset:o,publicKeyInstructionIndex:x,messageDataOffset:l,messageDataSize:r.length,messageInstructionIndex:x},d),d.fill(e,o),d.fill(s,u),d.fill(r,l),new Ft({keys:[],programId:os.programId,data:d})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;Dt(e.length===bc,`Private key must be ${bc} bytes but received ${e.length} bytes`);try{const i=mn.fromSecretKey(e),o=i.publicKey.toBytes(),u=aa(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:u,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}os.programId=new at("Ed25519SigVerify111111111111111111111111111");const Mg=(n,t)=>{const e=oa.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};oa.utils.isValidPrivateKey;const Pg=oa.getPublicKey,_c=32,oo=20,Sc=64,Cg=11,ao=K.struct([K.u8("numSignatures"),K.u16("signatureOffset"),K.u8("signatureInstructionIndex"),K.u16("ethAddressOffset"),K.u8("ethAddressInstructionIndex"),K.u16("messageDataOffset"),K.u16("messageDataSize"),K.u8("messageInstructionIndex"),K.blob(20,"ethAddress"),K.blob(64,"signature"),K.u8("recoveryId")]);class wn{constructor(){}static publicKeyToEthAddress(t){Dt(t.length===Sc,`Public key must be ${Sc} bytes but received ${t.length} bytes`);try{return yt.from(oc(Lt(t))).slice(-oo)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,recoveryId:i,instructionIndex:o}=t;return wn.createInstructionWithEthAddress({ethAddress:wn.publicKeyToEthAddress(e),message:r,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:s,recoveryId:i,instructionIndex:o=0}=t;let u;typeof e=="string"?e.startsWith("0x")?u=yt.from(e.substr(2),"hex"):u=yt.from(e,"hex"):u=e,Dt(u.length===oo,`Address must be ${oo} bytes but received ${u.length} bytes`);const l=1+Cg,g=l,d=l+u.length,x=d+s.length+1,A=1,k=yt.alloc(ao.span+r.length);return ao.encode({numSignatures:A,signatureOffset:d,signatureInstructionIndex:o,ethAddressOffset:g,ethAddressInstructionIndex:o,messageDataOffset:x,messageDataSize:r.length,messageInstructionIndex:o,signature:Lt(s),ethAddress:Lt(u),recoveryId:i},k),k.fill(Lt(r),ao.span),new Ft({keys:[],programId:wn.programId,data:k})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;Dt(e.length===_c,`Private key must be ${_c} bytes but received ${e.length} bytes`);try{const i=Lt(e),o=Pg(i,!1).slice(1),u=yt.from(oc(Lt(r))),[l,g]=Mg(u,i);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:l,recoveryId:g,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}wn.programId=new at("KeccakSecp256k11111111111111111111111111111");var Dl;const zl=new at("StakeConfig11111111111111111111111111111111");class Fl{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class ii{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Dl=ii;ii.default=new Dl(0,0,at.default);class Og{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=K.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(_e))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=zt(_e.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Fl(new at(e.staker),new at(e.withdrawer)),lockup:new ii(r.unixTimestamp,r.epoch,new at(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),zt(_e.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=zt(_e.Authorize,t.data),s={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new at(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:s,authorityOwner:i}=zt(_e.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:s,authorityOwner:new at(i),newAuthorizedPubkey:new at(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=zt(_e.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),zt(_e.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=zt(_e.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),zt(_e.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(as.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const _e=Object.freeze({Initialize:{index:0,layout:K.struct([K.u32("instruction"),zp(),Fp()])},Authorize:{index:1,layout:K.struct([K.u32("instruction"),Ct("newAuthorized"),K.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:K.struct([K.u32("instruction")])},Split:{index:3,layout:K.struct([K.u32("instruction"),K.ns64("lamports")])},Withdraw:{index:4,layout:K.struct([K.u32("instruction"),K.ns64("lamports")])},Deactivate:{index:5,layout:K.struct([K.u32("instruction")])},Merge:{index:7,layout:K.struct([K.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:K.struct([K.u32("instruction"),Ct("newAuthorized"),K.u32("stakeAuthorizationType"),$r("authoritySeed"),Ct("authorityOwner")])}}),Ug=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class as{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:s}=t,i=s||ii.default,o=_e.Initialize,u=Ot(o,{authorized:{staker:Lt(r.staker.toBuffer()),withdrawer:Lt(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:Lt(i.custodian.toBuffer())}}),l={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Yr,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new Ft(l)}static createAccountWithSeed(t){const e=new Nt;e.add(ye.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static createAccount(t){const e=new Nt;e.add(ye.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:s}=t,i=_e.Delegate,o=Ot(i);return new Nt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:Ii,isSigner:!1,isWritable:!1},{pubkey:zl,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=t,u=_e.Authorize,l=Ot(u,{newAuthorized:Lt(s.toBuffer()),stakeAuthorizationType:i.index}),g=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&g.push({pubkey:o,isSigner:!0,isWritable:!1}),new Nt().add({keys:g,programId:this.programId,data:l})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:u,custodianPubkey:l}=t,g=_e.AuthorizeWithSeed,d=Ot(g,{newAuthorized:Lt(o.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:s,authorityOwner:Lt(i.toBuffer())}),x=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Ze,isSigner:!1,isWritable:!1}];return l&&x.push({pubkey:l,isSigner:!0,isWritable:!1}),new Nt().add({keys:x,programId:this.programId,data:d})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:s,lamports:i}=t,o=_e.Split,u=Ot(o,{lamports:i});return new Ft({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(t,e){const r=new Nt;return r.add(ye.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:u,lamports:l}=t,g=new Nt;return g.add(ye.allocate({accountPubkey:i,basePubkey:o,seed:u,space:this.space,programId:this.programId})),e&&e>0&&g.add(ye.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),g.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,lamports:l}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:s}=t,i=_e.Merge,o=Ot(i);return new Nt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:Ii,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:s,lamports:i,custodianPubkey:o}=t,u=_e.Withdraw,l=Ot(u,{lamports:i}),g=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:Ii,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&g.push({pubkey:o,isSigner:!0,isWritable:!1}),new Nt().add({keys:g,programId:this.programId,data:l})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,s=_e.Deactivate,i=Ot(s);return new Nt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}as.programId=new at("Stake11111111111111111111111111111111111111");as.space=200;class Kl{constructor(t,e,r,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=s}}class Ng{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=K.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(cr))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=zt(cr.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Kl(new at(e.nodePubkey),new at(e.authorizedVoter),new at(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=zt(cr.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new at(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:s,voteAuthorizationType:i}}=zt(cr.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new at(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new at(s),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=zt(cr.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Rn.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const cr=Object.freeze({InitializeAccount:{index:0,layout:K.struct([K.u32("instruction"),Kp()])},Authorize:{index:1,layout:K.struct([K.u32("instruction"),Ct("newAuthorized"),K.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:K.struct([K.u32("instruction"),K.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:K.struct([K.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:K.struct([K.u32("instruction"),qp()])}}),Dg=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Rn{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:s}=t,i=cr.InitializeAccount,o=Ot(i,{voteInit:{nodePubkey:Lt(s.nodePubkey.toBuffer()),authorizedVoter:Lt(s.authorizedVoter.toBuffer()),authorizedWithdrawer:Lt(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),u={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Yr,isSigner:!1,isWritable:!1},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Ft(u)}static createAccount(t){const e=new Nt;return e.add(ye.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:i}=t,o=cr.Authorize,u=Ot(o,{newAuthorized:Lt(s.toBuffer()),voteAuthorizationType:i.index}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Nt().add({keys:l,programId:this.programId,data:u})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:u}=t,l=cr.AuthorizeWithSeed,g=Ot(l,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Lt(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:Lt(i.toBuffer()),voteAuthorizationType:o.index}}),d=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new Nt().add({keys:d,programId:this.programId,data:g})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:i}=t,o=cr.Withdraw,u=Ot(o,{lamports:s}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Nt().add({keys:l,programId:this.programId,data:u})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Rn.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:s}=t,i=cr.UpdateValidatorIdentity,o=Ot(i),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Nt().add({keys:u,programId:this.programId,data:o})}}Rn.programId=new at("Vote111111111111111111111111111111111111111");Rn.space=3762;const ql=new at("Va1idator1nfo111111111111111111111111111111"),zg=ct({name:ut(),website:bt(ut()),details:bt(ut()),iconUrl:bt(ut()),keybaseUsername:bt(ut())});class ba{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(Ue(e)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new at(Ne(e,0,ur)),u=or(e)===1;s.push({publicKey:o,isSigner:u})}if(s[0].publicKey.equals(ql)&&s[1].isSigner){const i=$r().decode(yt.from(e)),o=JSON.parse(i);return el(o,zg),new ba(s[1].publicKey,o)}return null}}const Fg=new at("Vote111111111111111111111111111111111111111"),Kg=K.struct([Ct("nodePubkey"),Ct("authorizedWithdrawer"),K.u8("commission"),K.nu64(),K.seq(K.struct([K.nu64("slot"),K.u32("confirmationCount")]),K.offset(K.u32(),-8),"votes"),K.u8("rootSlotValid"),K.nu64("rootSlot"),K.nu64(),K.seq(K.struct([K.nu64("epoch"),Ct("authorizedVoter")]),K.offset(K.u32(),-8),"authorizedVoters"),K.struct([K.seq(K.struct([Ct("authorizedPubkey"),K.nu64("epochOfLastAuthorizedSwitch"),K.nu64("targetEpoch")]),32,"buf"),K.nu64("idx"),K.u8("isEmpty")],"priorVoters"),K.nu64(),K.seq(K.struct([K.nu64("epoch"),K.nu64("credits"),K.nu64("prevCredits")]),K.offset(K.u32(),-8),"epochCredits"),K.struct([K.nu64("slot"),K.nu64("timestamp")],"lastTimestamp")]);class va{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=Kg.decode(Lt(t),4);let s=r.rootSlot;return r.rootSlotValid||(s=null),new va({nodePubkey:new at(r.nodePubkey),authorizedWithdrawer:new at(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:s,authorizedVoters:r.authorizedVoters.map(qg),priorVoters:$g(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function qg({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new at(n)}}function Ac({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new at(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function $g({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(Ac),...n.slice(0,t).map(Ac)]}const Ic={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Wg(n,t){const e=t===!1?"http":"https";if(!n)return Ic[e].devnet;const r=Ic[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}async function Vg(n,t,e,r){let s,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(s=e,i=r):i=e;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},u=await n.sendRawTransaction(t,o),l=i&&i.commitment,d=(await(s?n.confirmTransaction(s,l):n.confirmTransaction(u,l))).value;if(d.err)throw u!=null?new Cr({action:o?.skipPreflight?"send":"simulate",signature:u,transactionMessage:`Status: (${JSON.stringify(d)})`}):new Error(`Raw transaction ${u} failed (${JSON.stringify(d)})`);return u}const Hg=1e9,jg=Object.freeze(Object.defineProperty({__proto__:null,Account:Up,AddressLookupTableAccount:Io,AddressLookupTableInstruction:Tg,AddressLookupTableProgram:ma,Authorized:Fl,BLOCKHASH_CACHE_TIMEOUT_MS:Bl,BPF_LOADER_DEPRECATED_PROGRAM_ID:Np,BPF_LOADER_PROGRAM_ID:e0,BpfLoader:r0,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:ar,ComputeBudgetInstruction:Lg,ComputeBudgetProgram:wa,Connection:Rg,Ed25519Program:os,Enum:Cp,EpochSchedule:Il,FeeCalculatorLayout:Sl,Keypair:mn,LAMPORTS_PER_SOL:Hg,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:br,Loader:Xr,Lockup:ii,MAX_SEED_LENGTH:vl,Message:Je,MessageAccountKeys:Wn,MessageV0:Zr,NONCE_ACCOUNT_LENGTH:Ao,NonceAccount:ns,PACKET_DATA_SIZE:Lr,PUBLIC_KEY_LENGTH:ur,PublicKey:at,SIGNATURE_LENGTH_IN_BYTES:$n,SOLANA_SCHEMA:Nn,STAKE_CONFIG_ID:zl,STAKE_INSTRUCTION_LAYOUTS:_e,SYSTEM_INSTRUCTION_LAYOUTS:Xt,SYSVAR_CLOCK_PUBKEY:Ze,SYSVAR_EPOCH_SCHEDULE_PUBKEY:jp,SYSVAR_INSTRUCTIONS_PUBKEY:Gp,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Ai,SYSVAR_RENT_PUBKEY:Yr,SYSVAR_REWARDS_PUBKEY:Zp,SYSVAR_SLOT_HASHES_PUBKEY:Yp,SYSVAR_SLOT_HISTORY_PUBKEY:Xp,SYSVAR_STAKE_HISTORY_PUBKEY:Ii,Secp256k1Program:wn,SendTransactionError:Cr,SolanaJSONRPCError:mt,SolanaJSONRPCErrorCode:Jp,StakeAuthorizationLayout:Ug,StakeInstruction:Og,StakeProgram:as,Struct:ca,SystemInstruction:Qp,SystemProgram:ye,Transaction:Nt,TransactionExpiredBlockheightExceededError:ua,TransactionExpiredNonceInvalidError:dn,TransactionExpiredTimeoutError:la,TransactionInstruction:Ft,TransactionMessage:fa,TransactionStatus:gr,VALIDATOR_INFO_KEY:ql,VERSION_PREFIX_MASK:es,VOTE_PROGRAM_ID:Fg,ValidatorInfo:ba,VersionedMessage:ha,VersionedTransaction:da,VoteAccount:va,VoteAuthorizationLayout:Dg,VoteInit:Kl,VoteInstruction:Ng,VoteProgram:Rn,clusterApiUrl:Wg,sendAndConfirmRawTransaction:Vg,sendAndConfirmTransaction:Ki},Symbol.toStringTag,{value:"Module"}));var mi={exports:{}},xc;function Gg(){if(xc)return mi.exports;xc=1;const n=/[\p{Lu}]/u,t=/[\p{Ll}]/u,e=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,i=new RegExp("^"+s.source),o=new RegExp(s.source+r.source,"gu"),u=new RegExp("\\d+"+r.source,"gu"),l=(A,k,R)=>{let D=!1,O=!1,$=!1;for(let V=0;V<A.length;V++){const z=A[V];D&&n.test(z)?(A=A.slice(0,V)+"-"+A.slice(V),D=!1,$=O,O=!0,V++):O&&$&&t.test(z)?(A=A.slice(0,V-1)+"-"+A.slice(V-1),$=O,O=!1,D=!0):(D=k(z)===z&&R(z)!==z,$=O,O=R(z)===z&&k(z)!==z)}return A},g=(A,k)=>(e.lastIndex=0,A.replace(e,R=>k(R))),d=(A,k)=>(o.lastIndex=0,u.lastIndex=0,A.replace(o,(R,D)=>k(D)).replace(u,R=>k(R))),x=(A,k)=>{if(!(typeof A=="string"||Array.isArray(A)))throw new TypeError("Expected the input to be `string | string[]`");if(k={pascalCase:!1,preserveConsecutiveUppercase:!1,...k},Array.isArray(A)?A=A.map($=>$.trim()).filter($=>$.length).join("-"):A=A.trim(),A.length===0)return"";const R=k.locale===!1?$=>$.toLowerCase():$=>$.toLocaleLowerCase(k.locale),D=k.locale===!1?$=>$.toUpperCase():$=>$.toLocaleUpperCase(k.locale);return A.length===1?k.pascalCase?D(A):R(A):(A!==R(A)&&(A=l(A,R,D)),A=A.replace(i,""),k.preserveConsecutiveUppercase?A=g(A,R):A=R(A),k.pascalCase&&(A=D(A.charAt(0))+A.slice(1)),d(A,D))};return mi.exports=x,mi.exports.default=x,mi.exports}var Zg=Gg();const oe=An(Zg);var Cn={},gt={},Bc;function Rc(){if(Bc)return gt;Bc=1;class n{constructor(w,p){if(!Number.isInteger(w))throw new TypeError("span must be an integer");this.span=w,this.property=p}makeDestinationObject(){return{}}decode(w,p){throw new Error("Layout is abstract")}encode(w,p,c){throw new Error("Layout is abstract")}getSpan(w,p){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(w){const p=Object.create(this.constructor.prototype);return Object.assign(p,this),p.property=w,p}fromArray(w){}}gt.Layout=n;function t(I,w){return w.property?I+"["+w.property+"]":I}gt.nameWithProperty=t;function e(I,w){if(typeof I!="function")throw new TypeError("Class must be constructor");if(I.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(w&&w instanceof n))throw new TypeError("layout must be a Layout");if(w.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");I.layout_=w,w.boundConstructor_=I,w.makeDestinationObject=(()=>new I),Object.defineProperty(I.prototype,"encode",{value:function(p,c){return w.encode(this,p,c)},writable:!0}),Object.defineProperty(I,"decode",{value:function(p,c){return w.decode(p,c)},writable:!0})}gt.bindConstructorLayout=e;class r extends n{isCount(){throw new Error("ExternalLayout is abstract")}}class s extends r{constructor(w,p){if(w===void 0&&(w=1),!Number.isInteger(w)||0>=w)throw new TypeError("elementSpan must be a (positive) integer");super(-1,p),this.elementSpan=w}isCount(){return!0}decode(w,p){p===void 0&&(p=0);const c=w.length-p;return Math.floor(c/this.elementSpan)}encode(w,p,c){return 0}}class i extends r{constructor(w,p,c){if(!(w instanceof n))throw new TypeError("layout must be a Layout");if(p===void 0)p=0;else if(!Number.isInteger(p))throw new TypeError("offset must be integer or undefined");super(w.span,c||w.property),this.layout=w,this.offset=p}isCount(){return this.layout instanceof o||this.layout instanceof u}decode(w,p){return p===void 0&&(p=0),this.layout.decode(w,p+this.offset)}encode(w,p,c){return c===void 0&&(c=0),this.layout.encode(w,p,c+this.offset)}}class o extends n{constructor(w,p){if(super(w,p),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(w,p){return p===void 0&&(p=0),w.readUIntLE(p,this.span)}encode(w,p,c){return c===void 0&&(c=0),p.writeUIntLE(w,c,this.span),this.span}}class u extends n{constructor(w,p){if(super(w,p),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(w,p){return p===void 0&&(p=0),w.readUIntBE(p,this.span)}encode(w,p,c){return c===void 0&&(c=0),p.writeUIntBE(w,c,this.span),this.span}}class l extends n{constructor(w,p){if(super(w,p),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(w,p){return p===void 0&&(p=0),w.readIntLE(p,this.span)}encode(w,p,c){return c===void 0&&(c=0),p.writeIntLE(w,c,this.span),this.span}}class g extends n{constructor(w,p){if(super(w,p),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(w,p){return p===void 0&&(p=0),w.readIntBE(p,this.span)}encode(w,p,c){return c===void 0&&(c=0),p.writeIntBE(w,c,this.span),this.span}}const d=Math.pow(2,32);function x(I){const w=Math.floor(I/d),p=I-w*d;return{hi32:w,lo32:p}}function A(I,w){return I*d+w}class k extends n{constructor(w){super(8,w)}decode(w,p){p===void 0&&(p=0);const c=w.readUInt32LE(p),f=w.readUInt32LE(p+4);return A(f,c)}encode(w,p,c){c===void 0&&(c=0);const f=x(w);return p.writeUInt32LE(f.lo32,c),p.writeUInt32LE(f.hi32,c+4),8}}class R extends n{constructor(w){super(8,w)}decode(w,p){p===void 0&&(p=0);const c=w.readUInt32BE(p),f=w.readUInt32BE(p+4);return A(c,f)}encode(w,p,c){c===void 0&&(c=0);const f=x(w);return p.writeUInt32BE(f.hi32,c),p.writeUInt32BE(f.lo32,c+4),8}}class D extends n{constructor(w){super(8,w)}decode(w,p){p===void 0&&(p=0);const c=w.readUInt32LE(p),f=w.readInt32LE(p+4);return A(f,c)}encode(w,p,c){c===void 0&&(c=0);const f=x(w);return p.writeUInt32LE(f.lo32,c),p.writeInt32LE(f.hi32,c+4),8}}class O extends n{constructor(w){super(8,w)}decode(w,p){p===void 0&&(p=0);const c=w.readInt32BE(p),f=w.readUInt32BE(p+4);return A(c,f)}encode(w,p,c){c===void 0&&(c=0);const f=x(w);return p.writeInt32BE(f.hi32,c),p.writeUInt32BE(f.lo32,c+4),8}}class $ extends n{constructor(w){super(4,w)}decode(w,p){return p===void 0&&(p=0),w.readFloatLE(p)}encode(w,p,c){return c===void 0&&(c=0),p.writeFloatLE(w,c),4}}class V extends n{constructor(w){super(4,w)}decode(w,p){return p===void 0&&(p=0),w.readFloatBE(p)}encode(w,p,c){return c===void 0&&(c=0),p.writeFloatBE(w,c),4}}class z extends n{constructor(w){super(8,w)}decode(w,p){return p===void 0&&(p=0),w.readDoubleLE(p)}encode(w,p,c){return c===void 0&&(c=0),p.writeDoubleLE(w,c),8}}class j extends n{constructor(w){super(8,w)}decode(w,p){return p===void 0&&(p=0),w.readDoubleBE(p)}encode(w,p,c){return c===void 0&&(c=0),p.writeDoubleBE(w,c),8}}class et extends n{constructor(w,p,c){if(!(w instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(p instanceof r&&p.isCount()||Number.isInteger(p)&&0<=p))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let f=-1;!(p instanceof r)&&0<w.span&&(f=p*w.span),super(f,c),this.elementLayout=w,this.count=p}getSpan(w,p){if(0<=this.span)return this.span;p===void 0&&(p=0);let c=0,f=this.count;if(f instanceof r&&(f=f.decode(w,p)),0<this.elementLayout.span)c=f*this.elementLayout.span;else{let S=0;for(;S<f;)c+=this.elementLayout.getSpan(w,p+c),++S}return c}decode(w,p){p===void 0&&(p=0);const c=[];let f=0,S=this.count;for(S instanceof r&&(S=S.decode(w,p));f<S;)c.push(this.elementLayout.decode(w,p)),p+=this.elementLayout.getSpan(w,p),f+=1;return c}encode(w,p,c){c===void 0&&(c=0);const f=this.elementLayout,S=w.reduce((P,H)=>P+f.encode(H,p,c+P),0);return this.count instanceof r&&this.count.encode(w.length,p,c),S}}class ot extends n{constructor(w,p,c){if(!(Array.isArray(w)&&w.reduce((S,P)=>S&&P instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof p=="boolean"&&c===void 0&&(c=p,p=void 0);for(const S of w)if(0>S.span&&S.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let f=-1;try{f=w.reduce((S,P)=>S+P.getSpan(),0)}catch{}super(f,p),this.fields=w,this.decodePrefixes=!!c}getSpan(w,p){if(0<=this.span)return this.span;p===void 0&&(p=0);let c=0;try{c=this.fields.reduce((f,S)=>{const P=S.getSpan(w,p);return p+=P,f+P},0)}catch{throw new RangeError("indeterminate span")}return c}decode(w,p){p===void 0&&(p=0);const c=this.makeDestinationObject();for(const f of this.fields)if(f.property!==void 0&&(c[f.property]=f.decode(w,p)),p+=f.getSpan(w,p),this.decodePrefixes&&w.length===p)break;return c}encode(w,p,c){c===void 0&&(c=0);const f=c;let S=0,P=0;for(const H of this.fields){let nt=H.span;if(P=0<nt?nt:0,H.property!==void 0){const lt=w[H.property];lt!==void 0&&(P=H.encode(lt,p,c),0>nt&&(nt=H.getSpan(p,c)))}S=c,c+=nt}return S+P-f}fromArray(w){const p=this.makeDestinationObject();for(const c of this.fields)c.property!==void 0&&0<w.length&&(p[c.property]=w.shift());return p}layoutFor(w){if(typeof w!="string")throw new TypeError("property must be string");for(const p of this.fields)if(p.property===w)return p}offsetOf(w){if(typeof w!="string")throw new TypeError("property must be string");let p=0;for(const c of this.fields){if(c.property===w)return p;0>c.span?p=-1:0<=p&&(p+=c.span)}}}class Q{constructor(w){this.property=w}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class rt extends Q{constructor(w,p){if(!(w instanceof r&&w.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(p||w.property||"variant"),this.layout=w}decode(w,p){return this.layout.decode(w,p)}encode(w,p,c){return this.layout.encode(w,p,c)}}class q extends n{constructor(w,p,c){const f=w instanceof o||w instanceof u;if(f)w=new rt(new i(w));else if(w instanceof r&&w.isCount())w=new rt(w);else if(!(w instanceof Q))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(p===void 0&&(p=null),!(p===null||p instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(p!==null){if(0>p.span)throw new Error("defaultLayout must have constant span");p.property===void 0&&(p=p.replicate("content"))}let S=-1;p&&(S=p.span,0<=S&&f&&(S+=w.layout.span)),super(S,c),this.discriminator=w,this.usesPrefixDiscriminator=f,this.defaultLayout=p,this.registry={};let P=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(H){return P(H)},this.configGetSourceVariant=function(H){P=H.bind(this)}}getSpan(w,p){if(0<=this.span)return this.span;p===void 0&&(p=0);const c=this.getVariant(w,p);if(!c)throw new Error("unable to determine span for unrecognized variant");return c.getSpan(w,p)}defaultGetSourceVariant(w){if(w.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&w.hasOwnProperty(this.defaultLayout.property))return;const p=this.registry[w[this.discriminator.property]];if(p&&(!p.layout||w.hasOwnProperty(p.property)))return p}else for(const p in this.registry){const c=this.registry[p];if(w.hasOwnProperty(c.property))return c}throw new Error("unable to infer src variant")}decode(w,p){p===void 0&&(p=0);let c;const f=this.discriminator,S=f.decode(w,p);let P=this.registry[S];if(P===void 0){let H=0;P=this.defaultLayout,this.usesPrefixDiscriminator&&(H=f.layout.span),c=this.makeDestinationObject(),c[f.property]=S,c[P.property]=this.defaultLayout.decode(w,p+H)}else c=P.decode(w,p);return c}encode(w,p,c){c===void 0&&(c=0);const f=this.getSourceVariant(w);if(f===void 0){const S=this.discriminator,P=this.defaultLayout;let H=0;return this.usesPrefixDiscriminator&&(H=S.layout.span),S.encode(w[S.property],p,c),H+P.encode(w[P.property],p,c+H)}return f.encode(w,p,c)}addVariant(w,p,c){const f=new F(this,w,p,c);return this.registry[w]=f,f}getVariant(w,p){let c=w;return At.isBuffer(w)&&(p===void 0&&(p=0),c=this.discriminator.decode(w,p)),this.registry[c]}}class F extends n{constructor(w,p,c,f){if(!(w instanceof q))throw new TypeError("union must be a Union");if(!Number.isInteger(p)||0>p)throw new TypeError("variant must be a (non-negative) integer");if(typeof c=="string"&&f===void 0&&(f=c,c=null),c){if(!(c instanceof n))throw new TypeError("layout must be a Layout");if(w.defaultLayout!==null&&0<=c.span&&c.span>w.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof f!="string")throw new TypeError("variant must have a String property")}let S=w.span;0>w.span&&(S=c?c.span:0,0<=S&&w.usesPrefixDiscriminator&&(S+=w.discriminator.layout.span)),super(S,f),this.union=w,this.variant=p,this.layout=c||null}getSpan(w,p){if(0<=this.span)return this.span;p===void 0&&(p=0);let c=0;return this.union.usesPrefixDiscriminator&&(c=this.union.discriminator.layout.span),c+this.layout.getSpan(w,p+c)}decode(w,p){const c=this.makeDestinationObject();if(p===void 0&&(p=0),this!==this.union.getVariant(w,p))throw new Error("variant mismatch");let f=0;return this.union.usesPrefixDiscriminator&&(f=this.union.discriminator.layout.span),this.layout?c[this.property]=this.layout.decode(w,p+f):this.property?c[this.property]=!0:this.union.usesPrefixDiscriminator&&(c[this.union.discriminator.property]=this.variant),c}encode(w,p,c){c===void 0&&(c=0);let f=0;if(this.union.usesPrefixDiscriminator&&(f=this.union.discriminator.layout.span),this.layout&&!w.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,p,c);let S=f;if(this.layout&&(this.layout.encode(w[this.property],p,c+f),S+=this.layout.getSpan(p,c+f),0<=this.union.span&&S>this.union.span))throw new Error("encoded variant overruns containing union");return S}fromArray(w){if(this.layout)return this.layout.fromArray(w)}}function W(I){return 0>I&&(I+=4294967296),I}class L extends n{constructor(w,p,c){if(!(w instanceof o||w instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof p=="string"&&c===void 0&&(c=p,p=void 0),4<w.span)throw new RangeError("word cannot exceed 32 bits");super(w.span,c),this.word=w,this.msb=!!p,this.fields=[];let f=0;this._packedSetValue=function(S){return f=W(S),this},this._packedGetValue=function(){return f}}decode(w,p){const c=this.makeDestinationObject();p===void 0&&(p=0);const f=this.word.decode(w,p);this._packedSetValue(f);for(const S of this.fields)S.property!==void 0&&(c[S.property]=S.decode(f));return c}encode(w,p,c){c===void 0&&(c=0);const f=this.word.decode(p,c);this._packedSetValue(f);for(const S of this.fields)if(S.property!==void 0){const P=w[S.property];P!==void 0&&S.encode(P)}return this.word.encode(this._packedGetValue(),p,c)}addField(w,p){const c=new E(this,w,p);return this.fields.push(c),c}addBoolean(w){const p=new a(this,w);return this.fields.push(p),p}fieldFor(w){if(typeof w!="string")throw new TypeError("property must be string");for(const p of this.fields)if(p.property===w)return p}}class E{constructor(w,p,c){if(!(w instanceof L))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(p)||0>=p)throw new TypeError("bits must be positive integer");const f=8*w.span,S=w.fields.reduce((P,H)=>P+H.bits,0);if(p+S>f)throw new Error("bits too long for span remainder ("+(f-S)+" of "+f+" remain)");this.container=w,this.bits=p,this.valueMask=(1<<p)-1,p===32&&(this.valueMask=4294967295),this.start=S,this.container.msb&&(this.start=f-S-p),this.wordMask=W(this.valueMask<<this.start),this.property=c}decode(){const w=this.container._packedGetValue();return W(w&this.wordMask)>>>this.start}encode(w){if(!Number.isInteger(w)||w!==W(w&this.valueMask))throw new TypeError(t("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const p=this.container._packedGetValue(),c=W(w<<this.start);this.container._packedSetValue(W(p&~this.wordMask)|c)}}class a extends E{constructor(w,p){super(w,1,p)}decode(w,p){return!!E.prototype.decode.call(this,w,p)}encode(w){return typeof w=="boolean"&&(w=+w),E.prototype.encode.call(this,w)}}class h extends n{constructor(w,p){if(!(w instanceof r&&w.isCount()||Number.isInteger(w)&&0<=w))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let c=-1;w instanceof r||(c=w),super(c,p),this.length=w}getSpan(w,p){let c=this.span;return 0>c&&(c=this.length.decode(w,p)),c}decode(w,p){p===void 0&&(p=0);let c=this.span;return 0>c&&(c=this.length.decode(w,p)),w.slice(p,p+c)}encode(w,p,c){let f=this.length;if(this.length instanceof r&&(f=w.length),!(At.isBuffer(w)&&f===w.length))throw new TypeError(t("Blob.encode",this)+" requires (length "+f+") Buffer as src");if(c+f>p.length)throw new RangeError("encoding overruns Buffer");return p.write(w.toString("hex"),c,f,"hex"),this.length instanceof r&&this.length.encode(f,p,c),f}}class _ extends n{constructor(w){super(-1,w)}getSpan(w,p){if(!At.isBuffer(w))throw new TypeError("b must be a Buffer");p===void 0&&(p=0);let c=p;for(;c<w.length&&w[c]!==0;)c+=1;return 1+c-p}decode(w,p,c){p===void 0&&(p=0);let f=this.getSpan(w,p);return w.slice(p,p+f-1).toString("utf-8")}encode(w,p,c){c===void 0&&(c=0),typeof w!="string"&&(w=w.toString());const f=new At(w,"utf8"),S=f.length;if(c+S>p.length)throw new RangeError("encoding overruns Buffer");return f.copy(p,c),p[c+S]=0,S+1}}class M extends n{constructor(w,p){if(typeof w=="string"&&p===void 0&&(p=w,w=void 0),w===void 0)w=-1;else if(!Number.isInteger(w))throw new TypeError("maxSpan must be an integer");super(-1,p),this.maxSpan=w}getSpan(w,p){if(!At.isBuffer(w))throw new TypeError("b must be a Buffer");return p===void 0&&(p=0),w.length-p}decode(w,p,c){p===void 0&&(p=0);let f=this.getSpan(w,p);if(0<=this.maxSpan&&this.maxSpan<f)throw new RangeError("text length exceeds maxSpan");return w.slice(p,p+f).toString("utf-8")}encode(w,p,c){c===void 0&&(c=0),typeof w!="string"&&(w=w.toString());const f=new At(w,"utf8"),S=f.length;if(0<=this.maxSpan&&this.maxSpan<S)throw new RangeError("text length exceeds maxSpan");if(c+S>p.length)throw new RangeError("encoding overruns Buffer");return f.copy(p,c),S}}class C extends n{constructor(w,p){super(0,p),this.value=w}decode(w,p,c){return this.value}encode(w,p,c){return 0}}return gt.ExternalLayout=r,gt.GreedyCount=s,gt.OffsetLayout=i,gt.UInt=o,gt.UIntBE=u,gt.Int=l,gt.IntBE=g,gt.Float=$,gt.FloatBE=V,gt.Double=z,gt.DoubleBE=j,gt.Sequence=et,gt.Structure=ot,gt.UnionDiscriminator=Q,gt.UnionLayoutDiscriminator=rt,gt.Union=q,gt.VariantLayout=F,gt.BitStructure=L,gt.BitField=E,gt.Boolean=a,gt.Blob=h,gt.CString=_,gt.UTF8=M,gt.Constant=C,gt.greedy=((I,w)=>new s(I,w)),gt.offset=((I,w,p)=>new i(I,w,p)),gt.u8=(I=>new o(1,I)),gt.u16=(I=>new o(2,I)),gt.u24=(I=>new o(3,I)),gt.u32=(I=>new o(4,I)),gt.u40=(I=>new o(5,I)),gt.u48=(I=>new o(6,I)),gt.nu64=(I=>new k(I)),gt.u16be=(I=>new u(2,I)),gt.u24be=(I=>new u(3,I)),gt.u32be=(I=>new u(4,I)),gt.u40be=(I=>new u(5,I)),gt.u48be=(I=>new u(6,I)),gt.nu64be=(I=>new R(I)),gt.s8=(I=>new l(1,I)),gt.s16=(I=>new l(2,I)),gt.s24=(I=>new l(3,I)),gt.s32=(I=>new l(4,I)),gt.s40=(I=>new l(5,I)),gt.s48=(I=>new l(6,I)),gt.ns64=(I=>new D(I)),gt.s16be=(I=>new g(2,I)),gt.s24be=(I=>new g(3,I)),gt.s32be=(I=>new g(4,I)),gt.s40be=(I=>new g(5,I)),gt.s48be=(I=>new g(6,I)),gt.ns64be=(I=>new O(I)),gt.f32=(I=>new $(I)),gt.f32be=(I=>new V(I)),gt.f64=(I=>new z(I)),gt.f64be=(I=>new j(I)),gt.struct=((I,w,p)=>new ot(I,w,p)),gt.bits=((I,w,p)=>new L(I,w,p)),gt.seq=((I,w,p)=>new et(I,w,p)),gt.union=((I,w,p)=>new q(I,w,p)),gt.unionLayoutDiscriminator=((I,w)=>new rt(I,w)),gt.blob=((I,w)=>new h(I,w)),gt.cstr=(I=>new _(I)),gt.utf8=((I,w)=>new M(I,w)),gt.const=((I,w)=>new C(I,w)),gt}const Yg=qo(jg);var Tc;function Xg(){return Tc||(Tc=1,(function(n){var t=Cn&&Cn.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(n,"__esModule",{value:!0}),n.map=n.array=n.rustEnum=n.str=n.vecU8=n.tagged=n.vec=n.bool=n.option=n.publicKey=n.i256=n.u256=n.i128=n.u128=n.i64=n.u64=n.struct=n.f64=n.f32=n.i32=n.u32=n.i16=n.u16=n.i8=n.u8=void 0;const e=Rc(),r=Yg,s=t(Qo());var i=Rc();Object.defineProperty(n,"u8",{enumerable:!0,get:function(){return i.u8}}),Object.defineProperty(n,"i8",{enumerable:!0,get:function(){return i.s8}}),Object.defineProperty(n,"u16",{enumerable:!0,get:function(){return i.u16}}),Object.defineProperty(n,"i16",{enumerable:!0,get:function(){return i.s16}}),Object.defineProperty(n,"u32",{enumerable:!0,get:function(){return i.u32}}),Object.defineProperty(n,"i32",{enumerable:!0,get:function(){return i.s32}}),Object.defineProperty(n,"f32",{enumerable:!0,get:function(){return i.f32}}),Object.defineProperty(n,"f64",{enumerable:!0,get:function(){return i.f64}}),Object.defineProperty(n,"struct",{enumerable:!0,get:function(){return i.struct}});class o extends e.Layout{constructor(E,a,h){super(E,h),this.blob=(0,e.blob)(E),this.signed=a}decode(E,a=0){const h=new s.default(this.blob.decode(E,a),10,"le");return this.signed?h.fromTwos(this.span*8).clone():h}encode(E,a,h=0){return this.signed&&(E=E.toTwos(this.span*8)),this.blob.encode(E.toArrayLike(At,"le",this.span),a,h)}}function u(L){return new o(8,!1,L)}n.u64=u;function l(L){return new o(8,!0,L)}n.i64=l;function g(L){return new o(16,!1,L)}n.u128=g;function d(L){return new o(16,!0,L)}n.i128=d;function x(L){return new o(32,!1,L)}n.u256=x;function A(L){return new o(32,!0,L)}n.i256=A;class k extends e.Layout{constructor(E,a,h,_){super(E.span,_),this.layout=E,this.decoder=a,this.encoder=h}decode(E,a){return this.decoder(this.layout.decode(E,a))}encode(E,a,h){return this.layout.encode(this.encoder(E),a,h)}getSpan(E,a){return this.layout.getSpan(E,a)}}function R(L){return new k((0,e.blob)(32),E=>new r.PublicKey(E),E=>E.toBuffer(),L)}n.publicKey=R;class D extends e.Layout{constructor(E,a){super(-1,a),this.layout=E,this.discriminator=(0,e.u8)()}encode(E,a,h=0){return E==null?this.discriminator.encode(0,a,h):(this.discriminator.encode(1,a,h),this.layout.encode(E,a,h+1)+1)}decode(E,a=0){const h=this.discriminator.decode(E,a);if(h===0)return null;if(h===1)return this.layout.decode(E,a+1);throw new Error("Invalid option "+this.property)}getSpan(E,a=0){const h=this.discriminator.decode(E,a);if(h===0)return 1;if(h===1)return this.layout.getSpan(E,a+1)+1;throw new Error("Invalid option "+this.property)}}function O(L,E){return new D(L,E)}n.option=O;function $(L){return new k((0,e.u8)(),V,z,L)}n.bool=$;function V(L){if(L===0)return!1;if(L===1)return!0;throw new Error("Invalid bool: "+L)}function z(L){return L?1:0}function j(L,E){const a=(0,e.u32)("length"),h=(0,e.struct)([a,(0,e.seq)(L,(0,e.offset)(a,-a.span),"values")]);return new k(h,({values:_})=>_,_=>({values:_}),E)}n.vec=j;function et(L,E,a){const h=(0,e.struct)([u("tag"),E.replicate("data")]);function _({tag:M,data:C}){if(!M.eq(L))throw new Error("Invalid tag, expected: "+L.toString("hex")+", got: "+M.toString("hex"));return C}return new k(h,_,M=>({tag:L,data:M}),a)}n.tagged=et;function ot(L){const E=(0,e.u32)("length"),a=(0,e.struct)([E,(0,e.blob)((0,e.offset)(E,-E.span),"data")]);return new k(a,({data:h})=>h,h=>({data:h}),L)}n.vecU8=ot;function Q(L){return new k(ot(),E=>E.toString("utf-8"),E=>At.from(E,"utf-8"),L)}n.str=Q;function rt(L,E,a){const h=(0,e.union)(a??(0,e.u8)(),E);return L.forEach((_,M)=>h.addVariant(M,_,_.property)),h}n.rustEnum=rt;function q(L,E,a){const h=(0,e.struct)([(0,e.seq)(L,E,"values")]);return new k(h,({values:_})=>_,_=>({values:_}),a)}n.array=q;class F extends e.Layout{constructor(E,a,h){super(E.span+a.span,h),this.keyLayout=E,this.valueLayout=a}decode(E,a){a=a||0;const h=this.keyLayout.decode(E,a),_=this.valueLayout.decode(E,a+this.keyLayout.getSpan(E,a));return[h,_]}encode(E,a,h){h=h||0;const _=this.keyLayout.encode(E[0],a,h),M=this.valueLayout.encode(E[1],a,h+_);return _+M}getSpan(E,a){return this.keyLayout.getSpan(E,a)+this.valueLayout.getSpan(E,a)}}function W(L,E,a){const h=(0,e.u32)("length"),_=(0,e.struct)([h,(0,e.seq)(new F(L,E),(0,e.offset)(h,-h.span),"values")]);return new k(_,({values:M})=>new Map(M),M=>({values:Array.from(M.entries())}),a)}n.map=W})(Cn)),Cn}var Bt=Xg();/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function Tn(n){let t=n.length;for(;--t>=0;)n[t]=0}const Jg=3,Qg=258,$l=29,ty=256,ey=ty+1+$l,Wl=30,ry=512,ny=new Array((ey+2)*2);Tn(ny);const iy=new Array(Wl*2);Tn(iy);const sy=new Array(ry);Tn(sy);const oy=new Array(Qg-Jg+1);Tn(oy);const ay=new Array($l);Tn(ay);const cy=new Array(Wl);Tn(cy);const uy=(n,t,e,r)=>{let s=n&65535|0,i=n>>>16&65535|0,o=0;for(;e!==0;){o=e>2e3?2e3:e,e-=o;do s=s+t[r++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0};var To=uy;const ly=()=>{let n,t=[];for(var e=0;e<256;e++){n=e;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t},hy=new Uint32Array(ly()),fy=(n,t,e,r)=>{const s=hy,i=r+e;n^=-1;for(let o=r;o<i;o++)n=n>>>8^s[(n^t[o])&255];return n^-1};var rr=fy,Lo={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vl={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const dy=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var py=function(n){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const r in e)dy(e,r)&&(n[r]=e[r])}}return n},gy=n=>{let t=0;for(let r=0,s=n.length;r<s;r++)t+=n[r].length;const e=new Uint8Array(t);for(let r=0,s=0,i=n.length;r<i;r++){let o=n[r];e.set(o,s),s+=o.length}return e},Hl={assign:py,flattenChunks:gy};let jl=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{jl=!1}const Hn=new Uint8Array(256);for(let n=0;n<256;n++)Hn[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Hn[254]=Hn[254]=1;var yy=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let t,e,r,s,i,o=n.length,u=0;for(s=0;s<o;s++)e=n.charCodeAt(s),(e&64512)===55296&&s+1<o&&(r=n.charCodeAt(s+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),s++)),u+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(u),i=0,s=0;i<u;s++)e=n.charCodeAt(s),(e&64512)===55296&&s+1<o&&(r=n.charCodeAt(s+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),s++)),e<128?t[i++]=e:e<2048?(t[i++]=192|e>>>6,t[i++]=128|e&63):e<65536?(t[i++]=224|e>>>12,t[i++]=128|e>>>6&63,t[i++]=128|e&63):(t[i++]=240|e>>>18,t[i++]=128|e>>>12&63,t[i++]=128|e>>>6&63,t[i++]=128|e&63);return t};const my=(n,t)=>{if(t<65534&&n.subarray&&jl)return String.fromCharCode.apply(null,n.length===t?n:n.subarray(0,t));let e="";for(let r=0;r<t;r++)e+=String.fromCharCode(n[r]);return e};var wy=(n,t)=>{const e=t||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,t));let r,s;const i=new Array(e*2);for(s=0,r=0;r<e;){let o=n[r++];if(o<128){i[s++]=o;continue}let u=Hn[o];if(u>4){i[s++]=65533,r+=u-1;continue}for(o&=u===2?31:u===3?15:7;u>1&&r<e;)o=o<<6|n[r++]&63,u--;if(u>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return my(i,s)},by=(n,t)=>{t=t||n.length,t>n.length&&(t=n.length);let e=t-1;for(;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+Hn[n[e]]>t?e:t},Mo={string2buf:yy,buf2string:wy,utf8border:by};function vy(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ey=vy;const wi=16209,ky=16191;var _y=function(t,e){let r,s,i,o,u,l,g,d,x,A,k,R,D,O,$,V,z,j,et,ot,Q,rt,q,F;const W=t.state;r=t.next_in,q=t.input,s=r+(t.avail_in-5),i=t.next_out,F=t.output,o=i-(e-t.avail_out),u=i+(t.avail_out-257),l=W.dmax,g=W.wsize,d=W.whave,x=W.wnext,A=W.window,k=W.hold,R=W.bits,D=W.lencode,O=W.distcode,$=(1<<W.lenbits)-1,V=(1<<W.distbits)-1;t:do{R<15&&(k+=q[r++]<<R,R+=8,k+=q[r++]<<R,R+=8),z=D[k&$];e:for(;;){if(j=z>>>24,k>>>=j,R-=j,j=z>>>16&255,j===0)F[i++]=z&65535;else if(j&16){et=z&65535,j&=15,j&&(R<j&&(k+=q[r++]<<R,R+=8),et+=k&(1<<j)-1,k>>>=j,R-=j),R<15&&(k+=q[r++]<<R,R+=8,k+=q[r++]<<R,R+=8),z=O[k&V];r:for(;;){if(j=z>>>24,k>>>=j,R-=j,j=z>>>16&255,j&16){if(ot=z&65535,j&=15,R<j&&(k+=q[r++]<<R,R+=8,R<j&&(k+=q[r++]<<R,R+=8)),ot+=k&(1<<j)-1,ot>l){t.msg="invalid distance too far back",W.mode=wi;break t}if(k>>>=j,R-=j,j=i-o,ot>j){if(j=ot-j,j>d&&W.sane){t.msg="invalid distance too far back",W.mode=wi;break t}if(Q=0,rt=A,x===0){if(Q+=g-j,j<et){et-=j;do F[i++]=A[Q++];while(--j);Q=i-ot,rt=F}}else if(x<j){if(Q+=g+x-j,j-=x,j<et){et-=j;do F[i++]=A[Q++];while(--j);if(Q=0,x<et){j=x,et-=j;do F[i++]=A[Q++];while(--j);Q=i-ot,rt=F}}}else if(Q+=x-j,j<et){et-=j;do F[i++]=A[Q++];while(--j);Q=i-ot,rt=F}for(;et>2;)F[i++]=rt[Q++],F[i++]=rt[Q++],F[i++]=rt[Q++],et-=3;et&&(F[i++]=rt[Q++],et>1&&(F[i++]=rt[Q++]))}else{Q=i-ot;do F[i++]=F[Q++],F[i++]=F[Q++],F[i++]=F[Q++],et-=3;while(et>2);et&&(F[i++]=F[Q++],et>1&&(F[i++]=F[Q++]))}}else if((j&64)===0){z=O[(z&65535)+(k&(1<<j)-1)];continue r}else{t.msg="invalid distance code",W.mode=wi;break t}break}}else if((j&64)===0){z=D[(z&65535)+(k&(1<<j)-1)];continue e}else if(j&32){W.mode=ky;break t}else{t.msg="invalid literal/length code",W.mode=wi;break t}break}}while(r<s&&i<u);et=R>>3,r-=et,R-=et<<3,k&=(1<<R)-1,t.next_in=r,t.next_out=i,t.avail_in=r<s?5+(s-r):5-(r-s),t.avail_out=i<u?257+(u-i):257-(i-u),W.hold=k,W.bits=R};const hn=15,Lc=852,Mc=592,Pc=0,co=1,Cc=2,Sy=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ay=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Iy=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),xy=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),By=(n,t,e,r,s,i,o,u)=>{const l=u.bits;let g=0,d=0,x=0,A=0,k=0,R=0,D=0,O=0,$=0,V=0,z,j,et,ot,Q,rt=null,q;const F=new Uint16Array(hn+1),W=new Uint16Array(hn+1);let L=null,E,a,h;for(g=0;g<=hn;g++)F[g]=0;for(d=0;d<r;d++)F[t[e+d]]++;for(k=l,A=hn;A>=1&&F[A]===0;A--);if(k>A&&(k=A),A===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,u.bits=1,0;for(x=1;x<A&&F[x]===0;x++);for(k<x&&(k=x),O=1,g=1;g<=hn;g++)if(O<<=1,O-=F[g],O<0)return-1;if(O>0&&(n===Pc||A!==1))return-1;for(W[1]=0,g=1;g<hn;g++)W[g+1]=W[g]+F[g];for(d=0;d<r;d++)t[e+d]!==0&&(o[W[t[e+d]]++]=d);if(n===Pc?(rt=L=o,q=20):n===co?(rt=Sy,L=Ay,q=257):(rt=Iy,L=xy,q=0),V=0,d=0,g=x,Q=i,R=k,D=0,et=-1,$=1<<k,ot=$-1,n===co&&$>Lc||n===Cc&&$>Mc)return 1;for(;;){E=g-D,o[d]+1<q?(a=0,h=o[d]):o[d]>=q?(a=L[o[d]-q],h=rt[o[d]-q]):(a=96,h=0),z=1<<g-D,j=1<<R,x=j;do j-=z,s[Q+(V>>D)+j]=E<<24|a<<16|h|0;while(j!==0);for(z=1<<g-1;V&z;)z>>=1;if(z!==0?(V&=z-1,V+=z):V=0,d++,--F[g]===0){if(g===A)break;g=t[e+o[d]]}if(g>k&&(V&ot)!==et){for(D===0&&(D=k),Q+=x,R=g-D,O=1<<R;R+D<A&&(O-=F[R+D],!(O<=0));)R++,O<<=1;if($+=1<<R,n===co&&$>Lc||n===Cc&&$>Mc)return 1;et=V&ot,s[et]=k<<24|R<<16|Q-i|0}}return V!==0&&(s[Q+V]=g-D<<24|64<<16|0),u.bits=k,0};var Dn=By;const Ry=0,Gl=1,Zl=2,{Z_FINISH:Oc,Z_BLOCK:Ty,Z_TREES:bi,Z_OK:Jr,Z_STREAM_END:Ly,Z_NEED_DICT:My,Z_STREAM_ERROR:He,Z_DATA_ERROR:Yl,Z_MEM_ERROR:Xl,Z_BUF_ERROR:Py,Z_DEFLATED:Uc}=Vl,cs=16180,Nc=16181,Dc=16182,zc=16183,Fc=16184,Kc=16185,qc=16186,$c=16187,Wc=16188,Vc=16189,$i=16190,pr=16191,uo=16192,Hc=16193,lo=16194,jc=16195,Gc=16196,Zc=16197,Yc=16198,vi=16199,Ei=16200,Xc=16201,Jc=16202,Qc=16203,tu=16204,eu=16205,ho=16206,ru=16207,nu=16208,se=16209,Jl=16210,Ql=16211,Cy=852,Oy=592,Uy=15,Ny=Uy,iu=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Dy(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const nn=n=>{if(!n)return 1;const t=n.state;return!t||t.strm!==n||t.mode<cs||t.mode>Ql?1:0},th=n=>{if(nn(n))return He;const t=n.state;return n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=cs,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Cy),t.distcode=t.distdyn=new Int32Array(Oy),t.sane=1,t.back=-1,Jr},eh=n=>{if(nn(n))return He;const t=n.state;return t.wsize=0,t.whave=0,t.wnext=0,th(n)},rh=(n,t)=>{let e;if(nn(n))return He;const r=n.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?He:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=e,r.wbits=t,eh(n))},nh=(n,t)=>{if(!n)return He;const e=new Dy;n.state=e,e.strm=n,e.window=null,e.mode=cs;const r=rh(n,t);return r!==Jr&&(n.state=null),r},zy=n=>nh(n,Ny);let su=!0,fo,po;const Fy=n=>{if(su){fo=new Int32Array(512),po=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(Dn(Gl,n.lens,0,288,fo,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;Dn(Zl,n.lens,0,32,po,0,n.work,{bits:5}),su=!1}n.lencode=fo,n.lenbits=9,n.distcode=po,n.distbits=5},ih=(n,t,e,r)=>{let s;const i=n.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(e-i.wsize,e),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>r&&(s=r),i.window.set(t.subarray(e-r,e-r+s),i.wnext),r-=s,r?(i.window.set(t.subarray(e-r,e),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},Ky=(n,t)=>{let e,r,s,i,o,u,l,g,d,x,A,k,R,D,O=0,$,V,z,j,et,ot,Q,rt;const q=new Uint8Array(4);let F,W;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(nn(n)||!n.output||!n.input&&n.avail_in!==0)return He;e=n.state,e.mode===pr&&(e.mode=uo),o=n.next_out,s=n.output,l=n.avail_out,i=n.next_in,r=n.input,u=n.avail_in,g=e.hold,d=e.bits,x=u,A=l,rt=Jr;t:for(;;)switch(e.mode){case cs:if(e.wrap===0){e.mode=uo;break}for(;d<16;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}if(e.wrap&2&&g===35615){e.wbits===0&&(e.wbits=15),e.check=0,q[0]=g&255,q[1]=g>>>8&255,e.check=rr(e.check,q,2,0),g=0,d=0,e.mode=Nc;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((g&255)<<8)+(g>>8))%31){n.msg="incorrect header check",e.mode=se;break}if((g&15)!==Uc){n.msg="unknown compression method",e.mode=se;break}if(g>>>=4,d-=4,Q=(g&15)+8,e.wbits===0&&(e.wbits=Q),Q>15||Q>e.wbits){n.msg="invalid window size",e.mode=se;break}e.dmax=1<<e.wbits,e.flags=0,n.adler=e.check=1,e.mode=g&512?Vc:pr,g=0,d=0;break;case Nc:for(;d<16;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}if(e.flags=g,(e.flags&255)!==Uc){n.msg="unknown compression method",e.mode=se;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=se;break}e.head&&(e.head.text=g>>8&1),e.flags&512&&e.wrap&4&&(q[0]=g&255,q[1]=g>>>8&255,e.check=rr(e.check,q,2,0)),g=0,d=0,e.mode=Dc;case Dc:for(;d<32;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}e.head&&(e.head.time=g),e.flags&512&&e.wrap&4&&(q[0]=g&255,q[1]=g>>>8&255,q[2]=g>>>16&255,q[3]=g>>>24&255,e.check=rr(e.check,q,4,0)),g=0,d=0,e.mode=zc;case zc:for(;d<16;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}e.head&&(e.head.xflags=g&255,e.head.os=g>>8),e.flags&512&&e.wrap&4&&(q[0]=g&255,q[1]=g>>>8&255,e.check=rr(e.check,q,2,0)),g=0,d=0,e.mode=Fc;case Fc:if(e.flags&1024){for(;d<16;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}e.length=g,e.head&&(e.head.extra_len=g),e.flags&512&&e.wrap&4&&(q[0]=g&255,q[1]=g>>>8&255,e.check=rr(e.check,q,2,0)),g=0,d=0}else e.head&&(e.head.extra=null);e.mode=Kc;case Kc:if(e.flags&1024&&(k=e.length,k>u&&(k=u),k&&(e.head&&(Q=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(r.subarray(i,i+k),Q)),e.flags&512&&e.wrap&4&&(e.check=rr(e.check,r,k,i)),u-=k,i+=k,e.length-=k),e.length))break t;e.length=0,e.mode=qc;case qc:if(e.flags&2048){if(u===0)break t;k=0;do Q=r[i+k++],e.head&&Q&&e.length<65536&&(e.head.name+=String.fromCharCode(Q));while(Q&&k<u);if(e.flags&512&&e.wrap&4&&(e.check=rr(e.check,r,k,i)),u-=k,i+=k,Q)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=$c;case $c:if(e.flags&4096){if(u===0)break t;k=0;do Q=r[i+k++],e.head&&Q&&e.length<65536&&(e.head.comment+=String.fromCharCode(Q));while(Q&&k<u);if(e.flags&512&&e.wrap&4&&(e.check=rr(e.check,r,k,i)),u-=k,i+=k,Q)break t}else e.head&&(e.head.comment=null);e.mode=Wc;case Wc:if(e.flags&512){for(;d<16;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}if(e.wrap&4&&g!==(e.check&65535)){n.msg="header crc mismatch",e.mode=se;break}g=0,d=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=pr;break;case Vc:for(;d<32;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}n.adler=e.check=iu(g),g=0,d=0,e.mode=$i;case $i:if(e.havedict===0)return n.next_out=o,n.avail_out=l,n.next_in=i,n.avail_in=u,e.hold=g,e.bits=d,My;n.adler=e.check=1,e.mode=pr;case pr:if(t===Ty||t===bi)break t;case uo:if(e.last){g>>>=d&7,d-=d&7,e.mode=ho;break}for(;d<3;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}switch(e.last=g&1,g>>>=1,d-=1,g&3){case 0:e.mode=Hc;break;case 1:if(Fy(e),e.mode=vi,t===bi){g>>>=2,d-=2;break t}break;case 2:e.mode=Gc;break;case 3:n.msg="invalid block type",e.mode=se}g>>>=2,d-=2;break;case Hc:for(g>>>=d&7,d-=d&7;d<32;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}if((g&65535)!==(g>>>16^65535)){n.msg="invalid stored block lengths",e.mode=se;break}if(e.length=g&65535,g=0,d=0,e.mode=lo,t===bi)break t;case lo:e.mode=jc;case jc:if(k=e.length,k){if(k>u&&(k=u),k>l&&(k=l),k===0)break t;s.set(r.subarray(i,i+k),o),u-=k,i+=k,l-=k,o+=k,e.length-=k;break}e.mode=pr;break;case Gc:for(;d<14;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}if(e.nlen=(g&31)+257,g>>>=5,d-=5,e.ndist=(g&31)+1,g>>>=5,d-=5,e.ncode=(g&15)+4,g>>>=4,d-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=se;break}e.have=0,e.mode=Zc;case Zc:for(;e.have<e.ncode;){for(;d<3;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}e.lens[L[e.have++]]=g&7,g>>>=3,d-=3}for(;e.have<19;)e.lens[L[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,F={bits:e.lenbits},rt=Dn(Ry,e.lens,0,19,e.lencode,0,e.work,F),e.lenbits=F.bits,rt){n.msg="invalid code lengths set",e.mode=se;break}e.have=0,e.mode=Yc;case Yc:for(;e.have<e.nlen+e.ndist;){for(;O=e.lencode[g&(1<<e.lenbits)-1],$=O>>>24,V=O>>>16&255,z=O&65535,!($<=d);){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}if(z<16)g>>>=$,d-=$,e.lens[e.have++]=z;else{if(z===16){for(W=$+2;d<W;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}if(g>>>=$,d-=$,e.have===0){n.msg="invalid bit length repeat",e.mode=se;break}Q=e.lens[e.have-1],k=3+(g&3),g>>>=2,d-=2}else if(z===17){for(W=$+3;d<W;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}g>>>=$,d-=$,Q=0,k=3+(g&7),g>>>=3,d-=3}else{for(W=$+7;d<W;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}g>>>=$,d-=$,Q=0,k=11+(g&127),g>>>=7,d-=7}if(e.have+k>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=se;break}for(;k--;)e.lens[e.have++]=Q}}if(e.mode===se)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=se;break}if(e.lenbits=9,F={bits:e.lenbits},rt=Dn(Gl,e.lens,0,e.nlen,e.lencode,0,e.work,F),e.lenbits=F.bits,rt){n.msg="invalid literal/lengths set",e.mode=se;break}if(e.distbits=6,e.distcode=e.distdyn,F={bits:e.distbits},rt=Dn(Zl,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,F),e.distbits=F.bits,rt){n.msg="invalid distances set",e.mode=se;break}if(e.mode=vi,t===bi)break t;case vi:e.mode=Ei;case Ei:if(u>=6&&l>=258){n.next_out=o,n.avail_out=l,n.next_in=i,n.avail_in=u,e.hold=g,e.bits=d,_y(n,A),o=n.next_out,s=n.output,l=n.avail_out,i=n.next_in,r=n.input,u=n.avail_in,g=e.hold,d=e.bits,e.mode===pr&&(e.back=-1);break}for(e.back=0;O=e.lencode[g&(1<<e.lenbits)-1],$=O>>>24,V=O>>>16&255,z=O&65535,!($<=d);){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}if(V&&(V&240)===0){for(j=$,et=V,ot=z;O=e.lencode[ot+((g&(1<<j+et)-1)>>j)],$=O>>>24,V=O>>>16&255,z=O&65535,!(j+$<=d);){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}g>>>=j,d-=j,e.back+=j}if(g>>>=$,d-=$,e.back+=$,e.length=z,V===0){e.mode=eu;break}if(V&32){e.back=-1,e.mode=pr;break}if(V&64){n.msg="invalid literal/length code",e.mode=se;break}e.extra=V&15,e.mode=Xc;case Xc:if(e.extra){for(W=e.extra;d<W;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}e.length+=g&(1<<e.extra)-1,g>>>=e.extra,d-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Jc;case Jc:for(;O=e.distcode[g&(1<<e.distbits)-1],$=O>>>24,V=O>>>16&255,z=O&65535,!($<=d);){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}if((V&240)===0){for(j=$,et=V,ot=z;O=e.distcode[ot+((g&(1<<j+et)-1)>>j)],$=O>>>24,V=O>>>16&255,z=O&65535,!(j+$<=d);){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}g>>>=j,d-=j,e.back+=j}if(g>>>=$,d-=$,e.back+=$,V&64){n.msg="invalid distance code",e.mode=se;break}e.offset=z,e.extra=V&15,e.mode=Qc;case Qc:if(e.extra){for(W=e.extra;d<W;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}e.offset+=g&(1<<e.extra)-1,g>>>=e.extra,d-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=se;break}e.mode=tu;case tu:if(l===0)break t;if(k=A-l,e.offset>k){if(k=e.offset-k,k>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=se;break}k>e.wnext?(k-=e.wnext,R=e.wsize-k):R=e.wnext-k,k>e.length&&(k=e.length),D=e.window}else D=s,R=o-e.offset,k=e.length;k>l&&(k=l),l-=k,e.length-=k;do s[o++]=D[R++];while(--k);e.length===0&&(e.mode=Ei);break;case eu:if(l===0)break t;s[o++]=e.length,l--,e.mode=Ei;break;case ho:if(e.wrap){for(;d<32;){if(u===0)break t;u--,g|=r[i++]<<d,d+=8}if(A-=l,n.total_out+=A,e.total+=A,e.wrap&4&&A&&(n.adler=e.check=e.flags?rr(e.check,s,A,o-A):To(e.check,s,A,o-A)),A=l,e.wrap&4&&(e.flags?g:iu(g))!==e.check){n.msg="incorrect data check",e.mode=se;break}g=0,d=0}e.mode=ru;case ru:if(e.wrap&&e.flags){for(;d<32;){if(u===0)break t;u--,g+=r[i++]<<d,d+=8}if(e.wrap&4&&g!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=se;break}g=0,d=0}e.mode=nu;case nu:rt=Ly;break t;case se:rt=Yl;break t;case Jl:return Xl;case Ql:default:return He}return n.next_out=o,n.avail_out=l,n.next_in=i,n.avail_in=u,e.hold=g,e.bits=d,(e.wsize||A!==n.avail_out&&e.mode<se&&(e.mode<ho||t!==Oc))&&ih(n,n.output,n.next_out,A-n.avail_out),x-=n.avail_in,A-=n.avail_out,n.total_in+=x,n.total_out+=A,e.total+=A,e.wrap&4&&A&&(n.adler=e.check=e.flags?rr(e.check,s,A,n.next_out-A):To(e.check,s,A,n.next_out-A)),n.data_type=e.bits+(e.last?64:0)+(e.mode===pr?128:0)+(e.mode===vi||e.mode===lo?256:0),(x===0&&A===0||t===Oc)&&rt===Jr&&(rt=Py),rt},qy=n=>{if(nn(n))return He;let t=n.state;return t.window&&(t.window=null),n.state=null,Jr},$y=(n,t)=>{if(nn(n))return He;const e=n.state;return(e.wrap&2)===0?He:(e.head=t,t.done=!1,Jr)},Wy=(n,t)=>{const e=t.length;let r,s,i;return nn(n)||(r=n.state,r.wrap!==0&&r.mode!==$i)?He:r.mode===$i&&(s=1,s=To(s,t,e,0),s!==r.check)?Yl:(i=ih(n,t,e,e),i?(r.mode=Jl,Xl):(r.havedict=1,Jr))};var Vy=eh,Hy=rh,jy=th,Gy=zy,Zy=nh,Yy=Ky,Xy=qy,Jy=$y,Qy=Wy,tm="pako inflate (from Nodeca project)",mr={inflateReset:Vy,inflateReset2:Hy,inflateResetKeep:jy,inflateInit:Gy,inflateInit2:Zy,inflate:Yy,inflateEnd:Xy,inflateGetHeader:Jy,inflateSetDictionary:Qy,inflateInfo:tm};function em(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var rm=em;const sh=Object.prototype.toString,{Z_NO_FLUSH:nm,Z_FINISH:im,Z_OK:jn,Z_STREAM_END:go,Z_NEED_DICT:yo,Z_STREAM_ERROR:sm,Z_DATA_ERROR:ou,Z_MEM_ERROR:om}=Vl;function us(n){this.options=Hl.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(n&&n.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ey,this.strm.avail_out=0;let e=mr.inflateInit2(this.strm,t.windowBits);if(e!==jn)throw new Error(Lo[e]);if(this.header=new rm,mr.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Mo.string2buf(t.dictionary):sh.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=mr.inflateSetDictionary(this.strm,t.dictionary),e!==jn)))throw new Error(Lo[e])}us.prototype.push=function(n,t){const e=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let i,o,u;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?im:nm,sh.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),i=mr.inflate(e,o),i===yo&&s&&(i=mr.inflateSetDictionary(e,s),i===jn?i=mr.inflate(e,o):i===ou&&(i=yo));e.avail_in>0&&i===go&&e.state.wrap>0&&n[e.next_in]!==0;)mr.inflateReset(e),i=mr.inflate(e,o);switch(i){case sm:case ou:case yo:case om:return this.onEnd(i),this.ended=!0,!1}if(u=e.avail_out,e.next_out&&(e.avail_out===0||i===go))if(this.options.to==="string"){let l=Mo.utf8border(e.output,e.next_out),g=e.next_out-l,d=Mo.buf2string(e.output,l);e.next_out=g,e.avail_out=r-g,g&&e.output.set(e.output.subarray(l,l+g),0),this.onData(d)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(i===jn&&u===0)){if(i===go)return i=mr.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};us.prototype.onData=function(n){this.chunks.push(n)};us.prototype.onEnd=function(n){n===jn&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Hl.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function am(n,t){const e=new us(t);if(e.push(n),e.err)throw e.msg||Lo[e.err];return e.result}var cm=am,um={inflate:cm};const{inflate:lm}=um;var hm=lm,mo={exports:{}},au;function fm(){return au||(au=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(l,g,d){this.fn=l,this.context=g,this.once=d||!1}function i(l,g,d,x,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var k=new s(d,x||l,A),R=e?e+g:g;return l._events[R]?l._events[R].fn?l._events[R]=[l._events[R],k]:l._events[R].push(k):(l._events[R]=k,l._eventsCount++),l}function o(l,g){--l._eventsCount===0?l._events=new r:delete l._events[g]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var g=[],d,x;if(this._eventsCount===0)return g;for(x in d=this._events)t.call(d,x)&&g.push(e?x.slice(1):x);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(d)):g},u.prototype.listeners=function(g){var d=e?e+g:g,x=this._events[d];if(!x)return[];if(x.fn)return[x.fn];for(var A=0,k=x.length,R=new Array(k);A<k;A++)R[A]=x[A].fn;return R},u.prototype.listenerCount=function(g){var d=e?e+g:g,x=this._events[d];return x?x.fn?1:x.length:0},u.prototype.emit=function(g,d,x,A,k,R){var D=e?e+g:g;if(!this._events[D])return!1;var O=this._events[D],$=arguments.length,V,z;if(O.fn){switch(O.once&&this.removeListener(g,O.fn,void 0,!0),$){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,d),!0;case 3:return O.fn.call(O.context,d,x),!0;case 4:return O.fn.call(O.context,d,x,A),!0;case 5:return O.fn.call(O.context,d,x,A,k),!0;case 6:return O.fn.call(O.context,d,x,A,k,R),!0}for(z=1,V=new Array($-1);z<$;z++)V[z-1]=arguments[z];O.fn.apply(O.context,V)}else{var j=O.length,et;for(z=0;z<j;z++)switch(O[z].once&&this.removeListener(g,O[z].fn,void 0,!0),$){case 1:O[z].fn.call(O[z].context);break;case 2:O[z].fn.call(O[z].context,d);break;case 3:O[z].fn.call(O[z].context,d,x);break;case 4:O[z].fn.call(O[z].context,d,x,A);break;default:if(!V)for(et=1,V=new Array($-1);et<$;et++)V[et-1]=arguments[et];O[z].fn.apply(O[z].context,V)}}return!0},u.prototype.on=function(g,d,x){return i(this,g,d,x,!1)},u.prototype.once=function(g,d,x){return i(this,g,d,x,!0)},u.prototype.removeListener=function(g,d,x,A){var k=e?e+g:g;if(!this._events[k])return this;if(!d)return o(this,k),this;var R=this._events[k];if(R.fn)R.fn===d&&(!A||R.once)&&(!x||R.context===x)&&o(this,k);else{for(var D=0,O=[],$=R.length;D<$;D++)(R[D].fn!==d||A&&!R[D].once||x&&R[D].context!==x)&&O.push(R[D]);O.length?this._events[k]=O.length===1?O[0]:O:o(this,k)}return this},u.prototype.removeAllListeners=function(g){var d;return g?(d=e?e+g:g,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,n.exports=u})(mo)),mo.exports}var dm=fm();const pm=An(dm);function gm(n,t){return Array.apply(0,new Array(Math.ceil(n.length/t))).map((e,r)=>n.slice(r*t,(r+1)*t))}const On=n=>"version"in n;function ym(n){return new TextDecoder("utf-8").decode(n)}function mm(n){return new TextEncoder().encode(n)}function cu(n){return pe.encode(n)}function uu(n){return n.toString("base64")}function oh(n){return yt.from(n,"base64")}function wm(n){const t=new Map;return n.errors&&n.errors.forEach(e=>{var r;let s=(r=e.msg)!==null&&r!==void 0?r:e.name;t.set(e.code,s)}),t}function bm(n,...t){if(n.args.length!=t.length)throw new Error("Invalid argument length");const e={};let r=0;return n.args.forEach(s=>{e[s.name]=t[r],r+=1}),e}function ah(n,t={}){n.forEach(e=>{if("accounts"in e)ah(e.accounts,t[e.name]);else if(t[e.name]===void 0)throw new Error(`Invalid arguments: ${e.name} not provided.`)})}function Ve(n){return n instanceof at?n:new at(n)}class vm extends TypeError{constructor(t,e){let r;const{message:s,...i}=t,{path:o}=t,u=o.length===0?s:"At path: "+o.join(".")+" -- "+s;super(u),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var l;return(l=r)!=null?l:r=[t,...e()]}}}function Em(n){return bn(n)&&typeof n[Symbol.iterator]=="function"}function bn(n){return typeof n=="object"&&n!=null}function Or(n){return typeof n=="string"?JSON.stringify(n):""+n}function km(n){const{done:t,value:e}=n.next();return t?void 0:e}function _m(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:u,message:l="Expected a value of type `"+o+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+Or(r)+"`"}=n;return{value:r,type:o,refinement:u,key:s[s.length-1],path:s,branch:i,...n,message:l}}function*lu(n,t,e,r){Em(n)||(n=[n]);for(const s of n){const i=_m(s,t,e,r);i&&(yield i)}}function*Ea(n,t,e){e===void 0&&(e={});const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,u={path:r,branch:s};if(i&&(n=t.coercer(n,u),o&&t.type!=="type"&&bn(t.schema)&&bn(n)&&!Array.isArray(n)))for(const g in n)t.schema[g]===void 0&&delete n[g];let l=!0;for(const g of t.validator(n,u))l=!1,yield[g,void 0];for(let[g,d,x]of t.entries(n,u)){const A=Ea(d,x,{path:g===void 0?r:[...r,g],branch:g===void 0?s:[...s,d],coerce:i,mask:o});for(const k of A)k[0]?(l=!1,yield[k[0],void 0]):i&&(d=k[1],g===void 0?n=d:n instanceof Map?n.set(g,d):n instanceof Set?n.add(d):bn(n)&&(n[g]=d))}if(l)for(const g of t.refiner(n,u))l=!1,yield[g,void 0];l&&(yield[void 0,n])}class Ur{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:r,validator:s,refiner:i,coercer:o=l=>l,entries:u=function*(){}}=t;this.type=e,this.schema=r,this.entries=u,this.coercer=o,s?this.validator=(l,g)=>{const d=s(l,g);return lu(d,g,this,l)}:this.validator=()=>[],i?this.refiner=(l,g)=>{const d=i(l,g);return lu(d,g,this,l)}:this.refiner=()=>[]}assert(t){return Sm(t,this)}create(t){return ka(t,this)}is(t){return ch(t,this)}mask(t){return Am(t,this)}validate(t,e){return e===void 0&&(e={}),si(t,this,e)}}function Sm(n,t){const e=si(n,t);if(e[0])throw e[0]}function ka(n,t){const e=si(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function Am(n,t){const e=si(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function ch(n,t){return!si(n,t)[0]}function si(n,t,e){e===void 0&&(e={});const r=Ea(n,t,e),s=km(r);return s[0]?[new vm(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function oi(n,t){return new Ur({type:n,schema:null,validator:t})}function Im(){return oi("any",()=>!0)}function wo(n){return new Ur({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+Or(t)}})}function xm(){return oi("boolean",n=>typeof n=="boolean")}function hu(n){const t=Or(n);return new Ur({type:"literal",schema:n,validator(e){return e===n||"Expected the literal `"+t+"`, but received: "+Or(e)}})}function ki(n){return new Ur({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function xi(){return oi("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+Or(n))}function Bi(n){return new Ur({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Wr(){return oi("string",n=>typeof n=="string"||"Expected a string, but received: "+Or(n))}function Mr(n){const t=Object.keys(n);return new Ur({type:"type",schema:n,*entries(e){if(bn(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return bn(e)||"Expected an object, but received: "+Or(e)}})}function uh(n){const t=n.map(e=>e.type).join(" | ");return new Ur({type:"union",schema:null,coercer(e,r){return(n.find(i=>{const[o]=i.validate(e,{coerce:!0});return!o})||_a()).coercer(e,r)},validator(e,r){const s=[];for(const i of n){const[...o]=Ea(e,i,r),[u]=o;if(u[0])for(const[l]of o)l&&s.push(l);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Or(e),...s]}})}function _a(){return oi("unknown",()=>!0)}function Bm(n,t,e){return new Ur({...n,coercer:(r,s)=>ch(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}const fu=99;async function Rm(n,t,e){if(t.length<=fu)return await du(n,t,e);{const r=gm(t,fu);return(await Promise.all(r.map(i=>du(n,i,e)))).flat()}}async function du(n,t,e){const r=e??n.commitment,{value:s,context:i}=await n.getMultipleAccountsInfoAndContext(t,r);return s.map((u,l)=>u===null?null:{publicKey:t[l],account:u,context:i})}async function Tm(n,t,e,r,s){var i;e&&e.length>0&&t.sign(...e);const o=t._compile(),u=o.serialize(),g=t._serialize(u).toString("base64"),d={encoding:"base64",commitment:r??n.commitment};if(s){const R=(Array.isArray(s)?s:o.nonProgramIds()).map(D=>D.toBase58());d.accounts={encoding:"base64",addresses:R}}e&&(d.sigVerify=!0);const x=[g,d],A=await n._rpcRequest("simulateTransaction",x),k=ka(A,Cm);if("error"in k){let R;if("data"in k.error&&(R=(i=k.error.data)===null||i===void 0?void 0:i.logs,R&&Array.isArray(R))){const D=`
    `,O=D+R.join(D);console.error(k.error.message,O)}throw new Cr("failed to simulate transaction: "+k.error.message,R)}return k.result}function Lm(n){return Bm(lh(n),Mm,t=>"error"in t?t:{...t,result:ka(t.result,n)})}const Mm=lh(_a());function lh(n){return uh([Mr({jsonrpc:hu("2.0"),id:Wr(),result:n}),Mr({jsonrpc:hu("2.0"),id:Wr(),error:Mr({code:_a(),message:Wr(),data:Bi(Im())})})])}function Pm(n){return Lm(Mr({context:Mr({slot:xi()}),value:n}))}const Cm=Pm(Mr({err:ki(uh([Mr({}),Wr()])),logs:ki(wo(Wr())),accounts:Bi(ki(wo(ki(Mr({executable:xm(),owner:Wr(),lamports:xi(),data:wo(Wr()),rentEpoch:Bi(xi())}))))),unitsConsumed:Bi(xi())}));class Om{constructor(t,e,r){this.connection=t,this.wallet=e,this.opts=r,this.publicKey=e?.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(t,e){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(t,e,r){var s,i,o,u;if(r===void 0&&(r=this.opts),On(t))e&&t.sign(e);else if(t.feePayer=(s=t.feePayer)!==null&&s!==void 0?s:this.wallet.publicKey,t.recentBlockhash=(await this.connection.getLatestBlockhash(r.preflightCommitment)).blockhash,e)for(const g of e)t.partialSign(g);t=await this.wallet.signTransaction(t);const l=t.serialize();try{return await pu(this.connection,l,r)}catch(g){if(g instanceof Po){const d=cu(On(t)?((i=t.signatures)===null||i===void 0?void 0:i[0])||new Uint8Array:(o=t.signature)!==null&&o!==void 0?o:new Uint8Array),x=await this.connection.getTransaction(d,{commitment:"confirmed"});if(x){const A=(u=x.meta)===null||u===void 0?void 0:u.logMessages;throw A?new Cr(g.message,A):g}else throw g}else throw g}}async sendAll(t,e){var r,s,i;e===void 0&&(e=this.opts);const o=(await this.connection.getLatestBlockhash(e.preflightCommitment)).blockhash;let u=t.map(d=>{var x,A;if(On(d.tx)){let k=d.tx;return d.signers&&k.sign(d.signers),k}else{let k=d.tx,R=(x=d.signers)!==null&&x!==void 0?x:[];return k.feePayer=(A=k.feePayer)!==null&&A!==void 0?A:this.wallet.publicKey,k.recentBlockhash=o,R.forEach(D=>{k.partialSign(D)}),k}});const l=await this.wallet.signAllTransactions(u),g=[];for(let d=0;d<u.length;d+=1){const x=l[d],A=x.serialize();try{g.push(await pu(this.connection,A,e))}catch(k){if(k instanceof Po){const R=cu(On(x)?((r=x.signatures)===null||r===void 0?void 0:r[0])||new Uint8Array:(s=x.signature)!==null&&s!==void 0?s:new Uint8Array),D=await this.connection.getTransaction(R,{commitment:"confirmed"});if(D){const O=(i=D.meta)===null||i===void 0?void 0:i.logMessages;throw O?new Cr(k.message,O):k}else throw k}else throw k}}return g}async simulate(t,e,r,s){let i=(await this.connection.getLatestBlockhash(r??this.connection.commitment)).blockhash,o;if(On(t)?(e&&(t.sign(e),t=await this.wallet.signTransaction(t)),o=await this.connection.simulateTransaction(t,{commitment:r})):(t.feePayer=t.feePayer||this.wallet.publicKey,t.recentBlockhash=i,e&&(t=await this.wallet.signTransaction(t)),o=await Tm(this.connection,t,e,r,s)),o.value.err)throw new Um(o.value);return o.value}}class Um extends Error{constructor(t,e){super(e),this.simulationResponse=t}}async function pu(n,t,e){const r=e&&{skipPreflight:e.skipPreflight,preflightCommitment:e.preflightCommitment||e.commitment},s=await n.sendRawTransaction(t,r),i=(await n.confirmTransaction(s,e&&e.commitment)).value;if(i.err)throw new Po(`Raw transaction ${s} failed (${JSON.stringify(i)})`);return s}class Po extends Error{constructor(t){super(t)}}function Co(){return Om.local()}const Nm=new Map;function hh(n){return Nm.get(n)!==void 0}class Wi extends Error{constructor(t){super(t),this.name="IdlError"}}class ai{constructor(t){this.stack=t}static parse(t){var e;const r=/^Program (\w*) invoke/,s=/^Program \w* success/,i=[];for(let o=0;o<t.length;o++){if(s.exec(t[o])){i.pop();continue}const u=(e=r.exec(t[o]))===null||e===void 0?void 0:e[1];u&&i.push(new at(u))}return new ai(i)}}class zn extends Error{constructor(t,e,r,s,i,o){super(r.join(`
`).replace("Program log: ","")),this.errorLogs=r,this.logs=s,this.error={errorCode:t,errorMessage:e,comparedValues:o,origin:i},this._programErrorStack=ai.parse(s)}static parse(t){if(!t)return null;const e=t.findIndex(A=>A.startsWith("Program log: AnchorError"));if(e===-1)return null;const r=t[e],s=[r];let i;if(e+1<t.length){if(t[e+1]==="Program log: Left:"){const A=/^Program log: (.*)$/,k=A.exec(t[e+2])[1],R=A.exec(t[e+4])[1];i=[new at(k),new at(R)],s.push(...t.slice(e+1,e+5))}else if(t[e+1].startsWith("Program log: Left:")){const A=/^Program log: (Left|Right): (.*)$/,k=A.exec(t[e+1])[2],R=A.exec(t[e+2])[2];s.push(...t.slice(e+1,e+3)),i=[k,R]}}const u=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),g=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),x=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(u){const[A,k,R]=u.slice(1,4),D={code:A,number:parseInt(k)};return new zn(D,R,s,t,void 0,i)}else if(g){const[A,k,R,D,O]=g.slice(1,6),$={code:R,number:parseInt(D)},V={file:A,line:parseInt(k)};return new zn($,O,s,t,V,i)}else if(x){const[A,k,R,D]=x.slice(1,5),O=A,$={code:k,number:parseInt(R)};return new zn($,D,s,t,O,i)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class Vi extends Error{constructor(t,e,r){super(),this.code=t,this.msg=e,this.logs=r,r&&(this._programErrorStack=ai.parse(r))}static parse(t,e){const r=t.toString();let s;if(r.includes("custom program error:")){let u=r.split("custom program error: ");if(u.length!==2)return null;s=u[1]}else{const u=r.match(/"Custom":([0-9]+)}/g);if(!u||u.length>1)return null;s=u[0].match(/([0-9]+)/g)[0]}let i;try{i=parseInt(s)}catch{return null}let o=e.get(i);return o!==void 0?new Vi(i,o,t.logs):(o=Dm.get(i),o!==void 0?new Vi(i,o,t.logs):null)}get program(){var t;return(t=this._programErrorStack)===null||t===void 0?void 0:t.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var t;return(t=this._programErrorStack)===null||t===void 0?void 0:t.stack}toString(){return this.msg}}function fh(n,t){hh("debug-logs")&&console.log("Translating error:",n);const e=zn.parse(n.logs);if(e)return e;const r=Vi.parse(n,t);if(r)return r;if(n.logs){const s={get:function(i,o){return o==="programErrorStack"?i.programErrorStack.stack:o==="program"?i.programErrorStack.stack[n.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return n.programErrorStack=ai.parse(n.logs),new Proxy(n,s)}return n}const wt={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,ConstraintAccountIsNone:2020,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,AccountReallocExceedsLimit:3016,AccountDuplicateReallocs:3017,DeclaredProgramIdMismatch:4100,Deprecated:5e3},Dm=new Map([[wt.InstructionMissing,"8 byte instruction identifier not provided"],[wt.InstructionFallbackNotFound,"Fallback functions are not supported"],[wt.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[wt.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[wt.IdlInstructionStub,"The program was compiled without idl instructions"],[wt.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[wt.ConstraintMut,"A mut constraint was violated"],[wt.ConstraintHasOne,"A has one constraint was violated"],[wt.ConstraintSigner,"A signer constraint was violated"],[wt.ConstraintRaw,"A raw constraint was violated"],[wt.ConstraintOwner,"An owner constraint was violated"],[wt.ConstraintRentExempt,"A rent exemption constraint was violated"],[wt.ConstraintSeeds,"A seeds constraint was violated"],[wt.ConstraintExecutable,"An executable constraint was violated"],[wt.ConstraintState,"Deprecated Error, feel free to replace with something else"],[wt.ConstraintAssociated,"An associated constraint was violated"],[wt.ConstraintAssociatedInit,"An associated init constraint was violated"],[wt.ConstraintClose,"A close constraint was violated"],[wt.ConstraintAddress,"An address constraint was violated"],[wt.ConstraintZero,"Expected zero account discriminant"],[wt.ConstraintTokenMint,"A token mint constraint was violated"],[wt.ConstraintTokenOwner,"A token owner constraint was violated"],[wt.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[wt.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[wt.ConstraintMintDecimals,"A mint decimals constraint was violated"],[wt.ConstraintSpace,"A space constraint was violated"],[wt.ConstraintAccountIsNone,"A required account for the constraint is None"],[wt.RequireViolated,"A require expression was violated"],[wt.RequireEqViolated,"A require_eq expression was violated"],[wt.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[wt.RequireNeqViolated,"A require_neq expression was violated"],[wt.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[wt.RequireGtViolated,"A require_gt expression was violated"],[wt.RequireGteViolated,"A require_gte expression was violated"],[wt.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[wt.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[wt.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[wt.AccountDidNotDeserialize,"Failed to deserialize the account"],[wt.AccountDidNotSerialize,"Failed to serialize the account"],[wt.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[wt.AccountNotMutable,"The given account is not mutable"],[wt.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[wt.InvalidProgramId,"Program ID was not as expected"],[wt.InvalidProgramExecutable,"Program account is not executable"],[wt.AccountNotSigner,"The given account did not sign"],[wt.AccountNotSystemOwned,"The given account is not owned by the system program"],[wt.AccountNotInitialized,"The program expected this account to be already initialized"],[wt.AccountNotProgramData,"The given account is not a program data account"],[wt.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[wt.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[wt.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[wt.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[wt.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[wt.Deprecated,"The API being used is deprecated and should no longer be used"]]);var Oo=function(){return Oo=Object.assign||function(t){for(var e,r=1,s=arguments.length;r<s;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Oo.apply(this,arguments)},Uo=function(){return Uo=Object.assign||function(t){for(var e,r=1,s=arguments.length;r<s;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Uo.apply(this,arguments)};function zm(n){return n.toLowerCase()}var Fm=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Km=/[^A-Z0-9]+/gi;function qm(n,t){t===void 0&&(t={});for(var e=t.splitRegexp,r=e===void 0?Fm:e,s=t.stripRegexp,i=s===void 0?Km:s,o=t.transform,u=o===void 0?zm:o,l=t.delimiter,g=l===void 0?" ":l,d=gu(gu(n,r,"$1\0$2"),i,"\0"),x=0,A=d.length;d.charAt(x)==="\0";)x++;for(;d.charAt(A-1)==="\0";)A--;return d.slice(x,A).split("\0").map(u).join(g)}function gu(n,t,e){return t instanceof RegExp?n.replace(t,e):t.reduce(function(r,s){return r.replace(s,e)},n)}function $m(n,t){return t===void 0&&(t={}),qm(n,Uo({delimiter:"."},t))}function Wm(n,t){return t===void 0&&(t={}),$m(n,Oo({delimiter:"_"},t))}class Oe{static fieldLayout(t,e){const r=t.name!==void 0?oe(t.name):void 0;switch(t.type){case"bool":return Bt.bool(r);case"u8":return Bt.u8(r);case"i8":return Bt.i8(r);case"u16":return Bt.u16(r);case"i16":return Bt.i16(r);case"u32":return Bt.u32(r);case"i32":return Bt.i32(r);case"f32":return Bt.f32(r);case"u64":return Bt.u64(r);case"i64":return Bt.i64(r);case"f64":return Bt.f64(r);case"u128":return Bt.u128(r);case"i128":return Bt.i128(r);case"u256":return Bt.u256(r);case"i256":return Bt.i256(r);case"bytes":return Bt.vecU8(r);case"string":return Bt.str(r);case"publicKey":return Bt.publicKey(r);default:{if("vec"in t.type)return Bt.vec(Oe.fieldLayout({name:void 0,type:t.type.vec},e),r);if("option"in t.type)return Bt.option(Oe.fieldLayout({name:void 0,type:t.type.option},e),r);if("defined"in t.type){if(!e)throw new Wi("User defined types not provided");const s=t.type.defined,i=e.filter(o=>o.name===s);if(i.length!==1)throw new Wi(`Type not found: ${JSON.stringify(t)}`);return Oe.typeDefLayout(i[0],e,r)}else if("array"in t.type){let s=t.type.array[0],i=t.type.array[1],o=Oe.fieldLayout({name:void 0,type:s},e);return Bt.array(o,i,r)}else throw new Error(`Not yet implemented: ${t}`)}}}static typeDefLayout(t,e=[],r){switch(t.type.kind){case"struct":{const s=t.type.fields.map(i=>Oe.fieldLayout(i,e));return Bt.struct(s,r)}case"enum":{let s=t.type.variants.map(i=>{const o=oe(i.name);if(!i.fields)return Bt.struct([],o);const u=i.fields.map((l,g)=>l?.name?Oe.fieldLayout(l,e):Oe.fieldLayout({type:l,name:g.toString()},e));return Bt.struct(u,o)});return r!==void 0?Bt.rustEnum(s).replicate(r):Bt.rustEnum(s,r)}case"alias":return Oe.fieldLayout({type:t.type.value,name:t.name},e)}}}const yu="global";class Sa{constructor(t){this.idl=t,this.ixLayout=Sa.parseIxLayout(t);const e=new Map;t.instructions.forEach(r=>{const s=mu(yu,r.name);e.set(pe.encode(s),{layout:this.ixLayout.get(r.name),name:r.name})}),this.sighashLayouts=e}encode(t,e){return this._encode(yu,t,e)}_encode(t,e,r){const s=yt.alloc(1e3),i=oe(e),o=this.ixLayout.get(i);if(!o)throw new Error(`Unknown method: ${i}`);const u=o.encode(r,s),l=s.slice(0,u);return yt.concat([mu(t,e),l])}static parseIxLayout(t){const e=t.instructions.map(r=>{let s=r.args.map(o=>{var u,l;return Oe.fieldLayout(o,Array.from([...(u=t.accounts)!==null&&u!==void 0?u:[],...(l=t.types)!==null&&l!==void 0?l:[]]))});const i=oe(r.name);return[i,Bt.struct(s,i)]});return new Map(e)}decode(t,e="hex"){typeof t=="string"&&(t=e==="hex"?yt.from(t,"hex"):pe.decode(t));let r=pe.encode(t.slice(0,8)),s=t.slice(8);const i=this.sighashLayouts.get(r);return i?{data:i.layout.decode(s),name:i.name}:null}format(t,e){return nr.format(t,e,this.idl)}}class nr{static format(t,e,r){const s=r.instructions.filter(l=>t.name===l.name)[0];if(s===void 0)return console.error("Invalid instruction given"),null;const i=s.args.map(l=>({name:l.name,type:nr.formatIdlType(l.type),data:nr.formatIdlData(l,t.data[l.name],r.types)})),o=nr.flattenIdlAccounts(s.accounts),u=e.map((l,g)=>g<o.length?{name:o[g].name,...l}:{name:void 0,...l});return{args:i,accounts:u}}static formatIdlType(t){if(typeof t=="string")return t;if("vec"in t)return`Vec<${this.formatIdlType(t.vec)}>`;if("option"in t)return`Option<${this.formatIdlType(t.option)}>`;if("defined"in t)return t.defined;if("array"in t)return`Array<${t.array[0]}; ${t.array[1]}>`;throw new Error(`Unknown IDL type: ${t}`)}static formatIdlData(t,e,r){if(typeof t.type=="string")return e.toString();if(t.type.hasOwnProperty("vec"))return"["+e.map(s=>this.formatIdlData({name:"",type:t.type.vec},s)).join(", ")+"]";if(t.type.hasOwnProperty("option"))return e===null?"null":this.formatIdlData({name:"",type:t.type.option},e,r);if(t.type.hasOwnProperty("defined")){if(r===void 0)throw new Error("User defined types not provided");const s=r.filter(i=>i.name===t.type.defined);if(s.length!==1)throw new Error(`Type not found: ${t.type.defined}`);return nr.formatIdlDataDefined(s[0],e,r)}return"unknown"}static formatIdlDataDefined(t,e,r){switch(t.type.kind){case"struct":{const s=t.type;return"{ "+Object.keys(e).map(o=>{const u=s.fields.find(l=>l.name===o);if(!u)throw new Error("Unable to find type");return o+": "+nr.formatIdlData(u,e[o],r)}).join(", ")+" }"}case"enum":{if(t.type.variants.length===0)return"{}";if(t.type.variants[0].name){const s=t.type.variants,i=Object.keys(e)[0],o=e[i],u=Object.keys(o).map(g=>{var d;const x=o[g],A=(d=s[i])===null||d===void 0?void 0:d.find(k=>k.name===g);if(!A)throw new Error("Unable to find variant");return g+": "+nr.formatIdlData(A,x,r)}).join(", "),l=oe(i,{pascalCase:!0});return u.length===0?l:`${l} { ${u} }`}else return"Tuple formatting not yet implemented"}case"alias":return nr.formatIdlType(t.type.value)}}static flattenIdlAccounts(t,e){return t.map(r=>{const s=Vm(r.name);if(r.hasOwnProperty("accounts")){const i=e?`${e} > ${s}`:s;return nr.flattenIdlAccounts(r.accounts,i)}else return{...r,name:e?`${e} > ${s}`:s}}).flat()}}function Vm(n){const t=n.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}function mu(n,t){let e=Wm(t),r=`${n}:${e}`;return yt.from(Ci(r).slice(0,8))}function dh(n,t){switch(t.type.kind){case"struct":return t.type.fields.map(e=>Vr(n,e.type)).reduce((e,r)=>e+r,0);case"enum":{const e=t.type.variants.map(r=>r.fields?r.fields.map(s=>typeof s=="object"&&"name"in s?Vr(n,s.type):Vr(n,s)).reduce((s,i)=>s+i,0):0);return Math.max(...e)+1}case"alias":return Vr(n,t.type.value)}}function Vr(n,t){var e,r;switch(t){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"publicKey":return 32;default:if("vec"in t)return 1;if("option"in t)return 1+Vr(n,t.option);if("coption"in t)return 4+Vr(n,t.coption);if("defined"in t){const s=(r=(e=n.types)===null||e===void 0?void 0:e.filter(o=>o.name===t.defined))!==null&&r!==void 0?r:[];if(s.length!==1)throw new Wi(`Type not found: ${JSON.stringify(t)}`);let i=s[0];return dh(n,i)}if("array"in t){let s=t.array[0],i=t.array[1];return Vr(n,s)*i}throw new Error(`Invalid type ${JSON.stringify(t)}`)}}const No=8;function ph(n){return At.from(Ci(n).slice(0,No))}class pn{constructor(t){if(t.accounts===void 0){this.accountLayouts=new Map;return}const e=t.accounts.map(r=>[r.name,Oe.typeDefLayout(r,t.types)]);this.accountLayouts=new Map(e),this.idl=t}async encode(t,e){const r=yt.alloc(1e3),s=this.accountLayouts.get(t);if(!s)throw new Error(`Unknown account: ${t}`);const i=s.encode(e,r);let o=r.slice(0,i),u=pn.accountDiscriminator(t);return yt.concat([u,o])}decode(t,e){if(pn.accountDiscriminator(t).compare(e.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(t,e)}decodeAny(t){const e=t.slice(0,8),r=Array.from(this.accountLayouts.keys()).find(s=>pn.accountDiscriminator(s).equals(e));if(!r)throw new Error("Account descriminator not found");return this.decodeUnchecked(r,t)}decodeUnchecked(t,e){const r=e.subarray(No),s=this.accountLayouts.get(t);if(!s)throw new Error(`Unknown account: ${t}`);return s.decode(r)}memcmp(t,e){const r=pn.accountDiscriminator(t);return{offset:0,bytes:pe.encode(e?yt.concat([r,e]):r)}}size(t){var e;return No+((e=dh(this.idl,t))!==null&&e!==void 0?e:0)}static accountDiscriminator(t){const e=`account:${oe(t,{pascalCase:!0,preserveConsecutiveUppercase:!0})}`;return ph(e)}}class Hm{constructor(t){if(t.events===void 0){this.layouts=new Map;return}const e=t.events.map(r=>{let s={name:r.name,type:{kind:"struct",fields:r.fields.map(i=>({name:i.name,type:i.type}))}};return[r.name,Oe.typeDefLayout(s,t.types)]});this.layouts=new Map(e),this.discriminators=new Map(t.events===void 0?[]:t.events.map(r=>[uu(jm(r.name)),r.name]))}decode(t){let e;try{e=oh(t)}catch{return null}const r=uu(e.slice(0,8)),s=this.discriminators.get(r);if(s===void 0)return null;const i=this.layouts.get(s);if(!i)throw new Error(`Unknown event: ${s}`);return{data:i.decode(e.slice(8)),name:s}}}function jm(n){return ph(`event:${n}`)}class Gm{constructor(t){if(t.types===void 0){this.typeLayouts=new Map;return}const e=t.types.map(r=>[r.name,Oe.typeDefLayout(r,t.types)]);this.typeLayouts=new Map(e),this.idl=t}encode(t,e){const r=yt.alloc(1e3),s=this.typeLayouts.get(t);if(!s)throw new Error(`Unknown type: ${t}`);const i=s.encode(e,r);return r.slice(0,i)}decode(t,e){const r=this.typeLayouts.get(t);if(!r)throw new Error(`Unknown type: ${t}`);return r.decode(e)}}class gh{constructor(t){this.instruction=new Sa(t),this.accounts=new pn(t),this.events=new Hm(t),this.types=new Gm(t)}}var Zm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};class ze{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,r){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var ls=ze;function Ym(n,t){return t.property?n+"["+t.property+"]":n}class Hr extends ze{isCount(){throw new Error("ExternalLayout is abstract")}}class yh extends Hr{constructor(t,e,r){if(!(t instanceof ze))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof hs||this.layout instanceof mh}decode(t,e){return e===void 0&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,r){return r===void 0&&(r=0),this.layout.encode(t,e,r+this.offset)}}class hs extends ze{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntLE(t,r,this.span),this.span}}class mh extends ze{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntBE(t,r,this.span),this.span}}const Do=Math.pow(2,32);function wh(n){const t=Math.floor(n/Do),e=n-t*Do;return{hi32:t,lo32:e}}function bh(n,t){return n*Do+t}class Xm extends ze{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),s=t.readUInt32LE(e+4);return bh(s,r)}encode(t,e,r){r===void 0&&(r=0);const s=wh(t);return e.writeUInt32LE(s.lo32,r),e.writeUInt32LE(s.hi32,r+4),8}}class Jm extends ze{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),s=t.readInt32LE(e+4);return bh(s,r)}encode(t,e,r){r===void 0&&(r=0);const s=wh(t);return e.writeUInt32LE(s.lo32,r),e.writeInt32LE(s.hi32,r+4),8}}class Qm extends ze{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof ze,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e){e===void 0&&(e=0);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r){r===void 0&&(r=0);const s=r;let i=0,o=0;for(const u of this.fields){let l=u.span;if(o=0<l?l:0,u.property!==void 0){const g=t[u.property];g!==void 0&&(o=u.encode(g,e,r),0>l&&(l=u.getSpan(e,r)))}i=r,r+=l}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class vh{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class wu extends vh{constructor(t,e){if(!(t instanceof Hr&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}class Eh extends ze{constructor(t,e,r){const s=t instanceof hs||t instanceof mh;if(s)t=new wu(new yh(t));else if(t instanceof Hr&&t.isCount())t=new wu(t);else if(!(t instanceof vh))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof ze))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&s&&(i+=t.layout.span)),super(i,r),this.discriminator=t,this.usesPrefixDiscriminator=s,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return o(u)},this.configGetSourceVariant=function(u){o=u.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(t.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(t,e){e===void 0&&(e=0);let r;const s=this.discriminator,i=s.decode(t,e);let o=this.registry[i];if(o===void 0){let u=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(u=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[o.property]=this.defaultLayout.decode(t,e+u)}else r=o.decode(t,e);return r}encode(t,e,r){r===void 0&&(r=0);const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=i.layout.span),i.encode(t[i.property],e,r),u+o.encode(t[o.property],e,r+u)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new tw(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e){let r=t;return At.isBuffer(t)&&(e===void 0&&(e=0),r=this.discriminator.decode(t,e)),this.registry[r]}}class tw extends ze{constructor(t,e,r,s){if(!(t instanceof Eh))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof ze))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(t,e+r)}decode(t,e){const r=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r){r===void 0&&(r=0);let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class ew extends ze{constructor(t,e){if(!(t instanceof Hr&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Hr||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e){e===void 0&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(t,e)),t.slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof Hr&&(s=t.length),!(At.isBuffer(t)&&s===t.length))throw new TypeError(Ym("Blob.encode",this)+" requires (length "+s+") Buffer as src");if(r+s>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),r,s,"hex"),this.length instanceof Hr&&this.length.encode(s,e,r),s}}var rw=((n,t,e)=>new yh(n,t,e)),nw=(n=>new hs(1,n)),vr=(n=>new hs(4,n)),iw=(n=>new Xm(n)),Sr=(n=>new Jm(n)),Ee=((n,t,e)=>new Qm(n,t,e)),kh=((n,t,e)=>new Eh(n,t,e)),ci=((n,t)=>new ew(n,t));class sw extends ls{constructor(t){super(-1,t),this.property=t,this.layout=Ee([vr("length"),vr("lengthPadding"),ci(rw(vr(),-8),"chars")],this.property)}encode(t,e,r=0){if(t==null)return this.layout.span;const s={chars:At.from(t,"utf8")};return this.layout.encode(s,e,r)}decode(t,e=0){return this.layout.decode(t,e).chars.toString()}getSpan(t,e=0){return vr().span+vr().span+new Pi(new Uint8Array(t).slice(e,e+4),10,"le").toNumber()}}function fs(n){return new sw(n)}function je(n){return ci(32,n)}const qe=kh(vr("instruction"));qe.addVariant(0,Ee([Sr("lamports"),Sr("space"),je("owner")]),"createAccount");qe.addVariant(1,Ee([je("owner")]),"assign");qe.addVariant(2,Ee([Sr("lamports")]),"transfer");qe.addVariant(3,Ee([je("base"),fs("seed"),Sr("lamports"),Sr("space"),je("owner")]),"createAccountWithSeed");qe.addVariant(4,Ee([je("authorized")]),"advanceNonceAccount");qe.addVariant(5,Ee([Sr("lamports")]),"withdrawNonceAccount");qe.addVariant(6,Ee([je("authorized")]),"initializeNonceAccount");qe.addVariant(7,Ee([je("authorized")]),"authorizeNonceAccount");qe.addVariant(8,Ee([Sr("space")]),"allocate");qe.addVariant(9,Ee([je("base"),fs("seed"),Sr("space"),je("owner")]),"allocateWithSeed");qe.addVariant(10,Ee([je("base"),fs("seed"),je("owner")]),"assignWithSeed");qe.addVariant(11,Ee([Sr("lamports"),fs("seed"),je("owner")]),"transferWithSeed");Math.max(...Object.values(qe.registry).map(n=>n.span));class ow extends ls{constructor(t,e,r,s){super(t.span,s),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}function bu(n){return new ow(ci(32),t=>new at(t),t=>t.toBuffer(),n)}Ee([vr("version"),vr("state"),bu("authorizedPubkey"),bu("nonce"),Ee([iw("lamportsPerSignature")],"feeCalculator")]);function aw(n,...t){let e=[yt.from([97,110,99,104,111,114])];t.forEach(s=>{e.push(s instanceof yt?s:Ve(s).toBuffer())});const[r]=at.findProgramAddressSync(e,Ve(n));return r}const cw=new at("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),uw=new at("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var vu={exports:{}};(function(n,t){var e=typeof self<"u"?self:Zm,r=(function(){function i(){this.fetch=!1,this.DOMException=e.DOMException}return i.prototype=e,new i})();(function(i){(function(o){var u={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function l(a){return a&&DataView.prototype.isPrototypeOf(a)}if(u.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(a){return a&&g.indexOf(Object.prototype.toString.call(a))>-1};function x(a){if(typeof a!="string"&&(a=String(a)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function A(a){return typeof a!="string"&&(a=String(a)),a}function k(a){var h={next:function(){var _=a.shift();return{done:_===void 0,value:_}}};return u.iterable&&(h[Symbol.iterator]=function(){return h}),h}function R(a){this.map={},a instanceof R?a.forEach(function(h,_){this.append(_,h)},this):Array.isArray(a)?a.forEach(function(h){this.append(h[0],h[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(h){this.append(h,a[h])},this)}R.prototype.append=function(a,h){a=x(a),h=A(h);var _=this.map[a];this.map[a]=_?_+", "+h:h},R.prototype.delete=function(a){delete this.map[x(a)]},R.prototype.get=function(a){return a=x(a),this.has(a)?this.map[a]:null},R.prototype.has=function(a){return this.map.hasOwnProperty(x(a))},R.prototype.set=function(a,h){this.map[x(a)]=A(h)},R.prototype.forEach=function(a,h){for(var _ in this.map)this.map.hasOwnProperty(_)&&a.call(h,this.map[_],_,this)},R.prototype.keys=function(){var a=[];return this.forEach(function(h,_){a.push(_)}),k(a)},R.prototype.values=function(){var a=[];return this.forEach(function(h){a.push(h)}),k(a)},R.prototype.entries=function(){var a=[];return this.forEach(function(h,_){a.push([_,h])}),k(a)},u.iterable&&(R.prototype[Symbol.iterator]=R.prototype.entries);function D(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function O(a){return new Promise(function(h,_){a.onload=function(){h(a.result)},a.onerror=function(){_(a.error)}})}function $(a){var h=new FileReader,_=O(h);return h.readAsArrayBuffer(a),_}function V(a){var h=new FileReader,_=O(h);return h.readAsText(a),_}function z(a){for(var h=new Uint8Array(a),_=new Array(h.length),M=0;M<h.length;M++)_[M]=String.fromCharCode(h[M]);return _.join("")}function j(a){if(a.slice)return a.slice(0);var h=new Uint8Array(a.byteLength);return h.set(new Uint8Array(a)),h.buffer}function et(){return this.bodyUsed=!1,this._initBody=function(a){this._bodyInit=a,a?typeof a=="string"?this._bodyText=a:u.blob&&Blob.prototype.isPrototypeOf(a)?this._bodyBlob=a:u.formData&&FormData.prototype.isPrototypeOf(a)?this._bodyFormData=a:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)?this._bodyText=a.toString():u.arrayBuffer&&u.blob&&l(a)?(this._bodyArrayBuffer=j(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||d(a))?this._bodyArrayBuffer=j(a):this._bodyText=a=Object.prototype.toString.call(a):this._bodyText="",this.headers.get("content-type")||(typeof a=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var a=D(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?D(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then($)}),this.text=function(){var a=D(this);if(a)return a;if(this._bodyBlob)return V(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(z(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(q)}),this.json=function(){return this.text().then(JSON.parse)},this}var ot=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Q(a){var h=a.toUpperCase();return ot.indexOf(h)>-1?h:a}function rt(a,h){h=h||{};var _=h.body;if(a instanceof rt){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,h.headers||(this.headers=new R(a.headers)),this.method=a.method,this.mode=a.mode,this.signal=a.signal,!_&&a._bodyInit!=null&&(_=a._bodyInit,a.bodyUsed=!0)}else this.url=String(a);if(this.credentials=h.credentials||this.credentials||"same-origin",(h.headers||!this.headers)&&(this.headers=new R(h.headers)),this.method=Q(h.method||this.method||"GET"),this.mode=h.mode||this.mode||null,this.signal=h.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&_)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(_)}rt.prototype.clone=function(){return new rt(this,{body:this._bodyInit})};function q(a){var h=new FormData;return a.trim().split("&").forEach(function(_){if(_){var M=_.split("="),C=M.shift().replace(/\+/g," "),I=M.join("=").replace(/\+/g," ");h.append(decodeURIComponent(C),decodeURIComponent(I))}}),h}function F(a){var h=new R,_=a.replace(/\r?\n[\t ]+/g," ");return _.split(/\r?\n/).forEach(function(M){var C=M.split(":"),I=C.shift().trim();if(I){var w=C.join(":").trim();h.append(I,w)}}),h}et.call(rt.prototype);function W(a,h){h||(h={}),this.type="default",this.status=h.status===void 0?200:h.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in h?h.statusText:"OK",this.headers=new R(h.headers),this.url=h.url||"",this._initBody(a)}et.call(W.prototype),W.prototype.clone=function(){return new W(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new R(this.headers),url:this.url})},W.error=function(){var a=new W(null,{status:0,statusText:""});return a.type="error",a};var L=[301,302,303,307,308];W.redirect=function(a,h){if(L.indexOf(h)===-1)throw new RangeError("Invalid status code");return new W(null,{status:h,headers:{location:a}})},o.DOMException=i.DOMException;try{new o.DOMException}catch{o.DOMException=function(h,_){this.message=h,this.name=_;var M=Error(h);this.stack=M.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function E(a,h){return new Promise(function(_,M){var C=new rt(a,h);if(C.signal&&C.signal.aborted)return M(new o.DOMException("Aborted","AbortError"));var I=new XMLHttpRequest;function w(){I.abort()}I.onload=function(){var p={status:I.status,statusText:I.statusText,headers:F(I.getAllResponseHeaders()||"")};p.url="responseURL"in I?I.responseURL:p.headers.get("X-Request-URL");var c="response"in I?I.response:I.responseText;_(new W(c,p))},I.onerror=function(){M(new TypeError("Network request failed"))},I.ontimeout=function(){M(new TypeError("Network request failed"))},I.onabort=function(){M(new o.DOMException("Aborted","AbortError"))},I.open(C.method,C.url,!0),C.credentials==="include"?I.withCredentials=!0:C.credentials==="omit"&&(I.withCredentials=!1),"responseType"in I&&u.blob&&(I.responseType="blob"),C.headers.forEach(function(p,c){I.setRequestHeader(c,p)}),C.signal&&(C.signal.addEventListener("abort",w),I.onreadystatechange=function(){I.readyState===4&&C.signal.removeEventListener("abort",w)}),I.send(typeof C._bodyInit>"u"?null:C._bodyInit)})}return E.polyfill=!0,i.fetch||(i.fetch=E,i.Headers=R,i.Request=rt,i.Response=W),o.Headers=R,o.Request=rt,o.Response=W,o.fetch=E,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=r;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,n.exports=t})(vu,vu.exports);Bt.rustEnum([Bt.struct([],"uninitialized"),Bt.struct([Bt.option(Bt.publicKey(),"authorityAddress")],"buffer"),Bt.struct([Bt.publicKey("programdataAddress")],"program"),Bt.struct([Bt.u64("slot"),Bt.option(Bt.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Bt.u32());function lw(n){return"accounts"in n}async function hw(n){const t=(await at.findProgramAddress([],n))[0];return await at.createWithSeed(t,fw(),n)}function fw(){return"anchor:idl"}const dw=Bt.struct([Bt.publicKey("authority"),Bt.vecU8("data")]);function pw(n){return dw.decode(n)}function ds(n,t){var e,r;let s={};const i=n.args?n.args.length:0;if(t.length>i){if(t.length!==i+1)throw new Error(`provided too many arguments ${t} to instruction ${n?.name} expecting: ${(r=(e=n.args)===null||e===void 0?void 0:e.map(o=>o.name))!==null&&r!==void 0?r:[]}`);s=t.pop()}return[t,s]}class Hi{static build(t,e,r){if(t.name==="_inner")throw new Wi("the _inner name is reserved");const s=(...i)=>{const[o,u]=ds(t,[...i]);ah(t.accounts,u.accounts),gw(t,...i);const l=s.accounts(u.accounts);return u.remainingAccounts!==void 0&&l.push(...u.remainingAccounts),hh("debug-logs")&&console.log("Outgoing account metas:",l),new Ft({keys:l,programId:r,data:e(t.name,bm(t,...o))})};return s.accounts=i=>Hi.accountsArray(i,t.accounts,r,t.name),s}static accountsArray(t,e,r,s){return t?e.map(i=>{if(("accounts"in i?i.accounts:void 0)!==void 0){const u=t[i.name];return Hi.accountsArray(u,i.accounts,r,s).flat()}else{const u=i;let l;try{l=Ve(t[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${s!==void 0?' for instruction "'+s+'"':""}. Expected PublicKey or string.`)}const g=u.isOptional&&l.equals(r),d=u.isMut&&!g,x=u.isSigner&&!g;return{pubkey:l,isWritable:d,isSigner:x}}}).flat():[]}}function gw(n,...t){}class yw{static build(t,e){return(...s)=>{var i,o,u;const[,l]=ds(t,[...s]),g=new Nt;if(l.preInstructions&&l.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=l.preInstructions)===null||i===void 0||i.forEach(d=>g.add(d)),(o=l.instructions)===null||o===void 0||o.forEach(d=>g.add(d)),g.add(e(...s)),(u=l.postInstructions)===null||u===void 0||u.forEach(d=>g.add(d)),g}}}class mw{static build(t,e,r,s){return async(...o)=>{var u;const l=e(...o),[,g]=ds(t,[...o]);if(s.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await s.sendAndConfirm(l,(u=g.signers)!==null&&u!==void 0?u:[],g.options)}catch(d){throw fh(d,r)}}}}class ww{static build(t,e,r,s){var i;const o={};return(i=t.accounts)===null||i===void 0||i.forEach(u=>{const l=oe(u.name);o[l]=new bw(t,u,r,s,e)}),o}}class bw{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}get idlAccount(){return this._idlAccount}constructor(t,e,r,s,i){this._idlAccount=e,this._programId=r,this._provider=s??Co(),this._coder=i??new gh(t),this._size=this._coder.accounts.size(e)}async fetchNullable(t,e){const{data:r}=await this.fetchNullableAndContext(t,e);return r}async fetchNullableAndContext(t,e){const r=await this.getAccountInfoAndContext(t,e),{value:s,context:i}=r;return{data:s&&s.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,s.data):null,context:i}}async fetch(t,e){const{data:r}=await this.fetchNullableAndContext(t,e);if(r===null)throw new Error(`Account does not exist or has no data ${t.toString()}`);return r}async fetchAndContext(t,e){const{data:r,context:s}=await this.fetchNullableAndContext(t,e);if(r===null)throw new Error(`Account does not exist ${t.toString()}`);return{data:r,context:s}}async fetchMultiple(t,e){return(await this.fetchMultipleAndContext(t,e)).map(s=>s?s.data:null)}async fetchMultipleAndContext(t,e){return(await Rm(this._provider.connection,t.map(s=>Ve(s)),e)).map(s=>{if(s==null)return null;const{account:i,context:o}=s;return{data:this._coder.accounts.decode(this._idlAccount.name,i.data),context:o}})}async all(t){const e=this.coder.accounts.memcmp(this._idlAccount.name,t instanceof At?t:void 0),r=[];return e?.offset!=null&&e?.bytes!=null&&r.push({memcmp:{offset:e.offset,bytes:e.bytes}}),e?.dataSize!=null&&r.push({dataSize:e.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...r,...Array.isArray(t)?t:[]]})).map(({pubkey:i,account:o})=>({publicKey:i,account:this._coder.accounts.decode(this._idlAccount.name,o.data)}))}subscribe(t,e){const r=Un.get(t.toString());if(r)return r.ee;const s=new pm;t=Ve(t);const i=this._provider.connection.onAccountChange(t,o=>{const u=this._coder.accounts.decode(this._idlAccount.name,o.data);s.emit("change",u)},e);return Un.set(t.toString(),{ee:s,listener:i}),s}async unsubscribe(t){let e=Un.get(t.toString());if(!e){console.warn("Address is not subscribed");return}Un&&await this._provider.connection.removeAccountChangeListener(e.listener).then(()=>{Un.delete(t.toString())}).catch(console.error)}async createInstruction(t,e){const r=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return ye.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:t.publicKey,space:e??r,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(e??r),programId:this._programId})}async associated(...t){const e=await this.associatedAddress(...t);return await this.fetch(e)}async associatedAddress(...t){return await aw(this._programId,...t)}async getAccountInfo(t,e){return await this._provider.connection.getAccountInfo(Ve(t),e)}async getAccountInfoAndContext(t,e){return await this._provider.connection.getAccountInfoAndContext(Ve(t),e)}}const Un=new Map,zo="Program log: ",_h="Program data: ",vw=zo.length,Ew=_h.length;class kw{constructor(t,e,r){this._programId=t,this._provider=e,this._eventParser=new Sh(t,r),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(t,e){var r;let s=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(t)||this._eventListeners.set(t,[]),this._eventListeners.set(t,((r=this._eventListeners.get(t))!==null&&r!==void 0?r:[]).concat(s)),this._eventCallbacks.set(s,[t,e]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(i,o)=>{if(!i.err)for(const u of this._eventParser.parseLogs(i.logs)){const l=this._eventListeners.get(u.name);l&&l.forEach(g=>{const d=this._eventCallbacks.get(g);if(d){const[,x]=d;x(u.data,o.slot,i.signature)}})}})),s}async removeEventListener(t){const e=this._eventCallbacks.get(t);if(!e)throw new Error(`Event listener ${t} doesn't exist!`);const[r]=e;let s=this._eventListeners.get(r);if(!s)throw new Error(`Event listeners don't exist for ${r}!`);if(this._eventCallbacks.delete(t),s=s.filter(i=>i!==t),this._eventListeners.set(r,s),s.length===0&&this._eventListeners.delete(r),this._eventCallbacks.size===0){if(this._eventListeners.size!==0)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class Sh{constructor(t,e){this.coder=e,this.programId=t}*parseLogs(t,e=!1){const r=new Sw(t),s=new _w;let i=r.next();for(;i!==null;){let[o,u,l]=this.handleLog(s,i,e);o&&(yield o),u&&s.push(u),l&&s.pop(),i=r.next()}}handleLog(t,e,r){return t.stack.length>0&&t.program()===this.programId.toString()?this.handleProgramLog(e,r):[null,...this.handleSystemLog(e)]}handleProgramLog(t,e){if(t.startsWith(zo)||t.startsWith(_h)){const r=t.startsWith(zo)?t.slice(vw):t.slice(Ew),s=this.coder.events.decode(r);if(e&&s===null)throw new Error(`Unable to decode event ${r}`);return[s,null,!1]}else return[null,...this.handleSystemLog(t)]}handleSystemLog(t){const e=t.split(":")[0];return e.match(/^Program (.*) success/g)!==null?[null,!0]:e.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:e.includes("invoke")?["cpi",!1]:[null,!1]}}class _w{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(t){this.stack.push(t)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class Sw{constructor(t){this.logs=t}next(){if(this.logs.length===0)return null;let t=this.logs[0];return this.logs=this.logs.slice(1),t}}class Aw{static build(t,e,r,s,i,o,u){return async(...g)=>{var d;const x=e(...g),[,A]=ds(t,[...g]);let k;if(s.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{k=await s.simulate(x,A.signers,(d=A.options)===null||d===void 0?void 0:d.commitment)}catch(O){throw fh(O,r)}if(k===void 0)throw new Error("Unable to simulate transaction");const R=k.logs;if(!R)throw new Error("Simulated logs not found");const D=[];if(u.events){let O=new Sh(o,i);for(const $ of O.parseLogs(R))D.push($)}return{events:D,raw:R}}}}function bo(n){return new Ah(ci(8),t=>xw.fromBuffer(t),t=>t.toBuffer(),n)}function _i(n){return new Ah(ci(32),t=>new at(t),t=>t.toBuffer(),n)}function vo(n,t){return new Iw(n,t)}class Ah extends ls{constructor(t,e,r,s){super(t.span,s),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}class Iw extends ls{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=vr()}encode(t,e,r=0){return t==null?this.layout.span+this.discriminator.encode(0,e,r):(this.discriminator.encode(1,e,r),this.layout.encode(t,e,r+4)+4)}decode(t,e=0){const r=this.discriminator.decode(t,e);if(r===0)return null;if(r===1)return this.layout.decode(t,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,e=0){return this.layout.getSpan(t,e+4)+4}}let xw=class Ih extends Pi{toBuffer(){const t=super.toArray().reverse(),e=At.from(t);if(e.length===8)return e;if(e.length>=8)throw new Error("u64 too large");const r=At.alloc(8);return e.copy(r),r}static fromBuffer(t){if(t.length!==8)throw new Error(`Invalid buffer length: ${t.length}`);return new Ih([...t].reverse().map(e=>`00${e.toString(16)}`.slice(-2)).join(""),16)}};const Bw=Ee([_i("mint"),_i("owner"),bo("amount"),vo(_i(),"delegate"),(n=>{const t=kh(nw("discriminator"),null,n);return t.addVariant(0,Ee([]),"uninitialized"),t.addVariant(1,Ee([]),"initialized"),t.addVariant(2,Ee([]),"frozen"),t})("state"),vo(bo(),"isNative"),bo("delegatedAmount"),vo(_i(),"closeAuthority")]);function Rw(n){return Bw.decode(n)}class Gn{constructor(t,e,r,s,i,o,u,l){this._accounts=e,this._provider=r,this._programId=s,this._idlIx=i,this._idlTypes=u,this._customResolver=l,this._args=t,this._accountStore=new Tw(r,o,this._programId)}args(t){this._args=t}async resolve(){for(await this.resolveConst(this._idlIx.accounts),this._resolveEventCpi(this._idlIx.accounts);await this.resolvePdas(this._idlIx.accounts)+await this.resolveRelations(this._idlIx.accounts)+await this.resolveCustom()>0;);}async resolveCustom(){if(this._customResolver){const{accounts:t,resolved:e}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=t,e}return 0}resolveOptionalsHelper(t,e){const r={};for(const s of e){const i=s.name,o=t[i];o!==void 0&&(xh(o)?lw(s)?r[i]=this.resolveOptionalsHelper(o,s.accounts):r[i]=Bh(o):o!==null?r[i]=Ve(o):s.isOptional&&(r[i]=this._programId))}return r}resolveOptionals(t){Object.assign(this._accounts,this.resolveOptionalsHelper(t,this._idlIx.accounts))}get(t){const e=t.reduce((r,s)=>r&&r[s],this._accounts);if(e&&e.toBase58)return e}set(t,e){let r=this._accounts;t.forEach((s,i)=>{i==t.length-1&&(r[s]=e),r[s]=r[s]||{},r=r[s]})}async resolveConst(t,e=[]){for(let r=0;r<t.length;r+=1){const s=t[r],i=s.accounts;i&&await this.resolveConst(i,[...e,oe(s.name)]);const o=s,u=oe(s.name);if(o.isSigner&&!this.get([...e,u])){if(this._provider.wallet===void 0)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this.set([...e,u],this._provider.wallet.publicKey)}Reflect.has(Gn.CONST_ACCOUNTS,u)&&!this.get([...e,u])&&this.set([...e,u],Gn.CONST_ACCOUNTS[u])}}_resolveEventCpi(t,e=[]){for(const r in t){const s=t[r],i=s.accounts;i&&this._resolveEventCpi(i,[...e,oe(s.name)]);const o=+r+1;if(o===t.length)return;const u=oe(t[r].name),l=oe(t[o].name);if(u==="eventAuthority"&&l==="program"){const g=[...e,u],d=[...e,l];this.get(g)||this.set(g,at.findProgramAddressSync([At.from("__event_authority")],this._programId)[0]),this.get(d)||this.set(d,this._programId);return}}}async resolvePdas(t,e=[]){let r=0;for(let s=0;s<t.length;s+=1){const i=t[s],o=i.accounts;o&&(r+=await this.resolvePdas(o,[...e,oe(i.name)]));const u=i,l=oe(i.name);u.pda&&u.pda.seeds.length>0&&!this.get([...e,l])&&await this.autoPopulatePda(u,e)&&(r+=1)}return r}async resolveRelations(t,e=[]){let r=0;for(let s=0;s<t.length;s+=1){const i=t[s],o=i.accounts;o&&(r+=await this.resolveRelations(o,[...e,oe(i.name)]));const u=i.relations||[],l=oe(i.name),g=[...e,l],d=this.get(g);if(d){const x=u.filter(A=>!this.get([...e,oe(A)]));if(r+=x.length,x.length>0){const A=await this._accountStore.fetchAccount({publicKey:d});await Promise.all(x.map(async k=>{const R=oe(k);return this.set([...e,R],A[R]),A[R]}))}}}return r}async autoPopulatePda(t,e=[]){if(!t.pda||!t.pda.seeds)throw new Error("Must have seeds");const r=await Promise.all(t.pda.seeds.map(o=>this.toBuffer(o,e)));if(r.some(o=>typeof o>"u"))return;const s=await this.parseProgramId(t,e);if(!s)return;const[i]=await at.findProgramAddress(r,s);this.set([...e,oe(t.name)],i)}async parseProgramId(t,e=[]){var r;if(!(!((r=t.pda)===null||r===void 0)&&r.programId))return this._programId;switch(t.pda.programId.kind){case"const":return new at(this.toBufferConst(t.pda.programId.value));case"arg":return this.argValue(t.pda.programId);case"account":return await this.accountValue(t.pda.programId,e);default:throw new Error(`Unexpected program seed kind: ${t.pda.programId.kind}`)}}async toBuffer(t,e=[]){switch(t.kind){case"const":return this.toBufferConst(t);case"arg":return await this.toBufferArg(t);case"account":return await this.toBufferAccount(t,e);default:throw new Error(`Unexpected seed kind: ${t.kind}`)}}getType(t,e=[]){if(e.length>0&&t.defined){const r=this._idlTypes.find(o=>o.name===t.defined);if(!r)throw new Error(`Cannot find type ${t.defined}`);const i=r.type.fields.find(o=>o.name===e[0]);return this.getType(i.type,e.slice(1))}return t}toBufferConst(t){return this.toBufferValue(this.getType(t.type,(t.path||"").split(".").slice(1)),t.value)}async toBufferArg(t){const e=this.argValue(t);if(!(typeof e>"u"))return this.toBufferValue(this.getType(t.type,(t.path||"").split(".").slice(1)),e)}argValue(t){const e=t.path.split("."),r=oe(e[0]),s=this._idlIx.args.findIndex(i=>i.name===r);if(s===-1)throw new Error(`Unable to find argument for seed: ${r}`);return e.slice(1).reduce((i,o)=>(i||{})[o],this._args[s])}async toBufferAccount(t,e=[]){const r=await this.accountValue(t,e);if(r)return this.toBufferValue(t.type,r)}async accountValue(t,e=[]){const r=t.path.split("."),s=r[0],i=this.get([...e,oe(s)]);if(i===null)throw new Error("fieldPubkey is null");if(r.length===1)return i;const o=await this._accountStore.fetchAccount({publicKey:i,name:t.account});return this.parseAccountValue(o,r.slice(1))}parseAccountValue(t,e){let r;for(;e.length>0;)r=t[oe(e[0])],e=e.slice(1);return r}toBufferValue(t,e){switch(t){case"u8":return At.from([e]);case"u16":let r=At.alloc(2);return r.writeUInt16LE(e),r;case"u32":let s=At.alloc(4);return s.writeUInt32LE(e),s;case"u64":let i=At.alloc(8);return i.writeBigUInt64LE(BigInt(e)),i;case"string":return At.from(mm(e));case"publicKey":return e.toBuffer();default:if(t.array)return At.from(e);throw new Error(`Unexpected seed type: ${t}`)}}}Gn.CONST_ACCOUNTS={associatedTokenProgram:uw,rent:Yr,systemProgram:ye.programId,tokenProgram:cw,clock:Ze};class Tw{constructor(t,e,r){this._provider=t,this._programId=r,this._cache=new Map,this._idls={},this._idls[r.toBase58()]=e}async ensureIdl(t){if(!this._idls[t.toBase58()]){const e=await Zn.fetchIdl(t,this._provider);if(e){const r=new Zn(e,t,this._provider);this._idls[t.toBase58()]=r.account}}return this._idls[t.toBase58()]}async fetchAccount({publicKey:t,name:e,programId:r=this._programId}){const s=t.toString();if(!this._cache.has(s))if(e==="TokenAccount"){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${s}`);const o=Rw(i.data);this._cache.set(s,o)}else if(e){const i=await this.ensureIdl(r);if(i){const o=i[oe(e)];if(o){const u=await o.fetch(t);this._cache.set(s,u)}}}else{const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`invalid account info for ${s}`);const o=i.data,u=await this.ensureIdl(i.owner);if(u){const l=Object.values(u)[0];if(!l)throw new Error("No accounts for this program");const g=l.coder.accounts.decodeAny(o);this._cache.set(s,g)}}return this._cache.get(s)}}class Lw{static build(t,e,r,s,i,o,u,l,g,d,x){return(...A)=>new Mw(A,s,i,o,u,l,t,e,r,g,d,x)}}function xh(n){return typeof n=="object"&&n!==null&&!("_bn"in n)}function Bh(n,t){const e={};for(const r in n){const s=n[r];if(s===null)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");e[r]=xh(s)?Bh(s):Ve(s)}return e}class Mw{constructor(t,e,r,s,i,o,u,l,g,d,x,A){this._ixFn=e,this._txFn=r,this._rpcFn=s,this._simulateFn=i,this._viewFn=o,this._programId=l,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._args=t,this._accountsResolver=new Gn(t,this._accounts,u,l,g,d,x,A)}args(t){this._args=t,this._accountsResolver.args(t)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(t){return this._autoResolveAccounts=!0,this._accountsResolver.resolveOptionals(t),this}accountsStrict(t){return this._autoResolveAccounts=!1,this._accountsResolver.resolveOptionals(t),this}signers(t){return this._signers=this._signers.concat(t),this}remainingAccounts(t){return this._remainingAccounts=this._remainingAccounts.concat(t),this}preInstructions(t){return this._preInstructions=this._preInstructions.concat(t),this}postInstructions(t){return this._postInstructions=this._postInstructions.concat(t),this}async rpc(t){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async rpcAndKeys(t){return{pubkeys:await this.pubkeys(),signature:await this.rpc(t)}}async view(t){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async simulate(t){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:await this._signers}}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class Pw{static build(t,e,r,s){const i=e.accounts.find(l=>l.isMut),o=!!e.returns;return i||!o?void 0:async(...l)=>{var g,d;let x=await r(...l);const A=`Program return: ${t} `;let k=x.raw.find($=>$.startsWith(A));if(!k)throw new Error("View expected return log");let R=oh(k.slice(A.length)),D=e.returns;if(!D)throw new Error("View expected return type");return Oe.fieldLayout({type:D},Array.from([...(g=s.accounts)!==null&&g!==void 0?g:[],...(d=s.types)!==null&&d!==void 0?d:[]])).decode(R)}}}class Cw{static build(t,e,r,s,i){const o={},u={},l={},g={},d={},x={},A=wm(t),k=t.accounts?ww.build(t,e,r,s):{};return t.instructions.forEach(R=>{const D=Hi.build(R,(ot,Q)=>e.instruction.encode(ot,Q),r),O=yw.build(R,D),$=mw.build(R,O,A,s),V=Aw.build(R,O,A,s,e,r,t),z=Pw.build(r,R,V,t),j=Lw.build(s,r,R,D,O,$,V,z,k,t.types||[],i&&i(R)),et=oe(R.name);u[et]=D,l[et]=O,o[et]=$,g[et]=V,d[et]=j,z&&(x[et]=z)}),[o,u,l,k,g,d,x]}}class Zn{get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}constructor(t,e,r,s,i){e=Ve(e),r||(r=Co()),this._idl=t,this._provider=r,this._programId=e,this._coder=s??new gh(t),this._events=new kw(this._programId,r,this._coder);const[o,u,l,g,d,x,A]=Cw.build(t,this._coder,e,r,i??(()=>{}));this.rpc=o,this.instruction=u,this.transaction=l,this.account=g,this.simulate=d,this.methods=x,this.views=A}static async at(t,e){const r=Ve(t),s=await Zn.fetchIdl(r,e);if(!s)throw new Error(`IDL not found for program: ${t.toString()}`);return new Zn(s,r,e)}static async fetchIdl(t,e){e=e??Co();const r=Ve(t),s=await hw(r),i=await e.connection.getAccountInfo(s);if(!i)return null;let o=pw(i.data.slice(8));const u=hm(o.data);return JSON.parse(ym(u))}addEventListener(t,e){return this._events.addEventListener(t,e)}async removeEventListener(t){return await this._events.removeEventListener(t)}}new at("11111111111111111111111111111111");const Qe=new at("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new at("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const Ln=new at("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new at("So11111111111111111111111111111111111111112");new at("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const Aa=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}};var Dr={},Eu;function Ow(){if(Eu)return Dr;Eu=1,Object.defineProperty(Dr,"__esModule",{value:!0});function n(s){{const i=At.from(s);i.reverse();const o=i.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}Dr.toBigIntLE=n;function t(s){{const i=s.toString("hex");return i.length===0?BigInt(0):BigInt(`0x${i}`)}}Dr.toBigIntBE=t;function e(s,i){{const o=s.toString(16),u=At.from(o.padStart(i*2,"0").slice(0,i*2),"hex");return u.reverse(),u}}Dr.toBufferLE=e;function r(s,i){{const o=s.toString(16);return At.from(o.padStart(i*2,"0").slice(0,i*2),"hex")}}return Dr.toBufferBE=r,Dr}var ku=Ow();const Uw=n=>t=>{const e=K.blob(n,t),{encode:r,decode:s}=Aa(e),i=e;return i.decode=(o,u)=>{const l=s(o,u);return ku.toBigIntLE(At.from(l))},i.encode=(o,u,l)=>{const g=ku.toBufferLE(o,n);return r(g,u,l)},i},Fn=Uw(8),Rh=n=>{const t=K.u8(n),{encode:e,decode:r}=Aa(t),s=t;return s.decode=(i,o)=>!!r(i,o),s.encode=(i,o,u)=>{const l=Number(i);return e(l,o,u)},s},Ae=n=>{const t=K.blob(32,n),{encode:e,decode:r}=Aa(t),s=t;return s.decode=(i,o)=>{const u=r(i,o);return new at(u)},s.encode=(i,o,u)=>{const l=i.toBuffer();return e(l,o,u)},s};class Nr extends Error{constructor(t){super(t)}}class ps extends Nr{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class Th extends Nr{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class gs extends Nr{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class vn extends Nr{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class Ia extends Nr{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class Lh extends Nr{constructor(){super(...arguments),this.name="TokenInvalidOwnerError"}}class xa extends Nr{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var ji;(function(n){n[n.InitializeMint=0]="InitializeMint",n[n.InitializeAccount=1]="InitializeAccount",n[n.InitializeMultisig=2]="InitializeMultisig",n[n.Transfer=3]="Transfer",n[n.Approve=4]="Approve",n[n.Revoke=5]="Revoke",n[n.SetAuthority=6]="SetAuthority",n[n.MintTo=7]="MintTo",n[n.Burn=8]="Burn",n[n.CloseAccount=9]="CloseAccount",n[n.FreezeAccount=10]="FreezeAccount",n[n.ThawAccount=11]="ThawAccount",n[n.TransferChecked=12]="TransferChecked",n[n.ApproveChecked=13]="ApproveChecked",n[n.MintToChecked=14]="MintToChecked",n[n.BurnChecked=15]="BurnChecked",n[n.InitializeAccount2=16]="InitializeAccount2",n[n.SyncNative=17]="SyncNative",n[n.InitializeAccount3=18]="InitializeAccount3",n[n.InitializeMultisig2=19]="InitializeMultisig2",n[n.InitializeMint2=20]="InitializeMint2",n[n.GetAccountDataSize=21]="GetAccountDataSize",n[n.InitializeImmutableOwner=22]="InitializeImmutableOwner",n[n.AmountToUiAmount=23]="AmountToUiAmount",n[n.UiAmountToAmount=24]="UiAmountToAmount",n[n.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",n[n.TransferFeeExtension=26]="TransferFeeExtension",n[n.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",n[n.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",n[n.Reallocate=29]="Reallocate",n[n.MemoTransferExtension=30]="MemoTransferExtension",n[n.CreateNativeMint=31]="CreateNativeMint",n[n.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",n[n.InterestBearingMintExtension=33]="InterestBearingMintExtension",n[n.CpiGuardExtension=34]="CpiGuardExtension",n[n.InitializePermanentDelegate=35]="InitializePermanentDelegate",n[n.TransferHookExtension=36]="TransferHookExtension",n[n.MetadataPointerExtension=39]="MetadataPointerExtension",n[n.GroupPointerExtension=40]="GroupPointerExtension",n[n.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",n[n.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",n[n.PausableExtension=44]="PausableExtension"})(ji||(ji={}));var Yn;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Mint=1]="Mint",n[n.Account=2]="Account"})(Yn||(Yn={}));const Ba=1,Mh=K.struct([K.u8("m"),K.u8("n"),Rh("isInitialized"),Ae("signer1"),Ae("signer2"),Ae("signer3"),Ae("signer4"),Ae("signer5"),Ae("signer6"),Ae("signer7"),Ae("signer8"),Ae("signer9"),Ae("signer10"),Ae("signer11")]),Ra=Mh.span;var Xn;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initialized=1]="Initialized",n[n.Frozen=2]="Frozen"})(Xn||(Xn={}));const Ta=K.struct([Ae("mint"),Ae("owner"),Fn("amount"),K.u32("delegateOption"),Ae("delegate"),K.u8("state"),K.u32("isNativeOption"),Fn("isNative"),Fn("delegatedAmount"),K.u32("closeAuthorityOption"),Ae("closeAuthority")]),Er=Ta.span;async function Fo(n,t,e,r=Qe){const s=await n.getAccountInfo(t,e);return Ph(t,s,r)}function Ph(n,t,e=Qe){if(!t)throw new ps;if(!t.owner.equals(e))throw new gs;if(t.data.length<Er)throw new vn;const r=Ta.decode(t.data.slice(0,Er));let s=At.alloc(0);if(t.data.length>Er){if(t.data.length===Ra)throw new vn;if(t.data[Er]!=Yn.Account)throw new Th;s=t.data.slice(Er+Ba)}return{address:n,mint:r.mint,owner:r.owner,amount:r.amount,delegate:r.delegateOption?r.delegate:null,delegatedAmount:r.delegatedAmount,isInitialized:r.state!==Xn.Uninitialized,isFrozen:r.state===Xn.Frozen,isNative:!!r.isNativeOption,rentExemptReserve:r.isNativeOption?r.isNative:null,closeAuthority:r.closeAuthorityOption?r.closeAuthority:null,tlvData:s}}function Nw(n,t,e){if(e.length){n.push({pubkey:t,isSigner:!1,isWritable:!1});for(const r of e)n.push({pubkey:r instanceof at?r:r.publicKey,isSigner:!0,isWritable:!1})}else n.push({pubkey:t,isSigner:!0,isWritable:!1});return n}const Ko=K.struct([K.u8("instruction"),Fn("amount"),K.u8("decimals")]);function Dw(n,t,e,r,s,i,o=[],u=Qe){const l=Nw([{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!0}],r,o),g=At.alloc(Ko.span);return Ko.encode({instruction:ji.TransferChecked,amount:BigInt(s),decimals:i},g),new Ft({keys:l,programId:u,data:g})}const La=K.struct([K.u32("mintAuthorityOption"),Ae("mintAuthority"),Fn("supply"),K.u8("decimals"),Rh("isInitialized"),K.u32("freezeAuthorityOption"),Ae("freezeAuthority")]),Ri=La.span;async function zw(n,t,e,r=Qe){const s=await n.getAccountInfo(t,e);return Ch(t,s,r)}function Ch(n,t,e=Qe){if(!t)throw new ps;if(!t.owner.equals(e))throw new gs;if(t.data.length<Ri)throw new vn;const r=La.decode(t.data.slice(0,Ri));let s=At.alloc(0);if(t.data.length>Ri){if(t.data.length<=Er)throw new vn;if(t.data.length===Ra)throw new vn;if(t.data[Er]!=Yn.Mint)throw new Ia;s=t.data.slice(Er+Ba)}return{address:n,mintAuthority:r.mintAuthorityOption?r.mintAuthority:null,supply:r.supply,decimals:r.decimals,isInitialized:r.isInitialized,freezeAuthority:r.freezeAuthorityOption?r.freezeAuthority:null,tlvData:s}}async function Fw(n,t,e=!1,r=Qe,s=Ln){if(!e&&!at.isOnCurve(t.toBuffer()))throw new xa;const[i]=await at.findProgramAddress([t.toBuffer(),r.toBuffer(),n.toBuffer()],s);return i}function Oh(n,t,e=!1,r=Qe,s=Ln){if(!e&&!at.isOnCurve(t.toBuffer()))throw new xa;const[i]=at.findProgramAddressSync([t.toBuffer(),r.toBuffer(),n.toBuffer()],s);return i}function Uh(n,t,e,r,s=Qe,i=Ln){return Kw(n,t,e,r,At.alloc(0),s,i)}function Kw(n,t,e,r,s,i=Qe,o=Ln){const u=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:ye.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new Ft({keys:u,programId:o,data:s})}async function qw(n,t,e,r,s=!1,i,o,u=Qe,l=Ln){const g=Oh(e,r,s,u,l);let d;try{d=await Fo(n,g,i,u)}catch(x){if(x instanceof ps||x instanceof gs){try{const A=new Nt().add(Uh(t.publicKey,g,r,e,u,l));await Ki(n,A,[t],o)}catch{}d=await Fo(n,g,i,u)}else throw x}if(!d.mint.equals(e))throw new Ia;if(!d.owner.equals(r))throw new Lh;return d}const Zw=Object.freeze(Object.defineProperty({__proto__:null,ACCOUNT_SIZE:Er,ACCOUNT_TYPE_SIZE:Ba,ASSOCIATED_TOKEN_PROGRAM_ID:Ln,AccountLayout:Ta,get AccountState(){return Xn},get AccountType(){return Yn},MINT_SIZE:Ri,MULTISIG_SIZE:Ra,MintLayout:La,MultisigLayout:Mh,TOKEN_PROGRAM_ID:Qe,TokenAccountNotFoundError:ps,TokenError:Nr,get TokenInstruction(){return ji},TokenInvalidAccountError:Th,TokenInvalidAccountOwnerError:gs,TokenInvalidAccountSizeError:vn,TokenInvalidMintError:Ia,TokenInvalidOwnerError:Lh,TokenOwnerOffCurveError:xa,createAssociatedTokenAccountInstruction:Uh,createTransferCheckedInstruction:Dw,getAccount:Fo,getAssociatedTokenAddress:Fw,getAssociatedTokenAddressSync:Oh,getMint:zw,getOrCreateAssociatedTokenAccount:qw,transferCheckedInstructionData:Ko,unpackAccount:Ph,unpackMint:Ch},Symbol.toStringTag,{value:"Module"}));export{Om as A,At as B,Rg as C,at as P,Yr as S,Qe as T,Zn as a,Ln as b,ye as c,pn as d,Pi as e,qw as f,Fw as g,Ft as h,Nt as i,jg as j,Zw as k};
